{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/alipay-reward-image.jpg","path":"images/alipay-reward-image.jpg","modified":1,"renderable":0},{"_id":"source/images/favicon.ico","path":"images/favicon.ico","modified":1,"renderable":0},{"_id":"source/images/avatar.jpg","path":"images/avatar.jpg","modified":1,"renderable":0},{"_id":"source/images/wechat-reward-image.jpg","path":"images/wechat-reward-image.jpg","modified":1,"renderable":0},{"_id":"source/images/blog/newRepository.png","path":"images/blog/newRepository.png","modified":1,"renderable":0},{"_id":"source/images/blog/step2.png","path":"images/blog/step2.png","modified":1,"renderable":0},{"_id":"source/images/blog/step3.png","path":"images/blog/step3.png","modified":1,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","path":"lib/canvas-ribbon/canvas-ribbon.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","path":"lib/three/canvas_lines.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","path":"lib/three/canvas_sphere.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.css","path":"lib/Han/dist/han.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.js","path":"lib/Han/dist/han.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":1,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.css","path":"lib/Han/dist/han.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.js","path":"lib/Han/dist/han.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","path":"lib/Han/dist/font/han-space.otf","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","path":"lib/Han/dist/font/han.otf","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","path":"lib/Han/dist/font/han-space.woff","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","path":"lib/Han/dist/font/han.woff","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/next/source/images/backGround.jpg","path":"images/backGround.jpg","modified":1,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1}],"Cache":[{"_id":"themes/next/.bowerrc","hash":"334da94ca6f024d60d012cc26ea655681e724ad8","modified":1493277405321},{"_id":"themes/next/.editorconfig","hash":"211d2c92bfdddb3e81ea946f4ca7a539f150f4da","modified":1493277405321},{"_id":"themes/next/.gitattributes","hash":"8454b9313cb1a97b63fb87e2d29daee497ce6249","modified":1493277405322},{"_id":"themes/next/.gitignore","hash":"b935cc0e5b099ebd343ca1766e02f65138c13dd0","modified":1493277405323},{"_id":"themes/next/.hound.yml","hash":"289dcf5bfe92dbd680d54d6e0668f41c9c9c0c78","modified":1493277405324},{"_id":"themes/next/.javascript_ignore","hash":"74b54cf920cbbf4038a68e54b7138af8b8f45588","modified":1493277405324},{"_id":"themes/next/.jshintrc","hash":"b7d23f2ce8d99fa073f22f9960605f318acd7710","modified":1493277405324},{"_id":"themes/next/.stylintrc","hash":"3b7f9785e9ad0dab764e1c535b40df02f4ff5fd6","modified":1493277405325},{"_id":"themes/next/.travis.yml","hash":"360f38044910e74bf628b0799e19db90718b2cbe","modified":1493277405325},{"_id":"themes/next/LICENSE","hash":"ec44503d7e617144909e54533754f0147845f0c5","modified":1493277405325},{"_id":"themes/next/README.en.md","hash":"953873fe2ee79bfc567b16dcdf8f91c1410444f8","modified":1493277405326},{"_id":"themes/next/README.md","hash":"06aaf1241e9e1619956c86d8b1397a643840a9d1","modified":1493277405326},{"_id":"themes/next/_config.yml","hash":"2668fcc392b43cfb5531918b4fddc53def7902fb","modified":1498195644065},{"_id":"themes/next/bower.json","hash":"936b9aed1934471bb74cdaacc3fb8031eb01fe23","modified":1493277405327},{"_id":"themes/next/gulpfile.coffee","hash":"412defab3d93d404b7c26aaa0279e2e586e97454","modified":1493277405327},{"_id":"themes/next/package.json","hash":"a5c189d4c4e946e936d3b5e29e2d81ddaf03ff96","modified":1493277405370},{"_id":"source/_posts/Android Studio打包.md","hash":"ca926ddfa093f1855e76e0e5f22e5b7ef208f375","modified":1495170010427},{"_id":"source/_posts/SNMP学习总结(1)——基本概念.md","hash":"c5dcec2cb9c89ffc4f162506a4e9f4bdccc79db5","modified":1495673137423},{"_id":"source/_posts/SNMP学习总结(2)——snmp安装和配置.md","hash":"e6240648eee5fbed8e9fc6827824a8d78f6ba43c","modified":1497408229406},{"_id":"source/_posts/SNMP学习笔记(3)——snmp4j.md","hash":"efe36bc58354f0df02c104aad52dac661b1adcc1","modified":1497245053353},{"_id":"source/_posts/hexo+github搭建个人博客.md","hash":"26f90d4ca8d6b49d3b407d1088528f15feffbe35","modified":1493364338787},{"_id":"source/_posts/mybatis-一-快速入门.md","hash":"7696d9949eb06fa661c99b4a73329c663618c46f","modified":1493375333166},{"_id":"source/_posts/html5-常用功能.md","hash":"326fb22df6b6c647f530ce9e13a19bdffe43520a","modified":1495188842695},{"_id":"source/_posts/spring-1——框架简介.md","hash":"332ab049c45396b42158d40ded8c647f916a4f76","modified":1497405735812},{"_id":"source/_posts/spring-2——IOC浅析.md","hash":"7a978da99fae991adea9be6319ded02086634631","modified":1497408154767},{"_id":"source/_posts/spring-3——AOP浅析.md","hash":"cf1c0bc6165d078403d9e8f263c795696319a196","modified":1497431317825},{"_id":"source/_posts/spring-4-——持久层封装.md","hash":"6f4d92ba2f1934d5b49b94f846eea0aebd07df7b","modified":1497671248703},{"_id":"source/_posts/基于MUI及Html5-开发app.md","hash":"5057ea3e038a79c5b4a26d01001d49333fb4a3dc","modified":1495189042971},{"_id":"source/about/index.md","hash":"3302bb578ad315a70a810f15e7e165ba45f209a5","modified":1493364290915},{"_id":"source/categories/index.md","hash":"d83da7ca44e5d09573f06ebac7e6c297f3aaa244","modified":1493365845677},{"_id":"source/images/alipay-reward-image.jpg","hash":"ae2001a613364643005e9798c5a7bf2a13bd2066","modified":1493365259436},{"_id":"source/images/favicon.ico","hash":"75b675529611ce5e08b868af7d616100da70dad8","modified":1493362929279},{"_id":"source/photos/data.json","hash":"dba16a3e248e670a0c08a0b1e8b210297b44a4cf","modified":1495196661376},{"_id":"source/photos/index.ejs","hash":"93746d6bf15dd696b708ba7e8eac2fbd35308265","modified":1495196722195},{"_id":"source/photos/index.md","hash":"36d0d638bff061aca57d15e4dcd7448325ad5658","modified":1495193908865},{"_id":"source/photos/ins.css","hash":"43a45811b364e206d2190228b9afe629f2c7d50b","modified":1495196829599},{"_id":"source/photos/ins.js","hash":"2890476636491238c95f168162b93bd83b27b0d2","modified":1495196871677},{"_id":"source/photos/lazyload.min.js","hash":"47cf297e07df9cbf6c2ebced6ef88e8963a6a4ed","modified":1495197041785},{"_id":"source/tags/index.md","hash":"bae09363793e713942567876da5a19d640931f0a","modified":1493365860404},{"_id":"themes/next/.git/COMMIT_EDITMSG","hash":"7473bb43f2a464c80c948ee0715bff42cbf00a1a","modified":1497594091302},{"_id":"themes/next/.git/config","hash":"c633f29e4fbb45746fc69cb0e1c5a7d11f730e24","modified":1494250527551},{"_id":"themes/next/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1493277181411},{"_id":"themes/next/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1493277405302},{"_id":"themes/next/.git/index","hash":"fbd3fe0db7eb91e20f297040c65e95dcf29f4ef4","modified":1498195465283},{"_id":"themes/next/.git/packed-refs","hash":"8f76bf0e57f7f1fd40e4a8da293545163bf98a89","modified":1493277405293},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"5adfad3ef1b870063e621bc0838268eb2c7c697a","modified":1493277405322},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"4de856de657a27f340f245eb491a1f52ceba1735","modified":1493277405322},{"_id":"themes/next/languages/de.yml","hash":"4be3e7d296d5592e0d111dfa6cbbff02602c972d","modified":1493277405328},{"_id":"themes/next/languages/default.yml","hash":"d912814caac150da1611c96843371a87714e52f9","modified":1493277405328},{"_id":"themes/next/languages/fr-FR.yml","hash":"0d5bd8bbbeafb72506124ed35e7509debc753612","modified":1493277405330},{"_id":"themes/next/languages/en.yml","hash":"b3ee45143bc014578db6b8ac0573f7c7b143a743","modified":1493277405329},{"_id":"themes/next/languages/id.yml","hash":"c0848e93bf33a1333ff232905b6b392b1e056dd1","modified":1493277405330},{"_id":"themes/next/languages/ja.yml","hash":"1a608dc799c0f9c36b626bac6fe3404acb45b86d","modified":1493277405330},{"_id":"themes/next/languages/pt-BR.yml","hash":"cc8b5a67ec87b0d5aec6e253bab67ec3cfe3069c","modified":1493277405332},{"_id":"themes/next/languages/ko.yml","hash":"5c811514aef401317a9ec38b95679d6d2ef0ad42","modified":1493277405331},{"_id":"themes/next/languages/pt.yml","hash":"943475a7d681f37ede579cd62da9c50568ca0f8d","modified":1493277405332},{"_id":"themes/next/languages/ru.yml","hash":"84d41a111e497236b2c1fa16e9b91668a1f37037","modified":1493277405332},{"_id":"themes/next/languages/zh-Hans.yml","hash":"30d05f72c4b37e51d33adbffc88e647812095daa","modified":1495193082779},{"_id":"themes/next/languages/zh-hk.yml","hash":"b58c0d85daa4d62b0c9753a59de0739aa0120735","modified":1493277405333},{"_id":"themes/next/languages/zh-tw.yml","hash":"8ce0a32411de111ae39d08e4bc936767dacdeb08","modified":1493277405334},{"_id":"themes/next/layout/_layout.swig","hash":"efa71671290bb4b497d83720282b36482b6b0efb","modified":1493277405335},{"_id":"themes/next/layout/archive.swig","hash":"a1d1e91013baaaeb7deaf35c6d3975971ce38e02","modified":1493277405367},{"_id":"themes/next/layout/category.swig","hash":"be617f098582c4b110935a6d3551f0a8d09fda5a","modified":1493277405367},{"_id":"themes/next/layout/page.swig","hash":"0a8783d44db72e134db5e221705c74b4731826c9","modified":1493277405368},{"_id":"themes/next/layout/index.swig","hash":"4bf29f44ca9519a005671f2f2a79a48a148b435b","modified":1493277405367},{"_id":"themes/next/layout/post.swig","hash":"182a99b1f6db0350106c6bb480fede0bbdb7e40f","modified":1493277405369},{"_id":"themes/next/layout/schedule.swig","hash":"8086f1163b10460258ecbbbe48b057b22bb2f02e","modified":1493277405369},{"_id":"themes/next/layout/tag.swig","hash":"4d891cb52bbd1b584b1c38669968515987e73e12","modified":1493277405369},{"_id":"themes/next/scripts/merge-configs.js","hash":"3ce1be32bb77ee19da25e8dae7dc04e2afc46ca1","modified":1493277405371},{"_id":"themes/next/scripts/merge.js","hash":"39b84b937b2a9608b94e5872349a47200e1800ff","modified":1493277405372},{"_id":"themes/next/test/.jshintrc","hash":"c9fca43ae0d99718e45a6f5ce736a18ba5fc8fb6","modified":1493277405730},{"_id":"themes/next/test/helpers.js","hash":"f25e7f3265eb5a6e1ccbb5e5012fa9bebf134105","modified":1493277405730},{"_id":"themes/next/test/intern.js","hash":"db90b1063356727d72be0d77054fdc32fa882a66","modified":1493277405731},{"_id":"source/images/avatar.jpg","hash":"f5c15c3a390550ab84662fbcc6dcdd34e53deb22","modified":1493015255957},{"_id":"source/images/wechat-reward-image.jpg","hash":"4532622ab5a752b82d00b96dca3bd3239f0ac30a","modified":1493365276109},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1493277405419},{"_id":"source/images/blog/newRepository.png","hash":"91e0c5fb0b354385812a50da67605398a3c056a7","modified":1493295257696},{"_id":"source/images/blog/step2.png","hash":"4797f5bd95528679a1cdd46593fb6e32309ca5b6","modified":1493295920775},{"_id":"source/images/blog/step3.png","hash":"b897b0e3f5a40af76c4e9f04fcb53ccee15b5daa","modified":1493296877734},{"_id":"themes/next/.git/hooks/applypatch-msg.sample","hash":"86b9655a9ebbde13ac8dd5795eb4d5b539edab0f","modified":1493277181412},{"_id":"themes/next/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1493277181413},{"_id":"themes/next/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1493277181413},{"_id":"themes/next/.git/hooks/pre-applypatch.sample","hash":"42fa41564917b44183a50c4d94bb03e1768ddad8","modified":1493277181414},{"_id":"themes/next/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1493277181415},{"_id":"themes/next/.git/hooks/pre-push.sample","hash":"b4ad74c989616b7395dc6c9fce9871bb1e86dfb5","modified":1493277181415},{"_id":"themes/next/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1493277181415},{"_id":"themes/next/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1493277181416},{"_id":"themes/next/.git/hooks/update.sample","hash":"39355a075977d05708ef74e1b66d09a36e486df1","modified":1493277181416},{"_id":"themes/next/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1493277181417},{"_id":"themes/next/.git/logs/HEAD","hash":"f7d7fc8337a91ceb74d274c640e7dfba0db529df","modified":1497594091326},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1493277405335},{"_id":"themes/next/layout/_custom/header.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1493277405335},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"6d40652784585d263c37b8a3723e43e04b926ca7","modified":1493277405336},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"506feb56e9b1091187d2014742f63a17758df933","modified":1493277405336},{"_id":"themes/next/layout/_macro/post.swig","hash":"61b0f6ebb25ca13f744347c28f644f1ec0ee525f","modified":1497434480087},{"_id":"themes/next/layout/_macro/reward.swig","hash":"b6cb171f0ed227b82b8f7601814af2df93f3a09a","modified":1493277405337},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"e7f58154ac734088372888742e0029ce7c690511","modified":1493277405338},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"c5cc0070ca7c9a8dbd4b09e0398db536c3cdbe8a","modified":1493277405339},{"_id":"themes/next/layout/_partials/comments.swig","hash":"5258c03149aa18e9abfeb8de10e435a406d9c924","modified":1493277405339},{"_id":"themes/next/layout/_partials/footer.swig","hash":"683616f4a80796051e2346d80acf838a589450b0","modified":1493368488650},{"_id":"themes/next/layout/_partials/head.swig","hash":"881556e5387d760d7b67c49f4f3c3ccc2240436b","modified":1493277405340},{"_id":"themes/next/layout/_partials/header.swig","hash":"d6bf1d1554d91eaf1bfc40ba8905ae81673e5f45","modified":1493277405341},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"77c61e0baea3544df361b7338c3cd13dc84dde22","modified":1493277405341},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"1634fb887842698e01ff6e632597fe03c75d2d01","modified":1493277405343},{"_id":"themes/next/layout/_partials/search.swig","hash":"b4ebe4a52a3b51efe549dd1cdee846103664f5eb","modified":1493277405343},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"c0f5a0955f69ca4ed9ee64a2d5f8aa75064935ad","modified":1493277405346},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"931808ad9b8d8390c0dcf9bdeb0954eeb9185d68","modified":1493277405347},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"53c894e6f3573c662dc4e4f7b5a6f1a32f1a8c94","modified":1493277405349},{"_id":"themes/next/layout/_third-party/duoshuo-hot-articles.swig","hash":"ba75672183d94f1de7c8bd0eeee497a58c70e889","modified":1493277405360},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"8301c9600bb3e47f7fb98b0e0332ef3c51bb1688","modified":1493277405360},{"_id":"themes/next/layout/_third-party/mathjax.swig","hash":"a0bd3388587fd943baae0d84ca779a707fbcad89","modified":1493277405361},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"db15d7e1552aa2d2386a6b8a33b3b3a40bf9e43d","modified":1493277405362},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"9a188938d46931d5f3882a140aa1c48b3a893f0c","modified":1493277405362},{"_id":"themes/next/scripts/tags/button.js","hash":"aaf71be6b483fca7a65cd6296c2cf1c2271c26a6","modified":1493277405372},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"99b66949f18398689b904907af23c013be1b978f","modified":1493277405373},{"_id":"themes/next/scripts/tags/exturl.js","hash":"5022c0ba9f1d13192677cf1fd66005c57c3d0f53","modified":1493277405373},{"_id":"themes/next/scripts/tags/full-image.js","hash":"c9f833158c66bd72f627a0559cf96550e867aa72","modified":1493277405374},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"ac681b0d0d8d39ba3817336c0270c6787c2b6b70","modified":1493277405374},{"_id":"themes/next/scripts/tags/note.js","hash":"7dc14db08f2c74f8f1952534b424f220f5c000c6","modified":1493277405375},{"_id":"themes/next/source/css/main.styl","hash":"a91dbb7ef799f0a171b5e726c801139efe545176","modified":1493277405419},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"16505f61f19ba65f629dfd033f14ee9abcf18756","modified":1493277405420},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1493277405420},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1493277405421},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1493277405421},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1493277405422},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1493277405422},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1493277405423},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1493277405423},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1493277405423},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1493277405424},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1493277405424},{"_id":"themes/next/source/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1493277405425},{"_id":"themes/next/source/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1493277405425},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1493277405425},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1493277405348},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1493277405348},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1493277405406},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1493277405406},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1493277405407},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1493277405417},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1493277405418},{"_id":"themes/next/.git/objects/01/f187c58ea1c6d9a844005daae0053a9fcd5e8f","hash":"226db3788eedfaefe87d171de35d74b606048dbe","modified":1497594091312},{"_id":"themes/next/.git/objects/1b/da686f2929e0e08b56154353e016e0c7d070a1","hash":"6fd434fbc1674b2c27f5d686c6ab07157515d394","modified":1494250598907},{"_id":"themes/next/.git/objects/43/37a12b65ad0a130bc9432854a587a264a75dd9","hash":"cef003b92846053ee60908b0816329dd41f8284d","modified":1494250598906},{"_id":"themes/next/.git/objects/62/fd0f53bb9b9d5a515cf8ee700c7fc3fc315d9f","hash":"4f4ac0a0eb4e6f02fbee138887c242ac8abcb86c","modified":1495673319734},{"_id":"themes/next/.git/objects/63/15738bde018c1aac1ea963c4dace185dd72210","hash":"4845593c524cdda998743ac024f657efd82b963c","modified":1495673319645},{"_id":"themes/next/.git/objects/76/affa960edcde6f532c1bd32e688d74f8cebffb","hash":"f9d2b7e1e8f79cd3c797a3219b754ecc4984ccf3","modified":1495673319737},{"_id":"themes/next/.git/objects/7d/39e48209dc7170402db816d4d2800505432191","hash":"d0977fcec4c75ac1a3fb3a55dd48d10c9ba7a816","modified":1497594091221},{"_id":"themes/next/.git/objects/9d/1ded0f59618d6ff4aaa6e3d7d7b8e93dde43cc","hash":"97d67fbedd6645a22c459b7016778f2ee66ec273","modified":1493284392471},{"_id":"themes/next/.git/objects/9f/5ffc95ca1cc059ee3607557908cdac23022290","hash":"da48e981069473ad40994b57825348ba4c6bb725","modified":1497594091225},{"_id":"themes/next/.git/objects/a8/34c5c971516ee8c5d0313fef58f41781d2f04d","hash":"4f24e440e610661424f8af1481234d75787e678d","modified":1494250598834},{"_id":"themes/next/.git/objects/a3/489909dabcfbabf652f6bb0460f1ea85dbdced","hash":"44c59663c3192481ad170deb712ca02f8e9efd67","modified":1493284392378},{"_id":"themes/next/.git/objects/b0/1f4697b21c5203b359e4b18d3291efd472d455","hash":"3862b46b8fd95589d97309b84db88d84d4766fdc","modified":1494250598832},{"_id":"themes/next/.git/objects/b9/c3b6a68b8f6bf538f1a49dea13c331aa20841b","hash":"fe388edfcba27fd89113cd99713a440040a26cdc","modified":1497594091316},{"_id":"themes/next/.git/objects/c0/81bae3a1bdc7a6af51945e6b32dd44dbb680cc","hash":"766fe8d55379cccad6ebb8b3281354c7db888f5e","modified":1494250598910},{"_id":"themes/next/.git/objects/ce/4c78462ee5a13460a3a1e0ba0cb3e5a665912f","hash":"7f1ba4a39ed95cdc8b42cebffedf4d8a62060676","modified":1494250598909},{"_id":"themes/next/.git/objects/cc/ee693bcf1f737edcd588af72ea77bece51e6af","hash":"502a3b7f77aacf1e7bff173696331f248cb431f5","modified":1494250598912},{"_id":"themes/next/.git/objects/dc/8bfa91db460cc8fa4603122bf6ce096b71ad42","hash":"e65b355c382ebcef69c73830120cd8c78b642386","modified":1495673319617},{"_id":"themes/next/.git/objects/f5/0eaca76edc67c44e36417943bfda5cc22e788e","hash":"2fadf9eed0a4f9de34ce18069751c7137da24425","modified":1497594091304},{"_id":"themes/next/.git/objects/f6/abf0df761c03aedd5cf3e7fbb0c8fbd1f8003b","hash":"918665b826ed2cbae6e6a13e59d5627ca95ad128","modified":1494250598905},{"_id":"themes/next/.git/objects/f7/17754dad0c98ef5b95224c42c95e26d6fd0bbe","hash":"d97231cbaba0f45ca429c50ceb7413327144a744","modified":1497594091308},{"_id":"themes/next/.git/objects/f8/7de89e25df13b6f08306c7ac9d0c2ff1ee9969","hash":"f53afd814735cb51227fa1fbe2697f8048077558","modified":1493284392469},{"_id":"themes/next/.git/objects/fc/75ab2e671562c845b8e981b96cbfbae0f9aa26","hash":"b9dc8450967b9a82f133b6900ec6ec1190227cdc","modified":1495673319739},{"_id":"themes/next/.git/refs/heads/master","hash":"6e839b44c008651d9d8fe7e38e7074e2a477653b","modified":1497594091320},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"a223919d2e1bf17ca4d6abb2c86f2efca9883dc1","modified":1493277405341},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"f5e487b0d213ca0bd94aa30bc23b240d65081627","modified":1493277405341},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"a8c7f9ca7c605d039a1f3bf4e4d3183700a3dd62","modified":1493277405343},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"b6e4754498b5eeb470e11fd596227552d9070605","modified":1493277405343},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"b25002a83cbd2ca0c4a5df87ad5bff26477c0457","modified":1493277405344},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"9e3d133ac5bcc6cb51702c83b2611a49811abad1","modified":1493277405344},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"d9e2d9282f9be6e04eae105964abb81e512bffed","modified":1493277405345},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"d4fbffd7fa8f2090eb32a871872665d90a885fac","modified":1493277405346},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"12684840de632eb16e53ffa863166306a756fd4f","modified":1493277405346},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"9b84ab576982b2c3bb0291da49143bc77fba3cc6","modified":1493277405347},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1493277405349},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"71397a5823e8ec8aad3b68aace13150623b3e19d","modified":1493277405350},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"753d262911c27baf663fcaf199267133528656af","modified":1493277405350},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"7b11eac3a0685fa1ab2ab6ecff60afc4f15f0d16","modified":1493277405351},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"a10b7f19d7b5725527514622899df413a34a89db","modified":1493277405351},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"a79e7e0d809fcf407593dd7ed9e023db21c3cbd6","modified":1493277405351},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"b1e13df83fb2b1d5d513b30b7aa6158b0837daab","modified":1493277405352},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"441f1a1b4e2f652d3b975995bd9d44ff4866f057","modified":1493277405353},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"e495aed8fb36bf8015ddbd64366270a7debad2b0","modified":1493277405354},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"e9a0590dafde1046356620dd2b81e83b6b3b0936","modified":1493277405355},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"8a399df90dadba5ad4e781445b58f4765aeb701e","modified":1493277405354},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"f9a1647a8f1866deeb94052d1f87a5df99cb1e70","modified":1493277405355},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"4c501ea0b9c494181eb3c607c5526a5754e7fbd8","modified":1493277405356},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"b83a51bbe0f1e2ded9819070840b0ea145f003a6","modified":1493277405357},{"_id":"themes/next/layout/_third-party/comments/duoshuo.swig","hash":"1600f340e0225361580c44890568dc07dbcf2c89","modified":1493277405357},{"_id":"themes/next/layout/_third-party/comments/gentie.swig","hash":"0f38f053841ef77cdce56a84cfbb4dd4c3329486","modified":1493277405358},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"af7f3e43cbdc4f88c13f101f0f341af96ace3383","modified":1493277405358},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"0399bbdc524ba50930cb6f8e2d5628ff682fc612","modified":1493277405358},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"c75024151fc63220e7d01035d8a1aff9affdecc7","modified":1493277405359},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"de95ec8920d1660680078451008f8bd69f14d082","modified":1493277405360},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"34599633658f3b0ffb487728b7766e1c7b551f5a","modified":1493277405364},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"44ce9fb4f1abfd0770495da423fa3d9cbd900edb","modified":1493277405365},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"fe95dd3d166634c466e19aa756e65ad6e8254d3e","modified":1493277405365},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"d8c98938719284fa06492c114d99a1904652a555","modified":1493277405366},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"8d50d7db0f30c45201f49c4728abfcc1c7840eab","modified":1493367973855},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"a0f23e75a137d8c996c70e2059e0074f1e97a127","modified":1493277405406},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"531934ea21ef4dc9f0978512050f54834f0a6cff","modified":1493277405407},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"e55265c8a8a6ae0c3c08e3509de92ee62c3cb5f6","modified":1493277405417},{"_id":"themes/next/source/css/_variables/base.styl","hash":"dacede1cc110c762e7a5468dc0e34ae1a962d5aa","modified":1493277405418},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"09534b68bd1a708729b3cfffe17737e3af457757","modified":1493277405417},{"_id":"themes/next/source/js/src/affix.js","hash":"1b509c3b5b290a6f4607f0f06461a0c33acb69b1","modified":1493277405426},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"cb431b54ba9c692165a1f5a12e4c564a560f8058","modified":1493277405427},{"_id":"themes/next/source/js/src/exturl.js","hash":"a2a0f0de07e46211f74942a468f42ee270aa555c","modified":1493277405428},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"b35a7dc47b634197b93487cea8671a40a9fdffce","modified":1493277405428},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"0ec035e20d1f26bf553a79877180ba312bea885c","modified":1493277405427},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"1512c751d219577d338ac0780fb2bbd9075d5298","modified":1493277405428},{"_id":"themes/next/source/js/src/motion.js","hash":"ff9ea37d05c269e3a140c4ab448af03efc4bcc76","modified":1493277405429},{"_id":"themes/next/source/js/src/post-details.js","hash":"bfaf52b69aad96566aa21b785973441a2555b4ba","modified":1493277405430},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"02cf91514e41200bc9df5d8bdbeb58575ec06074","modified":1493277405431},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"b7657be25fc52ec67c75ab5481bdcb483573338b","modified":1493277405431},{"_id":"themes/next/source/js/src/utils.js","hash":"092a32149b67a7af271c6c2c45f4c737f64b7e54","modified":1493277405432},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1493277405439},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1493277405443},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","hash":"ef4b2877e37d65025a28eea154b33fe66351493c","modified":1493277405444},{"_id":"themes/next/source/lib/fancybox/.bower.json","hash":"9be892a4e14e0da18ff9cb962c9ef71f163b1b22","modified":1493277405445},{"_id":"themes/next/source/lib/fancybox/.gitattributes","hash":"672d3b5767e0eacd83bb41b188c913f2cf754793","modified":1493277405445},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"bf3eef9d647cd7c9b62feda3bc708c6cdd7c0877","modified":1493277405455},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"68a9b9d53126405b0fa5f3324f1fb96dbcc547aa","modified":1493277405456},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1493277405455},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"a9b3ee1e4db71a0e4ea6d5bed292d176dd68b261","modified":1493277405456},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"b4aefc910578d76b267e86dfffdd5121c8db9aec","modified":1493277405459},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"03ddbf76c1dd1afb93eed0b670d2eee747472ef1","modified":1493277405460},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"c31ff06a740955e44edd4403902e653ccabfd4db","modified":1493277405460},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1493277405460},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"71e7183634dc1b9449f590f15ebd7201add22ca7","modified":1493277405461},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"865d6c1328ab209a4376b9d2b7a7824369565f28","modified":1493277405686},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"90fa628f156d8045357ff11eaf32e61abacf10e8","modified":1493277405692},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4ded6fee668544778e97e38c2b211fc56c848e77","modified":1493277405694},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"b930297cb98b8e1dbd5abe9bc1ed9d5935d18ce8","modified":1493277405696},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"e0acf1db27b0cc16128a59c46db1db406b5c4c58","modified":1493277405698},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"f4a570908f6c89c6edfb1c74959e733eaadea4f2","modified":1493277405699},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"bf773ad48a0b9aa77681a89d7569eefc0f7b7b18","modified":1493277405701},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","hash":"2d9a9f38c493fdf7c0b833bb9184b6a1645c11b2","modified":1493277405705},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","hash":"46a50b91c98b639c9a2b9265c5a1e66a5c656881","modified":1493277405706},{"_id":"themes/next/source/lib/three/three-waves.min.js","hash":"8148492dd49aa876d32bb7d5b728d3f5bf6f5074","modified":1493277405708},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"63da5e80ebb61bb66a2794d5936315ca44231f0c","modified":1493277405721},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"92d92860418c4216aa59eb4cb4a556290a7ad9c3","modified":1493277405722},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"dbbfb50f6502f6b81dcc9fee7b31f1e812da3464","modified":1493277405728},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1493277405727},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1493277405729},{"_id":"themes/next/source/lib/jquery/index.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1493277405690},{"_id":"themes/next/.git/logs/refs/heads/master","hash":"f7d7fc8337a91ceb74d274c640e7dfba0db529df","modified":1497594091322},{"_id":"themes/next/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1493277405294},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"218cc936ba3518a3591b2c9eda46bc701edf7710","modified":1493277405363},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"2530de0f3125a912756f6c0e9090cd012134a4c5","modified":1493277405364},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"4ba6f2a615693b9b5afc266d9c833697016085fd","modified":1493277405376},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"22828f5141c0cecb9ef25a110e194cdfa3a36423","modified":1493277405377},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"1dc2ed435e41ca041f43bd9633d5d95139afbb42","modified":1493277405376},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"ff4489cd582f518bba6909a301ac1292a38b4e96","modified":1493277405377},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"7ad4081466b397e2a6204141bb7768b7c01bd93c","modified":1493277405377},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"88559b13ce94311405b170a0506ded91273beceb","modified":1493277405385},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"6eb4bcc3056bd279d000607e8b4dad50d368ca69","modified":1493277405395},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"12662536c7a07fff548abe94171f34b768dd610f","modified":1493277405402},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"1da5c800d025345f212a3bf1be035060f4e5e6ed","modified":1493277405404},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"4998bedff9c84a09a294b8ef36ede2e3644d3528","modified":1493277405403},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"3f40e8a9fe8e7bd5cfc4cf4cbbbcb9539462e973","modified":1493277405404},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"ea9069645696f86c5df64208490876fe150c8cae","modified":1493277405405},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"c9218b48c56e52c06af9ce3cc8fbdae737cf16fe","modified":1493277405404},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"25d5e45a355ee2093f3b8b8eeac125ebf3905026","modified":1493277405407},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"d0bfd1bef988c76f7d7dd72d88af6f0908a8b0db","modified":1493277405407},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"b1025c421406d2c24cc92a02ae28c1915b01e240","modified":1493277405408},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"26666c1f472bf5f3fb9bc62081cca22b4de15ccb","modified":1493277405408},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"ce272226a1570f5f7c70243b751a5b0fe1671a88","modified":1493277405408},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1493277405409},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9b913b73d31d21f057f97115ffab93cfa578b884","modified":1493277405409},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"31127dcbf4c7b4ada53ffbf1638b5fe325b7cbc0","modified":1493277405411},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"748dbfbf9c08e719ddc775958003c64b00d39dab","modified":1493277405412},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"f23ac53ab901c48859dd29eee6e386b60ff956ba","modified":1493277405413},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1493277405413},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"5dbc0d0c897e46760e5dbee416530d485c747bba","modified":1493277405413},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"416988dca389e6e2fdfa51fa7f4ee07eb53f82fb","modified":1493277405415},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"bce344d3a665b4c55230d2a91eac2ad16d6f32fd","modified":1493277405414},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"4642e30010af8b2b037f5b43146b10a934941958","modified":1493277405415},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"1f6e2ce674735269599acc6d77b3ea18d31967fc","modified":1493277405415},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"86197902dfd3bededba10ba62b8f9f22e0420bde","modified":1493277405416},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"c48d4a561d047b3705924949b3ab7b57bee94ecd","modified":1493277405415},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"c4358416f0a116d7f4037542fa3b385947e80908","modified":1493277405430},{"_id":"themes/next/source/lib/Han/dist/han.min.css","hash":"95518d298d3c5c271faec2e4977df9e5dedd5d84","modified":1493277405437},{"_id":"themes/next/source/lib/Han/dist/han.min.js","hash":"16b03db23a52623348f37c04544f2792032c1fb6","modified":1493277405438},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1493277405446},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1493277405446},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1493277405447},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1493277405447},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1493277405448},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1493277405449},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"d71602cbca33b9ecdb7ab291b7f86a49530f3601","modified":1493277405453},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"82f33ad0842aa9c154d029e0dada2497d4eb1d57","modified":1493277405452},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"ae6318aeb62ad4ce7a7e9a4cdacd93ffb004f0fb","modified":1493277405454},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"1d6aeda0480d0e4cb6198edf7719d601d4ae2ccc","modified":1493277405457},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1493277405458},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"3655f1fdf1e584c4d8e8d39026093ca306a5a341","modified":1493277405462},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"88af80502c44cd52ca81ffe7dc7276b7eccb06cf","modified":1493277405464},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1493277405463},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"a817b6c158cbc5bab3582713de9fe18a18a80552","modified":1493277405720},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"41ea797c68dbcff2f6fb3aba1d1043a22e7cc0f6","modified":1493277405719},{"_id":"themes/next/.git/objects/pack/pack-b2ef2525d3bb22b9284fff93fedf856dd295b399.idx","hash":"0737c19d82d2fdea2af56b29f2bd94678ef9e616","modified":1493277405220},{"_id":"themes/next/source/lib/Han/dist/han.css","hash":"524cfca7b6ab135d81ea723d8de06fdf0dbe7e56","modified":1493277405435},{"_id":"themes/next/source/lib/Han/dist/han.js","hash":"4ac683b2bc8531c84d98f51b86957be0e6f830f3","modified":1493277405437},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1493277405607},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1493277405640},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"4237c6e9d59da349639de20e559e87c2c0218cfd","modified":1493277405726},{"_id":"themes/next/.git/logs/refs/remotes/origin/HEAD","hash":"36a0a74f0705da3889c8b129cfe150951f1639ed","modified":1493277405302},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"4c4ef6e997d0c6e21de39c2daa0c768e12c8c6fa","modified":1493277405379},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d63e0cacc53dd375fcc113465a4328c59ff5f2c1","modified":1493277405380},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"53cde051e0337f4bf42fb8d6d7a79fa3fa6d4ef2","modified":1493277405379},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"1a0d059799a298fe17c49a44298d32cebde93785","modified":1493277405381},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"0656e753f182c9f47fef7304c847b7587a85ef0d","modified":1493277405381},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"1727702eac5d326b5c81a667944a245016668231","modified":1493277405381},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"167986d0f649516671ddf7193eebba7b421cd115","modified":1493277405382},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"b3b783511bbd94af7e941abf8ff411885db7395b","modified":1493277405382},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"7fe4d4d656e86276c17cb4e48a560cb6a4def703","modified":1493277405383},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"104b5c79cd891506e0beaf938b083685f1da8637","modified":1493277405383},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"7fb593f90d74a99c21840679933b9ef6fdc16a61","modified":1493277405384},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"f9760ecf186954cee3ba4a149be334e9ba296b89","modified":1493277405384},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"4e3838d7ac81d9ad133960f0f7ed58a44a015285","modified":1493277405384},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"8cf318644acc8b4978537c263290363e21c7f5af","modified":1493277405385},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"4783f85872bc7e218c1522a5c1c68cd27a5922db","modified":1493277405386},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"a45f5fce643eec4e1b927165229d560364bcace1","modified":1493277405386},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"caf263d1928496688c0e1419801eafd7e6919ce5","modified":1493277405387},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"58f9e6aba94733244a87d2ba5966c5a009486509","modified":1493277405387},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"a200c0a1c5a895ac9dc41e0641a5dfcd766be99b","modified":1493277405387},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"cd9e214e502697f2f2db84eb721bac57a49b0fce","modified":1493277405388},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"3d3e0200716ceb276ac755cc400def9c1b437489","modified":1493277405389},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"8355b0e9375b3245508efda0e18acd069c2aa767","modified":1493277405389},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"27deb3d3a243d30022055dac7dad851024099a8b","modified":1493277405389},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5a982d8ef3b3623ea5f59e63728990f5623c1b57","modified":1493277405390},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"350469437b20ecfd6f3ca45e400478f8e3f71cfb","modified":1493277405390},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"a497ea244df7dd97d1b961412b56f94cc4031e23","modified":1493277405391},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"01567edaea6978628aa5521a122a85434c418bfd","modified":1493277405391},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"7f2bdd6109614d35408ee5ac3335aad4464c69c7","modified":1493277405391},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"761eba9811b050b25d548cc0854de4824b41eb08","modified":1493277405391},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"ac060861b27b764bc4012fc362a25a332df4045a","modified":1493277405392},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"61f8cea3c01acd600e90e1bc2a07def405503748","modified":1493277405392},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"394888efec32749b353292a59ec7f1b609d6325e","modified":1493277405394},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"c9f76d4f6806ef70fa2160c97afa0a0e0ae5373e","modified":1493277405394},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"1153bb71edf253765145559674390e16dd67c633","modified":1493277405392},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"702be9e57dd6ff5fa99642a1f6e3df26215b8805","modified":1493277405395},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"e71652d3216e289c8548b1ea2357822c1476a425","modified":1493277405395},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"a3bdd71237afc112b2aa255f278cab6baeb25351","modified":1493277405396},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"3159b55f35c40bd08e55b00148c523760a708c51","modified":1493277405397},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"2fe76476432b31993338cb45cdb3b29a518b6379","modified":1493277405396},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"2ad1a2a9bbf6742d1b0762c4c623b68113d1e0fe","modified":1493277405397},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"e3ad37f2da35e330616a044621ffa50565a20c88","modified":1493277405398},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"8420b4be386469337243336aee694297875bd439","modified":1493277405397},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"bba4f3bdb7517cd85376df3e1209b570c0548c69","modified":1493277405398},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"5dbeed535d63a50265d96b396a5440f9bb31e4ba","modified":1493277405399},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"a6e7d698702c2e383dde3fde2abde27951679084","modified":1493277405399},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"717cc7f82be9cc151e23a7678601ff2fd3a7fa1d","modified":1493277405399},{"_id":"themes/next/source/css/_common/components/third-party/gentie.styl","hash":"cd526e814f9323a79fe835085d64867d34b3715d","modified":1493277405400},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"10599e16414a8b7a76c4e79e6617b5fe3d4d1adf","modified":1493277405401},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"15975ba7456b96916b1dbac448a1a0d2c38b8f3d","modified":1493277405401},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"16087276945fa038f199692e3eabb1c52b8ea633","modified":1493277405401},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"eb45ee16051624c6e36a274c0a9538e961f10c4d","modified":1493277405402},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"a07aa12cc36ac5c819670c2a3c17d07ed7a08986","modified":1493277405410},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1493277405411},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1493277405414},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1493277405433},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1493277405434},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1493277405434},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1493277405435},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1493277405450},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"6394c48092085788a8c0ef72670b0652006231a1","modified":1493277405450},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"ee948b4489aedeb548a77c9e45d8c7c5732fd62d","modified":1493277405450},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"d22b1629cb23a6181bebb70d0cf653ffe4b835c8","modified":1493277405452},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"51139a4c79573d372a347ef01a493222a1eaf10a","modified":1493277405451},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"b88b589f5f1aa1b3d87cc7eef34c281ff749b1ae","modified":1493277405451},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1493277405466},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1493277405469},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1493277405604},{"_id":"themes/next/source/images/backGround.jpg","hash":"78d006e824390d939869bdf76ad8c458c03bbee1","modified":1493361217274},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"90a1b22129efc172e2dfcceeeb76bff58bc3192f","modified":1493277405441},{"_id":"themes/next/.git/objects/9c/742175d32818a9e0d54b1a6bbf86dd64cd42d8","hash":"02430966cab71698b78f83c7ce57d115c6a8eafa","modified":1494250598810},{"_id":"themes/next/source/lib/three/three.min.js","hash":"26273b1cb4914850a89529b48091dc584f2c57b8","modified":1493277405716},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1493277405473},{"_id":"themes/next/.git/objects/pack/pack-b2ef2525d3bb22b9284fff93fedf856dd295b399.pack","hash":"3a3817636d8bd57f1a9933c3cbcd1002690da18c","modified":1493277405246}],"Category":[{"name":"course","_id":"cj49f0efl0004ssvf5s5gn4eu"},{"name":"SNMP","_id":"cj49f0eg4000bssvfbgq1lv86"},{"name":"Spring","_id":"cj49f0egv000vssvfufrn11dj"}],"Data":[],"Page":[{"title":"简介","date":"2017-04-28T07:16:02.000Z","comments":0,"_content":"2016年毕业于武汉理工，现就职于武汉鼎点视讯\n\n喜欢旅游、冒险，追逐那为之悸动的一景、一情、一人\n\nQQ:785554043\nwechat：13638665425\n","source":"about/index.md","raw":"---\ntitle: 简介\ndate: 2017-04-28 15:16:02\ncomments: false\n---\n2016年毕业于武汉理工，现就职于武汉鼎点视讯\n\n喜欢旅游、冒险，追逐那为之悸动的一景、一情、一人\n\nQQ:785554043\nwechat：13638665425\n","updated":"2017-04-28T07:24:50.915Z","path":"about/index.html","layout":"page","_id":"cj49f0eff0001ssvfmr3jzml2","content":"<p>2016年毕业于武汉理工，现就职于武汉鼎点视讯</p>\n<p>喜欢旅游、冒险，追逐那为之悸动的一景、一情、一人</p>\n<p>QQ:785554043<br>wechat：13638665425</p>\n","site":{"data":{}},"excerpt":"","more":"<p>2016年毕业于武汉理工，现就职于武汉鼎点视讯</p>\n<p>喜欢旅游、冒险，追逐那为之悸动的一景、一情、一人</p>\n<p>QQ:785554043<br>wechat：13638665425</p>\n"},{"title":"分类","date":"2017-04-27T11:13:22.000Z","type":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2017-04-27 19:13:22\ntype: \"categories\"\ncomments: false\n---\n","updated":"2017-04-28T07:50:45.677Z","path":"categories/index.html","layout":"page","_id":"cj49f0efk0003ssvfyib9rfii","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"{\"list\": [{\"arr\": {\"link\": [\"2017-03-01_\\u4e09\\u5206\\u5f52\\u664b.jpg\", \"2017-03-01_\\u5c81\\u6708\\u795e\\u5077.jpg\"], \"text\": [\"\\u4e09\\u5206\\u5f52\\u664b\", \"\\u5c81\\u6708\\u795e\\u5077\"], \"month\": 3, \"type\": [\"image\", \"image\"], \"year\": 2017}, \"date\": \"2017-03\"}, {\"arr\": {\"link\": [\"2017-01-01_2017\\u65b0\\u5e74 (2).jpg\", \"2017-01-01_2017\\u65b0\\u5e74 (3).jpg\", \"2017-01-01_2017\\u65b0\\u5e74 (4).jpg\", \"2017-01-01_2017\\u65b0\\u5e74.jpg\", \"2017-01-01_\\u9ec4\\u660f.jpg\"], \"text\": [\"2017\\u65b0\\u5e74 (2)\", \"2017\\u65b0\\u5e74 (3)\", \"2017\\u65b0\\u5e74 (4)\", \"2017\\u65b0\\u5e74\", \"\\u9ec4\\u660f\"], \"month\": 1, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2017}, \"date\": \"2017-01\"}, {\"arr\": {\"link\": [\"2016-11-03_\\u5915\\u9633\\u65e0\\u9650\\u597d\\uff0c\\u53ea\\u662f\\u8fd1\\u9ec4\\u660f.jpg\"], \"text\": [\"\\u5915\\u9633\\u65e0\\u9650\\u597d\\uff0c\\u53ea\\u662f\\u8fd1\\u9ec4\\u660f\"], \"month\": 11, \"type\": [\"image\"], \"year\": 2016}, \"date\": \"2016-11\"}, {\"arr\": {\"link\": [\"2016-05-01_\\u4e16\\u535a\\u9986.PNG\", \"2016-05-01_\\u5356\\u4e66\\u5566\\uff01.jpg\", \"2016-05-01_\\u6211\\u7684\\u75d5\\u8ff9.jpg\", \"2016-05-01_\\u6f02\\u4eae--\\u4e2d\\u56fd\\u9986.JPG\", \"2016-05-01_\\u6f02\\u4eae.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-2.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-2.JPG\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-\\u70e7\\u70e4-1.jpg\", \"2016-05-01_\\u770b\\uff0c\\u86c7\\uff01.jpg\", \"2016-05-01_\\u968f\\u540e\\u62cd2.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u805a\\u9910\\u770b\\u7535\\u5f71\\u56de\\u6765-2-24\\u665a.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5--\\u8fd8\\u5728\\u6539\\u8bba\\u6587.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5-ktv.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5-\\u7f51\\u5427.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u95f2\\u901b.jpg\"], \"text\": [\"\\u4e16\\u535a\\u9986\", \"\\u5356\\u4e66\\u5566\\uff01\", \"\\u6211\\u7684\\u75d5\\u8ff9\", \"\\u6f02\\u4eae--\\u4e2d\\u56fd\\u9986\", \"\\u6f02\\u4eae\", \"\\u73ed\\u7ea7\\u805a\\u9910-1\", \"\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-1\", \"\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-2\", \"\\u73ed\\u7ea7\\u9732\\u8425-1\", \"\\u73ed\\u7ea7\\u9732\\u8425-2\", \"\\u73ed\\u7ea7\\u9732\\u8425-\\u70e7\\u70e4-1\", \"\\u770b\\uff0c\\u86c7\\uff01\", \"\\u968f\\u540e\\u62cd2\", \"\\u6700\\u540e\\u7684\\u805a\\u9910\\u770b\\u7535\\u5f71\\u56de\\u6765-2-24\\u665a\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5--\\u8fd8\\u5728\\u6539\\u8bba\\u6587\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5-ktv\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5-\\u7f51\\u5427\", \"\\u6700\\u540e\\u7684\\u95f2\\u901b\"], \"month\": 5, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2016}, \"date\": \"2016-05\"}, {\"arr\": {\"link\": [\"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-1.jpg\", \"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-2.jpg\", \"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-3.jpg\", \"2016-04-03_\\u6700\\u540e\\u4e00\\u6b21\\u5347\\u65d7\\u4eea\\u5f0f.jpg\"], \"text\": [\"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-1\", \"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-2\", \"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-3\", \"\\u6700\\u540e\\u4e00\\u6b21\\u5347\\u65d7\\u4eea\\u5f0f\"], \"month\": 4, \"type\": [\"image\", \"image\", \"image\", \"image\"], \"year\": 2016}, \"date\": \"2016-04\"}, {\"arr\": {\"link\": [\"2015-12-01_beautiful\\uff01\\uff01.JPG\"], \"text\": [\"beautiful\\uff01\\uff01\"], \"month\": 12, \"type\": [\"image\"], \"year\": 2015}, \"date\": \"2015-12\"}, {\"arr\": {\"link\": [\"2015-10-01_five floor.jpg\", \"2015-10-01_\\u4e2d\\u79cb--.jpg\", \"2015-10-01_\\u54c8\\u54c8.jpg\", \"2015-10-01_\\u54c8\\u54c82.jpg\", \"2015-10-01_\\u9633\\u5149\\u6b63\\u597d.jpg\", \"2015-10-01_\\u9752\\u6625\\u653e\\u6b4c.jpg\"], \"text\": [\"five floor\", \"\\u4e2d\\u79cb--\", \"\\u54c8\\u54c8\", \"\\u54c8\\u54c82\", \"\\u9633\\u5149\\u6b63\\u597d\", \"\\u9752\\u6625\\u653e\\u6b4c\"], \"month\": 10, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2015}, \"date\": \"2015-10\"}, {\"arr\": {\"link\": [\"2015-05-01_\\u4f53\\u80b2\\u9986\\u4e0a.JPG\", \"2015-05-01_\\u5145\\u5b9e\\u7684\\u4e00\\u5929--\\u4e03\\u591501.jpg\", \"2015-05-01_\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-1.jpg\", \"2015-05-01_\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-2.jpg\", \"2015-05-01_\\u53cd\\u6b63\\u4e0d\\u662f\\u6211\\u8d34\\u7684.jpg\", \"2015-05-01_\\u591a\\u56fe.JPG\", \"2015-05-01_\\u5929\\u6c14\\u4e0d\\u9519--\\u6691\\u5047\\u7559\\u6821\\u671f\\u95f4.JPG\", \"2015-05-01_\\u5b66\\u4f4d\\u6388\\u4e88-1.jpg\", \"2015-05-01_\\u5bbf\\u820d\\u805a\\u9910-1.jpg\", \"2015-05-01_\\u62bd\\u5956\\u4e2d\\u7684\\u2014\\u2014\\u4f4e\\u8c03.jpg\", \"2015-05-01_\\u6f02\\u917f.jpg\", \"2015-05-01_\\u7ae5\\u5e74.jpg\", \"2015-05-01_\\u968f\\u610f\\u62cd.jpg\", \"2015-05-01_\\u968f\\u624b\\u62cd3.jpg\"], \"text\": [\"\\u4f53\\u80b2\\u9986\\u4e0a\", \"\\u5145\\u5b9e\\u7684\\u4e00\\u5929--\\u4e03\\u591501\", \"\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-1\", \"\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-2\", \"\\u53cd\\u6b63\\u4e0d\\u662f\\u6211\\u8d34\\u7684\", \"\\u591a\\u56fe\", \"\\u5929\\u6c14\\u4e0d\\u9519--\\u6691\\u5047\\u7559\\u6821\\u671f\\u95f4\", \"\\u5b66\\u4f4d\\u6388\\u4e88-1\", \"\\u5bbf\\u820d\\u805a\\u9910-1\", \"\\u62bd\\u5956\\u4e2d\\u7684\\u2014\\u2014\\u4f4e\\u8c03\", \"\\u6f02\\u917f\", \"\\u7ae5\\u5e74\", \"\\u968f\\u610f\\u62cd\", \"\\u968f\\u624b\\u62cd3\"], \"month\": 5, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2015}, \"date\": \"2015-05\"}]}","source":"photos/data.json","raw":"{\"list\": [{\"arr\": {\"link\": [\"2017-03-01_\\u4e09\\u5206\\u5f52\\u664b.jpg\", \"2017-03-01_\\u5c81\\u6708\\u795e\\u5077.jpg\"], \"text\": [\"\\u4e09\\u5206\\u5f52\\u664b\", \"\\u5c81\\u6708\\u795e\\u5077\"], \"month\": 3, \"type\": [\"image\", \"image\"], \"year\": 2017}, \"date\": \"2017-03\"}, {\"arr\": {\"link\": [\"2017-01-01_2017\\u65b0\\u5e74 (2).jpg\", \"2017-01-01_2017\\u65b0\\u5e74 (3).jpg\", \"2017-01-01_2017\\u65b0\\u5e74 (4).jpg\", \"2017-01-01_2017\\u65b0\\u5e74.jpg\", \"2017-01-01_\\u9ec4\\u660f.jpg\"], \"text\": [\"2017\\u65b0\\u5e74 (2)\", \"2017\\u65b0\\u5e74 (3)\", \"2017\\u65b0\\u5e74 (4)\", \"2017\\u65b0\\u5e74\", \"\\u9ec4\\u660f\"], \"month\": 1, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2017}, \"date\": \"2017-01\"}, {\"arr\": {\"link\": [\"2016-11-03_\\u5915\\u9633\\u65e0\\u9650\\u597d\\uff0c\\u53ea\\u662f\\u8fd1\\u9ec4\\u660f.jpg\"], \"text\": [\"\\u5915\\u9633\\u65e0\\u9650\\u597d\\uff0c\\u53ea\\u662f\\u8fd1\\u9ec4\\u660f\"], \"month\": 11, \"type\": [\"image\"], \"year\": 2016}, \"date\": \"2016-11\"}, {\"arr\": {\"link\": [\"2016-05-01_\\u4e16\\u535a\\u9986.PNG\", \"2016-05-01_\\u5356\\u4e66\\u5566\\uff01.jpg\", \"2016-05-01_\\u6211\\u7684\\u75d5\\u8ff9.jpg\", \"2016-05-01_\\u6f02\\u4eae--\\u4e2d\\u56fd\\u9986.JPG\", \"2016-05-01_\\u6f02\\u4eae.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-2.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-2.JPG\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-\\u70e7\\u70e4-1.jpg\", \"2016-05-01_\\u770b\\uff0c\\u86c7\\uff01.jpg\", \"2016-05-01_\\u968f\\u540e\\u62cd2.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u805a\\u9910\\u770b\\u7535\\u5f71\\u56de\\u6765-2-24\\u665a.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5--\\u8fd8\\u5728\\u6539\\u8bba\\u6587.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5-ktv.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5-\\u7f51\\u5427.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u95f2\\u901b.jpg\"], \"text\": [\"\\u4e16\\u535a\\u9986\", \"\\u5356\\u4e66\\u5566\\uff01\", \"\\u6211\\u7684\\u75d5\\u8ff9\", \"\\u6f02\\u4eae--\\u4e2d\\u56fd\\u9986\", \"\\u6f02\\u4eae\", \"\\u73ed\\u7ea7\\u805a\\u9910-1\", \"\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-1\", \"\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-2\", \"\\u73ed\\u7ea7\\u9732\\u8425-1\", \"\\u73ed\\u7ea7\\u9732\\u8425-2\", \"\\u73ed\\u7ea7\\u9732\\u8425-\\u70e7\\u70e4-1\", \"\\u770b\\uff0c\\u86c7\\uff01\", \"\\u968f\\u540e\\u62cd2\", \"\\u6700\\u540e\\u7684\\u805a\\u9910\\u770b\\u7535\\u5f71\\u56de\\u6765-2-24\\u665a\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5--\\u8fd8\\u5728\\u6539\\u8bba\\u6587\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5-ktv\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5-\\u7f51\\u5427\", \"\\u6700\\u540e\\u7684\\u95f2\\u901b\"], \"month\": 5, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2016}, \"date\": \"2016-05\"}, {\"arr\": {\"link\": [\"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-1.jpg\", \"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-2.jpg\", \"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-3.jpg\", \"2016-04-03_\\u6700\\u540e\\u4e00\\u6b21\\u5347\\u65d7\\u4eea\\u5f0f.jpg\"], \"text\": [\"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-1\", \"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-2\", \"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-3\", \"\\u6700\\u540e\\u4e00\\u6b21\\u5347\\u65d7\\u4eea\\u5f0f\"], \"month\": 4, \"type\": [\"image\", \"image\", \"image\", \"image\"], \"year\": 2016}, \"date\": \"2016-04\"}, {\"arr\": {\"link\": [\"2015-12-01_beautiful\\uff01\\uff01.JPG\"], \"text\": [\"beautiful\\uff01\\uff01\"], \"month\": 12, \"type\": [\"image\"], \"year\": 2015}, \"date\": \"2015-12\"}, {\"arr\": {\"link\": [\"2015-10-01_five floor.jpg\", \"2015-10-01_\\u4e2d\\u79cb--.jpg\", \"2015-10-01_\\u54c8\\u54c8.jpg\", \"2015-10-01_\\u54c8\\u54c82.jpg\", \"2015-10-01_\\u9633\\u5149\\u6b63\\u597d.jpg\", \"2015-10-01_\\u9752\\u6625\\u653e\\u6b4c.jpg\"], \"text\": [\"five floor\", \"\\u4e2d\\u79cb--\", \"\\u54c8\\u54c8\", \"\\u54c8\\u54c82\", \"\\u9633\\u5149\\u6b63\\u597d\", \"\\u9752\\u6625\\u653e\\u6b4c\"], \"month\": 10, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2015}, \"date\": \"2015-10\"}, {\"arr\": {\"link\": [\"2015-05-01_\\u4f53\\u80b2\\u9986\\u4e0a.JPG\", \"2015-05-01_\\u5145\\u5b9e\\u7684\\u4e00\\u5929--\\u4e03\\u591501.jpg\", \"2015-05-01_\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-1.jpg\", \"2015-05-01_\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-2.jpg\", \"2015-05-01_\\u53cd\\u6b63\\u4e0d\\u662f\\u6211\\u8d34\\u7684.jpg\", \"2015-05-01_\\u591a\\u56fe.JPG\", \"2015-05-01_\\u5929\\u6c14\\u4e0d\\u9519--\\u6691\\u5047\\u7559\\u6821\\u671f\\u95f4.JPG\", \"2015-05-01_\\u5b66\\u4f4d\\u6388\\u4e88-1.jpg\", \"2015-05-01_\\u5bbf\\u820d\\u805a\\u9910-1.jpg\", \"2015-05-01_\\u62bd\\u5956\\u4e2d\\u7684\\u2014\\u2014\\u4f4e\\u8c03.jpg\", \"2015-05-01_\\u6f02\\u917f.jpg\", \"2015-05-01_\\u7ae5\\u5e74.jpg\", \"2015-05-01_\\u968f\\u610f\\u62cd.jpg\", \"2015-05-01_\\u968f\\u624b\\u62cd3.jpg\"], \"text\": [\"\\u4f53\\u80b2\\u9986\\u4e0a\", \"\\u5145\\u5b9e\\u7684\\u4e00\\u5929--\\u4e03\\u591501\", \"\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-1\", \"\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-2\", \"\\u53cd\\u6b63\\u4e0d\\u662f\\u6211\\u8d34\\u7684\", \"\\u591a\\u56fe\", \"\\u5929\\u6c14\\u4e0d\\u9519--\\u6691\\u5047\\u7559\\u6821\\u671f\\u95f4\", \"\\u5b66\\u4f4d\\u6388\\u4e88-1\", \"\\u5bbf\\u820d\\u805a\\u9910-1\", \"\\u62bd\\u5956\\u4e2d\\u7684\\u2014\\u2014\\u4f4e\\u8c03\", \"\\u6f02\\u917f\", \"\\u7ae5\\u5e74\", \"\\u968f\\u610f\\u62cd\", \"\\u968f\\u624b\\u62cd3\"], \"month\": 5, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2015}, \"date\": \"2015-05\"}]}","date":"2017-05-19T12:24:21.376Z","updated":"2017-05-19T12:24:21.376Z","path":"photos/data.json","layout":"false","title":"","comments":1,"_id":"cj49f0efw0007ssvfubqpifiv","content":"{\"list\":[{\"arr\":{\"link\":[\"2017-03-01_三分归晋.jpg\",\"2017-03-01_岁月神偷.jpg\"],\"text\":[\"三分归晋\",\"岁月神偷\"],\"month\":3,\"type\":[\"image\",\"image\"],\"year\":2017},\"date\":\"2017-03\"},{\"arr\":{\"link\":[\"2017-01-01_2017新年 (2).jpg\",\"2017-01-01_2017新年 (3).jpg\",\"2017-01-01_2017新年 (4).jpg\",\"2017-01-01_2017新年.jpg\",\"2017-01-01_黄昏.jpg\"],\"text\":[\"2017新年 (2)\",\"2017新年 (3)\",\"2017新年 (4)\",\"2017新年\",\"黄昏\"],\"month\":1,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2017},\"date\":\"2017-01\"},{\"arr\":{\"link\":[\"2016-11-03_夕阳无限好，只是近黄昏.jpg\"],\"text\":[\"夕阳无限好，只是近黄昏\"],\"month\":11,\"type\":[\"image\"],\"year\":2016},\"date\":\"2016-11\"},{\"arr\":{\"link\":[\"2016-05-01_世博馆.PNG\",\"2016-05-01_卖书啦！.jpg\",\"2016-05-01_我的痕迹.jpg\",\"2016-05-01_漂亮--中国馆.JPG\",\"2016-05-01_漂亮.jpg\",\"2016-05-01_班级聚餐-1.jpg\",\"2016-05-01_班级聚餐-孔明灯-1.jpg\",\"2016-05-01_班级聚餐-孔明灯-2.jpg\",\"2016-05-01_班级露营-1.jpg\",\"2016-05-01_班级露营-2.JPG\",\"2016-05-01_班级露营-烧烤-1.jpg\",\"2016-05-01_看，蛇！.jpg\",\"2016-05-01_随后拍2.jpg\",\"2016-05-10_最后的聚餐看电影回来-2-24晚.jpg\",\"2016-05-10_最后的通宵--还在改论文.jpg\",\"2016-05-10_最后的通宵-ktv.jpg\",\"2016-05-10_最后的通宵-网吧.jpg\",\"2016-05-10_最后的闲逛.jpg\"],\"text\":[\"世博馆\",\"卖书啦！\",\"我的痕迹\",\"漂亮--中国馆\",\"漂亮\",\"班级聚餐-1\",\"班级聚餐-孔明灯-1\",\"班级聚餐-孔明灯-2\",\"班级露营-1\",\"班级露营-2\",\"班级露营-烧烤-1\",\"看，蛇！\",\"随后拍2\",\"最后的聚餐看电影回来-2-24晚\",\"最后的通宵--还在改论文\",\"最后的通宵-ktv\",\"最后的通宵-网吧\",\"最后的闲逛\"],\"month\":5,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2016},\"date\":\"2016-05\"},{\"arr\":{\"link\":[\"2016-04-01_毕业生晚会-1.jpg\",\"2016-04-01_毕业生晚会-2.jpg\",\"2016-04-01_毕业生晚会-3.jpg\",\"2016-04-03_最后一次升旗仪式.jpg\"],\"text\":[\"毕业生晚会-1\",\"毕业生晚会-2\",\"毕业生晚会-3\",\"最后一次升旗仪式\"],\"month\":4,\"type\":[\"image\",\"image\",\"image\",\"image\"],\"year\":2016},\"date\":\"2016-04\"},{\"arr\":{\"link\":[\"2015-12-01_beautiful！！.JPG\"],\"text\":[\"beautiful！！\"],\"month\":12,\"type\":[\"image\"],\"year\":2015},\"date\":\"2015-12\"},{\"arr\":{\"link\":[\"2015-10-01_five floor.jpg\",\"2015-10-01_中秋--.jpg\",\"2015-10-01_哈哈.jpg\",\"2015-10-01_哈哈2.jpg\",\"2015-10-01_阳光正好.jpg\",\"2015-10-01_青春放歌.jpg\"],\"text\":[\"five floor\",\"中秋--\",\"哈哈\",\"哈哈2\",\"阳光正好\",\"青春放歌\"],\"month\":10,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2015},\"date\":\"2015-10\"},{\"arr\":{\"link\":[\"2015-05-01_体育馆上.JPG\",\"2015-05-01_充实的一天--七夕01.jpg\",\"2015-05-01_再来一次图书馆-1.jpg\",\"2015-05-01_再来一次图书馆-2.jpg\",\"2015-05-01_反正不是我贴的.jpg\",\"2015-05-01_多图.JPG\",\"2015-05-01_天气不错--暑假留校期间.JPG\",\"2015-05-01_学位授予-1.jpg\",\"2015-05-01_宿舍聚餐-1.jpg\",\"2015-05-01_抽奖中的——低调.jpg\",\"2015-05-01_漂酿.jpg\",\"2015-05-01_童年.jpg\",\"2015-05-01_随意拍.jpg\",\"2015-05-01_随手拍3.jpg\"],\"text\":[\"体育馆上\",\"充实的一天--七夕01\",\"再来一次图书馆-1\",\"再来一次图书馆-2\",\"反正不是我贴的\",\"多图\",\"天气不错--暑假留校期间\",\"学位授予-1\",\"宿舍聚餐-1\",\"抽奖中的——低调\",\"漂酿\",\"童年\",\"随意拍\",\"随手拍3\"],\"month\":5,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2015},\"date\":\"2015-05\"}]}","site":{"data":{}},"excerpt":"","more":"{\"list\":[{\"arr\":{\"link\":[\"2017-03-01_三分归晋.jpg\",\"2017-03-01_岁月神偷.jpg\"],\"text\":[\"三分归晋\",\"岁月神偷\"],\"month\":3,\"type\":[\"image\",\"image\"],\"year\":2017},\"date\":\"2017-03\"},{\"arr\":{\"link\":[\"2017-01-01_2017新年 (2).jpg\",\"2017-01-01_2017新年 (3).jpg\",\"2017-01-01_2017新年 (4).jpg\",\"2017-01-01_2017新年.jpg\",\"2017-01-01_黄昏.jpg\"],\"text\":[\"2017新年 (2)\",\"2017新年 (3)\",\"2017新年 (4)\",\"2017新年\",\"黄昏\"],\"month\":1,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2017},\"date\":\"2017-01\"},{\"arr\":{\"link\":[\"2016-11-03_夕阳无限好，只是近黄昏.jpg\"],\"text\":[\"夕阳无限好，只是近黄昏\"],\"month\":11,\"type\":[\"image\"],\"year\":2016},\"date\":\"2016-11\"},{\"arr\":{\"link\":[\"2016-05-01_世博馆.PNG\",\"2016-05-01_卖书啦！.jpg\",\"2016-05-01_我的痕迹.jpg\",\"2016-05-01_漂亮--中国馆.JPG\",\"2016-05-01_漂亮.jpg\",\"2016-05-01_班级聚餐-1.jpg\",\"2016-05-01_班级聚餐-孔明灯-1.jpg\",\"2016-05-01_班级聚餐-孔明灯-2.jpg\",\"2016-05-01_班级露营-1.jpg\",\"2016-05-01_班级露营-2.JPG\",\"2016-05-01_班级露营-烧烤-1.jpg\",\"2016-05-01_看，蛇！.jpg\",\"2016-05-01_随后拍2.jpg\",\"2016-05-10_最后的聚餐看电影回来-2-24晚.jpg\",\"2016-05-10_最后的通宵--还在改论文.jpg\",\"2016-05-10_最后的通宵-ktv.jpg\",\"2016-05-10_最后的通宵-网吧.jpg\",\"2016-05-10_最后的闲逛.jpg\"],\"text\":[\"世博馆\",\"卖书啦！\",\"我的痕迹\",\"漂亮--中国馆\",\"漂亮\",\"班级聚餐-1\",\"班级聚餐-孔明灯-1\",\"班级聚餐-孔明灯-2\",\"班级露营-1\",\"班级露营-2\",\"班级露营-烧烤-1\",\"看，蛇！\",\"随后拍2\",\"最后的聚餐看电影回来-2-24晚\",\"最后的通宵--还在改论文\",\"最后的通宵-ktv\",\"最后的通宵-网吧\",\"最后的闲逛\"],\"month\":5,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2016},\"date\":\"2016-05\"},{\"arr\":{\"link\":[\"2016-04-01_毕业生晚会-1.jpg\",\"2016-04-01_毕业生晚会-2.jpg\",\"2016-04-01_毕业生晚会-3.jpg\",\"2016-04-03_最后一次升旗仪式.jpg\"],\"text\":[\"毕业生晚会-1\",\"毕业生晚会-2\",\"毕业生晚会-3\",\"最后一次升旗仪式\"],\"month\":4,\"type\":[\"image\",\"image\",\"image\",\"image\"],\"year\":2016},\"date\":\"2016-04\"},{\"arr\":{\"link\":[\"2015-12-01_beautiful！！.JPG\"],\"text\":[\"beautiful！！\"],\"month\":12,\"type\":[\"image\"],\"year\":2015},\"date\":\"2015-12\"},{\"arr\":{\"link\":[\"2015-10-01_five floor.jpg\",\"2015-10-01_中秋--.jpg\",\"2015-10-01_哈哈.jpg\",\"2015-10-01_哈哈2.jpg\",\"2015-10-01_阳光正好.jpg\",\"2015-10-01_青春放歌.jpg\"],\"text\":[\"five floor\",\"中秋--\",\"哈哈\",\"哈哈2\",\"阳光正好\",\"青春放歌\"],\"month\":10,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2015},\"date\":\"2015-10\"},{\"arr\":{\"link\":[\"2015-05-01_体育馆上.JPG\",\"2015-05-01_充实的一天--七夕01.jpg\",\"2015-05-01_再来一次图书馆-1.jpg\",\"2015-05-01_再来一次图书馆-2.jpg\",\"2015-05-01_反正不是我贴的.jpg\",\"2015-05-01_多图.JPG\",\"2015-05-01_天气不错--暑假留校期间.JPG\",\"2015-05-01_学位授予-1.jpg\",\"2015-05-01_宿舍聚餐-1.jpg\",\"2015-05-01_抽奖中的——低调.jpg\",\"2015-05-01_漂酿.jpg\",\"2015-05-01_童年.jpg\",\"2015-05-01_随意拍.jpg\",\"2015-05-01_随手拍3.jpg\"],\"text\":[\"体育馆上\",\"充实的一天--七夕01\",\"再来一次图书馆-1\",\"再来一次图书馆-2\",\"反正不是我贴的\",\"多图\",\"天气不错--暑假留校期间\",\"学位授予-1\",\"宿舍聚餐-1\",\"抽奖中的——低调\",\"漂酿\",\"童年\",\"随意拍\",\"随手拍3\"],\"month\":5,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2015},\"date\":\"2015-05\"}]}"},{"layout":"post","slug":"photos","title":"����","noDate":"true","comments":0,"_content":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">Photos</a>\n\t<a class=\"photos-btn\" href=\"#\">����</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/lawlitewang20/\" target=\"_blank\" class=\"open-ins\">ͼƬ���ڼ����С�</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>","source":"photos/index.ejs","raw":"---\nlayout: post\nslug: \"photos\"\ntitle: \"����\"\nnoDate: \"true\"\ncomments: \"false\"\n---\n<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">Photos</a>\n\t<a class=\"photos-btn\" href=\"#\">����</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/lawlitewang20/\" target=\"_blank\" class=\"open-ins\">ͼƬ���ڼ����С�</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>","date":"2017-05-19T12:25:22.195Z","updated":"2017-05-19T12:25:22.195Z","path":"photos/index.html","_id":"cj49f0eg20009ssvfch1lsubc","content":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\" target=\"_blank\" rel=\"external\">Photos</a>\n\t<a class=\"photos-btn\" href=\"#\">����</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/lawlitewang20/\" target=\"_blank\" class=\"open-ins\">ͼƬ���ڼ����С�</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>","site":{"data":{}},"excerpt":"","more":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\" target=\"_blank\" rel=\"external\">Photos</a>\n\t<a class=\"photos-btn\" href=\"#\">����</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/lawlitewang20/\" target=\"_blank\" class=\"open-ins\">ͼƬ���ڼ����С�</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>"},{"title":"photos","date":"2017-05-19T11:22:20.000Z","type":"photos","_content":"","source":"photos/index.md","raw":"---\ntitle: photos\ndate: 2017-05-19 19:22:20\ntype: photos\n---\n","updated":"2017-05-19T11:38:28.865Z","path":"photos/index.html","comments":1,"layout":"page","_id":"cj49f0eg5000dssvf8e2maodp","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0; \n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n\toutline: 1px solid #ddd;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}","source":"photos/ins.css","raw":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0; \n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n\toutline: 1px solid #ddd;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}","date":"2017-05-19T12:27:09.599Z","updated":"2017-05-19T12:27:09.599Z","path":"photos/ins.css","layout":"false","title":"","comments":1,"_id":"cj49f0enx002cssvfct6h7hzy","content":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0; \n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n\toutline: 1px solid #ddd;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}","site":{"data":{}},"excerpt":"","more":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0; \n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n\toutline: 1px solid #ddd;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}"},{"_content":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description ������Ŀ���ҷ����¸���\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'https://raw.githubusercontent.com/lawlite19/blog-back-up/master/min_photos/' + data.link[i];\n          var src = 'https://raw.githubusercontent.com/lawlite19/blog-back-up/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '��<em>' + data.month + '��</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","source":"photos/ins.js","raw":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description ������Ŀ���ҷ����¸���\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'https://raw.githubusercontent.com/lawlite19/blog-back-up/master/min_photos/' + data.link[i];\n          var src = 'https://raw.githubusercontent.com/lawlite19/blog-back-up/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '��<em>' + data.month + '��</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","date":"2017-05-19T12:27:51.677Z","updated":"2017-05-19T12:27:51.677Z","path":"photos/ins.js","layout":"false","title":"","comments":1,"_id":"cj49f0eny002dssvfy1cpdbrr","content":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description ������Ŀ���ҷ����¸���\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'https://raw.githubusercontent.com/lawlite19/blog-back-up/master/min_photos/' + data.link[i];\n          var src = 'https://raw.githubusercontent.com/lawlite19/blog-back-up/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '��<em>' + data.month + '��</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","site":{"data":{}},"excerpt":"","more":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description ������Ŀ���ҷ����¸���\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'https://raw.githubusercontent.com/lawlite19/blog-back-up/master/min_photos/' + data.link[i];\n          var src = 'https://raw.githubusercontent.com/lawlite19/blog-back-up/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '��<em>' + data.month + '��</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);"},{"title":"标签","date":"2017-04-27T11:11:27.000Z","type":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2017-04-27 19:11:27\ntype: \"tags\"\ncomments: false\n---\n","updated":"2017-04-28T07:51:00.404Z","path":"tags/index.html","layout":"page","_id":"cj49f0eoa002essvfgptb3lhr","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"/*!\n * An jQuery | zepto plugin for lazy loading images.\n * author -> jieyou\n * see https://github.com/jieyou/lazyload\n * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD)\n * use component's throttle https://github.com/component/throttle (MIT)\n */\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?(\"innerHeight\"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e<=a.offset().top-b.threshold}function i(b,e){var f;return f=e._$container==d?d.width()+(a.fn.scrollLeft?d.scrollLeft():c.pageXOffset):e._$container.offset().left+e._$container.width(),f<=b.offset().left-e.threshold}function j(a,b){var c;return c=b._$container==d?d.scrollTop():b._$container.offset().top,c>=a.offset().top+b.threshold+a.height()}function k(b,e){var f;return f=e._$container==d?a.fn.scrollLeft?d.scrollLeft():c.pageXOffset:e._$container.offset().left,f>=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger(\"_lazyload_appear\"),c=0}var f=a.eq(d);if(!(f.width()<=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else if(h(f,b)){if(++c>b.failure_limit)return!1}else g();else if(j(f,b)||k(f,b));else if(h(f,b)||i(f,b)){if(++c>b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",effect_params:null,container:c,data_attribute:\"original\",data_srcset_attribute:\"original-srcset\",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",placeholder_real_img:\"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png\"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace(\"[object \",\"\").replace(\"]\",\"\")}}(),a.fn.hasOwnProperty(\"lazyload\")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,[\"threshold\",\"failure_limit\",\"check_appear_throttle_time\"])?\"String\"==i?b[g]=parseInt(b[g],10):\"Number\"!=i&&(b[g]=h):\"container\"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i=\"scroll\"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||\"scrollstart\"==b.event||\"scrollstop\"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr(\"src\"),k=f.attr(\"data-\"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr(\"data-\"+b.data_srcset_attribute),o=f.is(\"img\");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one(\"error\",function(){f.attr(\"src\",b.placeholder_real_img)}).attr(\"src\",b.placeholder_data_img),f.one(\"_lazyload_appear\",function(){function i(){d&&f.hide(),o?(n&&f.attr(\"srcset\",n),l&&f.attr(\"src\",l)):f.css(\"background-image\",'url(\"'+l+'\")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d=\"show\"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one(\"load\",function(){b.load.call(e,f,h.length,b)}),i()):a(\"<img />\").one(\"load\",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr(\"src\",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger(\"_lazyload_appear\")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on(\"resize load\",function(){k(h,b)}),a(function(){k(h,b)}),this})});\n","source":"photos/lazyload.min.js","raw":"/*!\n * An jQuery | zepto plugin for lazy loading images.\n * author -> jieyou\n * see https://github.com/jieyou/lazyload\n * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD)\n * use component's throttle https://github.com/component/throttle (MIT)\n */\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?(\"innerHeight\"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e<=a.offset().top-b.threshold}function i(b,e){var f;return f=e._$container==d?d.width()+(a.fn.scrollLeft?d.scrollLeft():c.pageXOffset):e._$container.offset().left+e._$container.width(),f<=b.offset().left-e.threshold}function j(a,b){var c;return c=b._$container==d?d.scrollTop():b._$container.offset().top,c>=a.offset().top+b.threshold+a.height()}function k(b,e){var f;return f=e._$container==d?a.fn.scrollLeft?d.scrollLeft():c.pageXOffset:e._$container.offset().left,f>=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger(\"_lazyload_appear\"),c=0}var f=a.eq(d);if(!(f.width()<=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else if(h(f,b)){if(++c>b.failure_limit)return!1}else g();else if(j(f,b)||k(f,b));else if(h(f,b)||i(f,b)){if(++c>b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",effect_params:null,container:c,data_attribute:\"original\",data_srcset_attribute:\"original-srcset\",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",placeholder_real_img:\"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png\"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace(\"[object \",\"\").replace(\"]\",\"\")}}(),a.fn.hasOwnProperty(\"lazyload\")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,[\"threshold\",\"failure_limit\",\"check_appear_throttle_time\"])?\"String\"==i?b[g]=parseInt(b[g],10):\"Number\"!=i&&(b[g]=h):\"container\"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i=\"scroll\"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||\"scrollstart\"==b.event||\"scrollstop\"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr(\"src\"),k=f.attr(\"data-\"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr(\"data-\"+b.data_srcset_attribute),o=f.is(\"img\");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one(\"error\",function(){f.attr(\"src\",b.placeholder_real_img)}).attr(\"src\",b.placeholder_data_img),f.one(\"_lazyload_appear\",function(){function i(){d&&f.hide(),o?(n&&f.attr(\"srcset\",n),l&&f.attr(\"src\",l)):f.css(\"background-image\",'url(\"'+l+'\")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d=\"show\"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one(\"load\",function(){b.load.call(e,f,h.length,b)}),i()):a(\"<img />\").one(\"load\",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr(\"src\",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger(\"_lazyload_appear\")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on(\"resize load\",function(){k(h,b)}),a(function(){k(h,b)}),this})});\n","date":"2017-05-19T12:30:41.785Z","updated":"2017-05-19T12:30:41.785Z","path":"photos/lazyload.min.js","layout":"false","title":"","comments":1,"_id":"cj49f0eob002fssvf49m3t36n","content":"/*!\n * An jQuery | zepto plugin for lazy loading images.\n * author -> jieyou\n * see https://github.com/jieyou/lazyload\n * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD)\n * use component's throttle https://github.com/component/throttle (MIT)\n */\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?(\"innerHeight\"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e<=a.offset().top-b.threshold}function i(b,e){var=\"\" f;return=\"\" f=\"e._$container==d?d.width()+(a.fn.scrollLeft?d.scrollLeft():c.pageXOffset):e._$container.offset().left+e._$container.width(),f<=b.offset().left-e.threshold}function\" j(a,b){var=\"\" c;return=\"\" c=\"b._$container==d?d.scrollTop():b._$container.offset().top,c\">=a.offset().top+b.threshold+a.height()}function k(b,e){var f;return f=e._$container==d?a.fn.scrollLeft?d.scrollLeft():c.pageXOffset:e._$container.offset().left,f>=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger(\"_lazyload_appear\"),c=0}var f=a.eq(d);if(!(f.width()<=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else if(h(f,b)){if(++c=\"\">b.failure_limit)return!1}else g();else if(j(f,b)||k(f,b));else if(h(f,b)||i(f,b)){if(++c>b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",effect_params:null,container:c,data_attribute:\"original\",data_srcset_attribute:\"original-srcset\",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",placeholder_real_img:\"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png\"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace(\"[object \",\"\").replace(\"]\",\"\")}}(),a.fn.hasOwnProperty(\"lazyload\")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,[\"threshold\",\"failure_limit\",\"check_appear_throttle_time\"])?\"String\"==i?b[g]=parseInt(b[g],10):\"Number\"!=i&&(b[g]=h):\"container\"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i=\"scroll\"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||\"scrollstart\"==b.event||\"scrollstop\"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr(\"src\"),k=f.attr(\"data-\"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr(\"data-\"+b.data_srcset_attribute),o=f.is(\"img\");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one(\"error\",function(){f.attr(\"src\",b.placeholder_real_img)}).attr(\"src\",b.placeholder_data_img),f.one(\"_lazyload_appear\",function(){function i(){d&&f.hide(),o?(n&&f.attr(\"srcset\",n),l&&f.attr(\"src\",l)):f.css(\"background-image\",'url(\"'+l+'\")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d=\"show\"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one(\"load\",function(){b.load.call(e,f,h.length,b)}),i()):a(\"<img>\").one(\"load\",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr(\"src\",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger(\"_lazyload_appear\")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on(\"resize load\",function(){k(h,b)}),a(function(){k(h,b)}),this})});\n</=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else></=a.offset().top-b.threshold}function>","site":{"data":{}},"excerpt":"","more":"/*!\n * An jQuery | zepto plugin for lazy loading images.\n * author -> jieyou\n * see https://github.com/jieyou/lazyload\n * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD)\n * use component's throttle https://github.com/component/throttle (MIT)\n */\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?(\"innerHeight\"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e<=a.offset().top-b.threshold}function i(b,e){var=\"\" f;return=\"\" f=\"e._$container==d?d.width()+(a.fn.scrollLeft?d.scrollLeft():c.pageXOffset):e._$container.offset().left+e._$container.width(),f<=b.offset().left-e.threshold}function\" j(a,b){var=\"\" c;return=\"\" c=\"b._$container==d?d.scrollTop():b._$container.offset().top,c\">=a.offset().top+b.threshold+a.height()}function k(b,e){var f;return f=e._$container==d?a.fn.scrollLeft?d.scrollLeft():c.pageXOffset:e._$container.offset().left,f>=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger(\"_lazyload_appear\"),c=0}var f=a.eq(d);if(!(f.width()<=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else if(h(f,b)){if(++c=\"\">b.failure_limit)return!1}else g();else if(j(f,b)||k(f,b));else if(h(f,b)||i(f,b)){if(++c>b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",effect_params:null,container:c,data_attribute:\"original\",data_srcset_attribute:\"original-srcset\",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",placeholder_real_img:\"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png\"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace(\"[object \",\"\").replace(\"]\",\"\")}}(),a.fn.hasOwnProperty(\"lazyload\")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,[\"threshold\",\"failure_limit\",\"check_appear_throttle_time\"])?\"String\"==i?b[g]=parseInt(b[g],10):\"Number\"!=i&&(b[g]=h):\"container\"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i=\"scroll\"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||\"scrollstart\"==b.event||\"scrollstop\"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr(\"src\"),k=f.attr(\"data-\"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr(\"data-\"+b.data_srcset_attribute),o=f.is(\"img\");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one(\"error\",function(){f.attr(\"src\",b.placeholder_real_img)}).attr(\"src\",b.placeholder_data_img),f.one(\"_lazyload_appear\",function(){function i(){d&&f.hide(),o?(n&&f.attr(\"srcset\",n),l&&f.attr(\"src\",l)):f.css(\"background-image\",'url(\"'+l+'\")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d=\"show\"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one(\"load\",function(){b.load.call(e,f,h.length,b)}),i()):a(\"<img>\").one(\"load\",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr(\"src\",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger(\"_lazyload_appear\")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on(\"resize load\",function(){k(h,b)}),a(function(){k(h,b)}),this})});\n</=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else></=a.offset().top-b.threshold}function>"}],"Post":[{"title":"Android Studio打包","date":"2017-05-19T04:54:43.000Z","_content":"这篇博客介绍打包相关\n<!-- more -->\n## 签名文件 ##\nAndroid Studio生成\n\n 1. 打开Android Studio的build目录，进入Generate Signed APK子菜单!\n ![sdf][1]\n 2. 点击新建，进入创建页，按提示填写!\n ![新建签名文件][2]\n\n ![输入说明][3]\n 3. 填写完成自动返回上一菜单并自动填充相关参数\n 4. 点击next即可生成\n\n## 查看签名文件SHA-1、MD5 ##\n\n 1. 打开cmd,进入签名文件目录\n 2. 在控制台输入命令\n    debug.keystore：命令为：keytool -list -v -keystore debug.keystore\n    自定义的 keystore：命令为：keytool -list -v -keystore apk的keystore\n    自定义的 jks：命令为：keytool -list -v -keystore apk的jks\n    ![keystore命令][4]\n \n \n \n\n\n  [1]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step1.png\n  [2]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step2.png\n  [3]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step3.png\n  [4]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/keytool.png","source":"_posts/Android Studio打包.md","raw":"---\ntitle: Android Studio打包\ndate: 2017-05-19 12:54:43\ncategories:\n\t- course\ntags:\n\t- android\n\t- apk打包\n---\n这篇博客介绍打包相关\n<!-- more -->\n## 签名文件 ##\nAndroid Studio生成\n\n 1. 打开Android Studio的build目录，进入Generate Signed APK子菜单!\n ![sdf][1]\n 2. 点击新建，进入创建页，按提示填写!\n ![新建签名文件][2]\n\n ![输入说明][3]\n 3. 填写完成自动返回上一菜单并自动填充相关参数\n 4. 点击next即可生成\n\n## 查看签名文件SHA-1、MD5 ##\n\n 1. 打开cmd,进入签名文件目录\n 2. 在控制台输入命令\n    debug.keystore：命令为：keytool -list -v -keystore debug.keystore\n    自定义的 keystore：命令为：keytool -list -v -keystore apk的keystore\n    自定义的 jks：命令为：keytool -list -v -keystore apk的jks\n    ![keystore命令][4]\n \n \n \n\n\n  [1]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step1.png\n  [2]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step2.png\n  [3]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step3.png\n  [4]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/keytool.png","slug":"Android Studio打包","published":1,"updated":"2017-05-19T05:00:10.427Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0ef70000ssvf2tk1qcyj","content":"<p>这篇博客介绍打包相关<br><a id=\"more\"></a></p>\n<h2 id=\"签名文件\"><a href=\"#签名文件\" class=\"headerlink\" title=\"签名文件\"></a>签名文件</h2><p>Android Studio生成</p>\n<ol>\n<li>打开Android Studio的build目录，进入Generate Signed APK子菜单!<br><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step1.png\" alt=\"sdf\"></li>\n<li><p>点击新建，进入创建页，按提示填写!<br><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step2.png\" alt=\"新建签名文件\"></p>\n<p><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step3.png\" alt=\"输入说明\"></p>\n</li>\n<li>填写完成自动返回上一菜单并自动填充相关参数</li>\n<li>点击next即可生成</li>\n</ol>\n<h2 id=\"查看签名文件SHA-1、MD5\"><a href=\"#查看签名文件SHA-1、MD5\" class=\"headerlink\" title=\"查看签名文件SHA-1、MD5\"></a>查看签名文件SHA-1、MD5</h2><ol>\n<li>打开cmd,进入签名文件目录</li>\n<li>在控制台输入命令<br>debug.keystore：命令为：keytool -list -v -keystore debug.keystore<br>自定义的 keystore：命令为：keytool -list -v -keystore apk的keystore<br>自定义的 jks：命令为：keytool -list -v -keystore apk的jks<br><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/keytool.png\" alt=\"keystore命令\"></li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>这篇博客介绍打包相关<br>","more":"</p>\n<h2 id=\"签名文件\"><a href=\"#签名文件\" class=\"headerlink\" title=\"签名文件\"></a>签名文件</h2><p>Android Studio生成</p>\n<ol>\n<li>打开Android Studio的build目录，进入Generate Signed APK子菜单!<br><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step1.png\" alt=\"sdf\"></li>\n<li><p>点击新建，进入创建页，按提示填写!<br><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step2.png\" alt=\"新建签名文件\"></p>\n<p><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/generateKey_step3.png\" alt=\"输入说明\"></p>\n</li>\n<li>填写完成自动返回上一菜单并自动填充相关参数</li>\n<li>点击next即可生成</li>\n</ol>\n<h2 id=\"查看签名文件SHA-1、MD5\"><a href=\"#查看签名文件SHA-1、MD5\" class=\"headerlink\" title=\"查看签名文件SHA-1、MD5\"></a>查看签名文件SHA-1、MD5</h2><ol>\n<li>打开cmd,进入签名文件目录</li>\n<li>在控制台输入命令<br>debug.keystore：命令为：keytool -list -v -keystore debug.keystore<br>自定义的 keystore：命令为：keytool -list -v -keystore apk的keystore<br>自定义的 jks：命令为：keytool -list -v -keystore apk的jks<br><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/keytool.png\" alt=\"keystore命令\"></li>\n</ol>"},{"title":"SNMP学习总结(1)——基本概念","date":"2017-05-25T00:42:50.000Z","_content":"这篇博客简要介绍了snmp协议的基本概念\n<!-- more -->\n## 1 SNMP简单概述\n\n### 1.1 什么是SNMP?\n\n　　SNMP是英文\"Simple Network Management Protocol\"的缩写，中文意思是“简单的网络管理协议”。它属于TCP/IP五层协议中的应用层协议，用于网络管理的协议。SNMP主要用于网络设备的管理。由于SNMP协议简单可靠 ，受到了众多厂商的欢迎，成为了目前最为广泛的网管协议。\n　　SNMP协议主要由两大部分组成：**SNMP管理站**和**SNMP代理**。SNMP管理站是一个中心节点，负责收集维护各个SNMP元素的信息，并对这些信息进行处理，最后反馈给网络管理员；而SNMP代理是运行在各个被管理的网络节点之上，负责统计该节点的各项信息，并且负责与SNMP管理站交互，接收并执行管理站的命令，上传各种本地的网络信息。\n　　SNMP管理站和SNMP代理之间是松散耦合。他们之间的通信是通过UDP协议完成的。一般情况下，SNMP管理站通过UDP协议向SNMP代理发送各种命令，当SNMP代理收到命令后，返回SNMP管理站需要的参数。但是当SNMP代理检测到网络元素异常的时候，也可以主动向SNMP管理站发送消息，通告当前异常状况。\n　　SNMP的基本思想：为不同种类的设备、不同厂家生产的设备、不同型号的设备，定义为一个统一的接口和协议，使得管理员可以是使用统一的外观面对这些需要管理的网络设备进行管理。通过网络，管理员可以管理位于不同物理空间的设备，从而大大提高网络管理的效率，简化网络管理员的工作。\n　　SNMP的工作方式：管理员需要向设备获取数据，所以SNMP提供了【读】操作；管理员需要向设备执行设置操作，所以SNMP提供了【写】操作；设备需要在重要状况改变的时候，向管理员通报事件的发生，所以SNMP提供了【Trap】操作。\n\n### 1.2 SNMP和UDP\n\nSNMP采用UDP协议在管理端和agent之间传输信息。 SNMP采用UDP161端口接收和发送请求，162端口接收trap，执行SNMP的设备缺省都必须采用这些端口。SNMP消息全部通过UDP端口161接收，只有Trap信息采用UDP端口162。\n \n### 1.3 Snmp版本\n\nSNMP目前共有v1，v2，v3这三个版本： \n\n - SNMP v1是SNMP协议的最初版本，不过依然是众多厂家实现SNMP基本方式。 \n - SNMP v2通常被指是基于community的SNMP V2。Community实质上就是密码。\n - SNMP v3 是最新版本的SNMP。它对网络管理最大的贡献在于其安全性。增加了对认证和密文传输的支持。\n\n## 2 SNMP工作原理\n　　在具体的实现上，SNMP为管理员提供了一个网管平台（NMS），又称为管理站，负责网管命令的发出、数据存储及数据分析。被监管的设备上运行一个SNMP代理（Agent），代理实现设备与管理站的SNMP通信。\n　　![snmp工作原理][1]\n　　管理站和代理端使用MIB进行接口统一，MIB定义了设备中的被管理对象。管理站和代理都实现相应的MIB对象，使得双方可以识别对方的数据，实现通信。管理站向代理请求MIB中定义的数据，代理端识别后，将管理设备提供的相关状态或参数等数据转换成MIB定义的格式，最后将该信息返回给管理站，完成一次管理操作。\n　　\n## 3 SNMP报文\n### 3.1 报文类型\n　　SNMP中定义了五种消息类型：Get-Request、Get-Response、Get-Next-Request、Set-Request和Trap。\n\n - Get-Request 、Get-Next-Request与Get-Response\nSNMP 管理站用Get-Request消息从拥有SNMP代理的网络设备中检索信息，而SNMP代理则用Get-Response消息响应。Get-Next- Request用于和Get-Request组合起来查询特定的表对象中的列元素。\n - Set-Request SNMP管理站用Set-Request 可以对网络设备进行远程配置（包括设备名、设备属性、删除设备或使某一个设备属性有效/无效等）。\n - Trap SNMP代理使用Trap向SNMP管理站发送非请求消息，一般用于描述某一事件的发生，如接口UP/DOWN，IP地址更改等。\n\n上面五种消息中Get-Request、Get-Next-Request和Set-Request是由管理站发送到代理侧的161端口的；后面两种Get-Response和Trap 是由代理进程发给管理进程的，其中Trap消息被发送到管理进程的162端口，所有数据都是走UDP封装。SNMP工作流程如图2：\n![SNMP工作流程][2]\n### 3.2 报文格式\nSNMP代理和管理站通过SNMP协议中的标准消息进行通信，每个消息都是一个单独的数据报。SNMP使用UDP（用户数据报协议）作为第四层协议（传输协议），进行无连接操作。SNMP消息报文包含两个部分：SNMP报头和协议数据单元PDU。\n![SNMP报文格式][3]\n\n**以下部分是报文格式的具体分析，有需要可以继续学习。**\n    \n　　在实际网络传输环境下，SNMP报文的长度取决于其所采用的编码方式。SNMP统一采用BER(Basic Encoding Rule)的编码规则，同时在正式SNMP规范中使用的是ASN.1语法，Abastract Syntax Notation v1，即抽象语法描述语言。这两个概念在后面实践环节再做进一步介绍，这里只要稍微了解一下即可，不妨碍我们对协议本身的分析。这里我们简单解释一下BER编码规则：\n　　BER作为ANS.1的基本编码规则，描述具体的ANS.1对象如何编码为比特流在网络上进行传输。BER编码规则由三部分组成：\n　　![BER编码方式][4]\n    SNMP中定义了几种基本的数据类型，其中v1和v2版有些改动，具体参见相应的RFC文档。这里我们只介绍几种最常见的类型：\n\n - INTEGER：一个整数\n - OCTER STRING： 0或多个8bit字节，每个字节在0~255之间取值\n - DisplayString：0或多个8bit字节，每个字节必须是ASCII码。在MIB-II中，所有该类型变量不能超过255个字符(0个字符可以)\n - NULL：代表相关的变量没有值\n - IpAddress：4字节长的OCTER STRING，以网络字节序表示IP地址\n - PhyAddress：6字节长的OCTER STRING，代表物理地址\n - Counter：非负整数，可以从0递增到232-1()。达到最大值后归0\n - TimeTicks：时间计数器，以0.01秒为单位递增，不同的变量可以有不同的递增幅度。所以在定义这种类型的变量时需要制定递增幅度\n - SEQUENCE：与C语言中的结构体类似\n - SEQUENCE OF：一个向量，参见后面ANS.1语法详细介绍章节\n\nSNMP报文在传输层是封装在UDP报文中的，而UDP又是基于IP网络的，因此，我们可以得到完整的报文描述结构，如下图所示：\n![SNMP协议报文格式][5]\nPDU类型其实包含两个字节，第一个字节表示真实的PDU的类型；第二个字节表示后面报文所占的字节总数。针对SNMPv1，这个字段取值如下：\n| PDU类型  | 名 称   |\n| :--------: | :-----:  |\n| 0     | get-request |\n| 1        |   get-next-request   |\n| 2        |    get-response    |\n| 3        |    set-request   |\n| 4        |    trap   |\n　　也就是说，trap的类型是4。但是在数据报文中，该字段一般表示为ax，其中x取[0,4]，即a0~a3表示相应的get、set等操作，a4表示trap报文。这里除了类型字段意外，其他字段均采用BER编码方式：\n![采用BER编码的字段][6]\n　　\n**实战演练之报文格式分析**\n　　Trap报文格式和上述图5所展示的结构有些差别，这里我们只分析SNMPv1和SNMPv2的Trap报文格式。trap报文前面的部分都一样，区别在PDU协议数据单元部分。\n\nSNMPv1 Trap报文\nSNMPv1的Trap报文格式如下所示：\n![SNMPv1的Trap报文格式][7]\n注意：除了PDU类型和PDU长度字段外，后面的每个字段都是BER编码方式。\n    trap类型”可以取以下值，其中0~6是已定义的特定trap，7及其以后的类型由供应商自定义。\n表2 trap类型、名称及描述信息\n| trap类型        | 名称   |  描述信息  |\n| :--------:   | :-----:  | :----:  |\n| ０     | coldStart |   代理进程对自己初始化     |\n| １        |   warmStart   |   代理进程对自己重新初始化   |\n| ２        |   linkDown    |  一个接口已从工作状态变为故障状态(报文中的第一个变量标识此接口)  |\n| ３     | linkUp |  一个接口已从故障状态变为工作状态(报文中的第一个变量标识此接口)     |\n| ４        |   authenticationFailure   |   从SNMP管理进程收到无效共同体的报文   |\n| ５        |    egpNeighborLoss    |  一个EGP邻站已变为故障状态(报文中的第一个变量包含邻站IP地址) |\n| ６     | enterpriseSpecific |   在这个特定的代码段中查找trap信息     |\n　　通过wireshark抓包工具，捕获一条如下的SNMP报文，接下来对其进行仔细分析。\nSNMPv1原始报文内容：\n\n<font color=\"green\">00 23 5a 9e 58 b9</font> <font color=\"blue\">00 4c 41 49 50 55</font> <font color=\"red\">08 005</font> <font color=\"gold\">45 00 00 48 00 00 40 00 40 11 a5 4e c0 a8 0a 01 c0 a8 0a 05</font> <font color=\"purple\">0c 00 00 a2 00 34 ff e0</font> 30 2a 02 01 00 04 06 70 75 62 6c 69 63 a4 1d 06 0a 2b 06 01 04 01 bf 08 03 02 0a 40 04 c0 a8 0a 01 02 01 00 02 01 00 43 01 0e 30 00\n \n目的MAC：<font color=\"green\">00 23 5a 9e 58 b9</font>\n源MAC：<font color=\"blue\">00 4c 41 49 50 55</font>\n协议类型：<font color=\"red\">08 005</font> ，为IP数据报\nIP头：<font color=\"gold\">45 00 00 48 00 00 40 00 40 11 a5 4e c0 a8 0a 01 c0 a8 0a 05</font>\nUDP头：<font color=\"purple\">0c 00 00 a2 00 34 ff e0</font>\n其余部分都为SNMP报文，接下来我们对照前面的报文结构体来逐个分析一下。\n\n - 30 表示SNMP消息是ASN.1的SEQUENCE类型；\n - 2a 表示该SNMP报文的总长度是42(0x2a)个字节，该字段所表示的报文长度起始于它后面的第一个字节直到报文结束；\n - 02 01 00 表示版本号，可见其确实为BER编码方式。02表示该字段是INTEGER类型；01表示该字段占1个字节；00表示版本号，该值为“版本号-1”；\n - 04 06 70 75 62 6c 69 63 表示团体名，04表示该字段为OCTET STRING类型；06表示该字段占6个字节；70 75 62 6c 69 63 表示团体名的ANSII码的十六进制形式，这里是“public”；\n - a4 1d 其中a4中的“4”表示这是一个trap报文，a4又叫报文的标签标记；1d表示后面还有29(0x1d)个字节的数据；\n - 06 0a 2b 06 01 04 01 bf 08 03 02 0a 企业OID标识。06表示该字段是个对象标识符，OBJECT IDENTIFIER；0a表示该字段占10(0x0a)个字节；关于SNMP的OID的编码方式有些奇特：例如1.3.6.1.2…. 取前两个数字分别记为x和y。编码时40*x+y，这里x=1，y=3，因此结果为40*1+3=43，即表示十六进制的2b。因此，这里的企业OID编码即为1.3.6.1.4.1.8072.3.2.10；\n - 40 04 c0 a8 0a 01 同样40表示该字段为OCTET STRING 类型；04表示IP地址占4个字节；IP地址为192.168.10.1；\n - 02 01 00 其中00表示trap类型为coldStart；\n - 02 01 00 其中00表示我们指定的trap即specific-trap也为coldStart类型；\n - 43 01 0e 43表示为TimeTicks类型；01表示该字段占1个字节；0e即十进制的14表示时间标签为0.14秒，这里时间计数器以0.01秒递增；\n - 30 00 30表示“键-值”值对的编码类型为SEQUENCE；00表示该字段占0个字节，即没有该字段。\n\nSNMPv2 Trap报文 \nSNMPv2的Trap报文格式如图8所示：\n![SNMPv2的Trap报文格式][8]\n同样的，这里除了trap类型和报文长度是标准网络字节序之外，其余协议字段也均为BER编码方式。可以看到v2版的trap报文正在向统一的报文格式发展，已经非常类似普通的SNMP请求、响应报文了。\nSNMPv2原始报文内容：\n00 23 5a 9e 58 b9 00 4c 41 49 50 55 08 00 45 00 00 7b 00 00 40 00 40 11 a5 1b c0 a8 0a 01 c0 a8 0a 05 0c 01 00 a2 00 67 04 bb 30 5d 02 01 01 04 06 70 75 62 6c 69 63 a7 50 02 04 17 73 2c fb 02 01 00 02 01 00 30 42 30 0d 06 08 2b 06 01 02 01 01 03 00 43 01 0e 30 17 06 0a 2b 06 01 06 03 01 01 04 01 00 06 09 2b 06 01 06 03 01 01 05 01 30 18 06 0a 2b 06 01 06 03 01 01 04 03 00 06 0a 2b 06 01 04 01 bf 08 03 02 0a\n \n目的MAC：00 23 5a 9e 58 b9\n源MAC：00 4c 41 49 50 55\n协议类型：08 00，IP报文\nIP头：45 00 00 7b 00 00 40 00 40 11 a5 1b c0 a8 0a 01 c0 a8 0a 05\nUDP头：0c 01 00 a2 00 67 04 bb\n余下部分全为SNMP报文内容，这里我们做一下简单的约定：\nxx 标注类型；xx 标注长度；xx 标注真正的数据。\n这样一来上面这串原始数据就好分析多了\n\n - 30 5d 整个SNMP报文的编码方式为30，即SEQUENCE类型，报文长度93(0x5d)字节；\n - 02 01 01 版本号01即v2版本；\n - 04 06 70 75 62 6c 69 63 团体名70 75 62 6c 69 63  即英文的“public”；\n - a7 50 a7表示trap类型为7，即厂商自定义trap；50表示PDU区段占80(0x50)字节；\n - 02 04 17 73 2c fb 请求ID为17 73 2c fb 十进制的393424123；\n - 02 01 00 错误状态0；\n - 02 01 00 错误索引0；\n - 30 42 “变量名-值”对编码类型30 即SEQUENCE类型；“变量名-值”所占总字节0x42，即66字节；\n - 30 0d 06 08 2b 06 01 02 01 01 03 00 43 01 0e 第一个“名-值”对区段编码方式30 即SEQUENCE类型；第一个“名-值”对总长度0x0d，13字节；第一个变量名的编码类型0x06，时间标签；第一个变量名占0x08个字节；第一个变量名2b 06 01 02 01 01 03 00，为1.3.6.1.2.1.1.3.0；第一个变量值为0x0e，即14；\n - 30 17 06 0a 2b 06 01 06 03 01 01 04 01 00 06 09 2b 06 01 06 03 01 01 05 01 第二个“名-值”对；变量名1.3.6.1.6.3.1.1.4.1.0；变量值1.3.6.1.6.3.1.1.5.1；\n - 30 18 06 0a 2b 06 01 06 03 01 01 04 03 00 06 0a 2b 06 01 04 01 bf 08 03 02 0a 第三个“名-值”对；变量名1.3.6.1.6.3.1.1.4.3.0；变量值1.3.6.1.4.1.8072.3.2.10；\n\n今天我们简单对SNMP协议做个入门普及，包括它的原理，应用场景报文格式等。下面的章节，我们将以开源net-snmp为例来向大家阐述多种代理开发流程和原理，以及要注意的问题，其中每种扩展mib的方式都对应不同的开发需求。\n  ------\n\n\n  [1]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274236dktq.jpg\n  [2]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274238733S.jpg\n  [3]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274240Yo8Q.jpg\n  [4]: http://blog.chinaunix.net/attachment/201206/21/23069658_134027424269yP.jpg\n  [5]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274245phSV.jpg\n  [6]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274247srSc.jpg\n  [7]: http://blog.chinaunix.net/attachment/201206/21/23069658_134027425066MR.jpg\n  [8]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274252oJOX.jpg","source":"_posts/SNMP学习总结(1)——基本概念.md","raw":"---\ntitle: SNMP学习总结(1)——基本概念\ndate: 2017-05-25 8:42:50\ncategories:\n  - SNMP\ntags:\n  - snmp\n  - network\n  - snmp4j\n---\n这篇博客简要介绍了snmp协议的基本概念\n<!-- more -->\n## 1 SNMP简单概述\n\n### 1.1 什么是SNMP?\n\n　　SNMP是英文\"Simple Network Management Protocol\"的缩写，中文意思是“简单的网络管理协议”。它属于TCP/IP五层协议中的应用层协议，用于网络管理的协议。SNMP主要用于网络设备的管理。由于SNMP协议简单可靠 ，受到了众多厂商的欢迎，成为了目前最为广泛的网管协议。\n　　SNMP协议主要由两大部分组成：**SNMP管理站**和**SNMP代理**。SNMP管理站是一个中心节点，负责收集维护各个SNMP元素的信息，并对这些信息进行处理，最后反馈给网络管理员；而SNMP代理是运行在各个被管理的网络节点之上，负责统计该节点的各项信息，并且负责与SNMP管理站交互，接收并执行管理站的命令，上传各种本地的网络信息。\n　　SNMP管理站和SNMP代理之间是松散耦合。他们之间的通信是通过UDP协议完成的。一般情况下，SNMP管理站通过UDP协议向SNMP代理发送各种命令，当SNMP代理收到命令后，返回SNMP管理站需要的参数。但是当SNMP代理检测到网络元素异常的时候，也可以主动向SNMP管理站发送消息，通告当前异常状况。\n　　SNMP的基本思想：为不同种类的设备、不同厂家生产的设备、不同型号的设备，定义为一个统一的接口和协议，使得管理员可以是使用统一的外观面对这些需要管理的网络设备进行管理。通过网络，管理员可以管理位于不同物理空间的设备，从而大大提高网络管理的效率，简化网络管理员的工作。\n　　SNMP的工作方式：管理员需要向设备获取数据，所以SNMP提供了【读】操作；管理员需要向设备执行设置操作，所以SNMP提供了【写】操作；设备需要在重要状况改变的时候，向管理员通报事件的发生，所以SNMP提供了【Trap】操作。\n\n### 1.2 SNMP和UDP\n\nSNMP采用UDP协议在管理端和agent之间传输信息。 SNMP采用UDP161端口接收和发送请求，162端口接收trap，执行SNMP的设备缺省都必须采用这些端口。SNMP消息全部通过UDP端口161接收，只有Trap信息采用UDP端口162。\n \n### 1.3 Snmp版本\n\nSNMP目前共有v1，v2，v3这三个版本： \n\n - SNMP v1是SNMP协议的最初版本，不过依然是众多厂家实现SNMP基本方式。 \n - SNMP v2通常被指是基于community的SNMP V2。Community实质上就是密码。\n - SNMP v3 是最新版本的SNMP。它对网络管理最大的贡献在于其安全性。增加了对认证和密文传输的支持。\n\n## 2 SNMP工作原理\n　　在具体的实现上，SNMP为管理员提供了一个网管平台（NMS），又称为管理站，负责网管命令的发出、数据存储及数据分析。被监管的设备上运行一个SNMP代理（Agent），代理实现设备与管理站的SNMP通信。\n　　![snmp工作原理][1]\n　　管理站和代理端使用MIB进行接口统一，MIB定义了设备中的被管理对象。管理站和代理都实现相应的MIB对象，使得双方可以识别对方的数据，实现通信。管理站向代理请求MIB中定义的数据，代理端识别后，将管理设备提供的相关状态或参数等数据转换成MIB定义的格式，最后将该信息返回给管理站，完成一次管理操作。\n　　\n## 3 SNMP报文\n### 3.1 报文类型\n　　SNMP中定义了五种消息类型：Get-Request、Get-Response、Get-Next-Request、Set-Request和Trap。\n\n - Get-Request 、Get-Next-Request与Get-Response\nSNMP 管理站用Get-Request消息从拥有SNMP代理的网络设备中检索信息，而SNMP代理则用Get-Response消息响应。Get-Next- Request用于和Get-Request组合起来查询特定的表对象中的列元素。\n - Set-Request SNMP管理站用Set-Request 可以对网络设备进行远程配置（包括设备名、设备属性、删除设备或使某一个设备属性有效/无效等）。\n - Trap SNMP代理使用Trap向SNMP管理站发送非请求消息，一般用于描述某一事件的发生，如接口UP/DOWN，IP地址更改等。\n\n上面五种消息中Get-Request、Get-Next-Request和Set-Request是由管理站发送到代理侧的161端口的；后面两种Get-Response和Trap 是由代理进程发给管理进程的，其中Trap消息被发送到管理进程的162端口，所有数据都是走UDP封装。SNMP工作流程如图2：\n![SNMP工作流程][2]\n### 3.2 报文格式\nSNMP代理和管理站通过SNMP协议中的标准消息进行通信，每个消息都是一个单独的数据报。SNMP使用UDP（用户数据报协议）作为第四层协议（传输协议），进行无连接操作。SNMP消息报文包含两个部分：SNMP报头和协议数据单元PDU。\n![SNMP报文格式][3]\n\n**以下部分是报文格式的具体分析，有需要可以继续学习。**\n    \n　　在实际网络传输环境下，SNMP报文的长度取决于其所采用的编码方式。SNMP统一采用BER(Basic Encoding Rule)的编码规则，同时在正式SNMP规范中使用的是ASN.1语法，Abastract Syntax Notation v1，即抽象语法描述语言。这两个概念在后面实践环节再做进一步介绍，这里只要稍微了解一下即可，不妨碍我们对协议本身的分析。这里我们简单解释一下BER编码规则：\n　　BER作为ANS.1的基本编码规则，描述具体的ANS.1对象如何编码为比特流在网络上进行传输。BER编码规则由三部分组成：\n　　![BER编码方式][4]\n    SNMP中定义了几种基本的数据类型，其中v1和v2版有些改动，具体参见相应的RFC文档。这里我们只介绍几种最常见的类型：\n\n - INTEGER：一个整数\n - OCTER STRING： 0或多个8bit字节，每个字节在0~255之间取值\n - DisplayString：0或多个8bit字节，每个字节必须是ASCII码。在MIB-II中，所有该类型变量不能超过255个字符(0个字符可以)\n - NULL：代表相关的变量没有值\n - IpAddress：4字节长的OCTER STRING，以网络字节序表示IP地址\n - PhyAddress：6字节长的OCTER STRING，代表物理地址\n - Counter：非负整数，可以从0递增到232-1()。达到最大值后归0\n - TimeTicks：时间计数器，以0.01秒为单位递增，不同的变量可以有不同的递增幅度。所以在定义这种类型的变量时需要制定递增幅度\n - SEQUENCE：与C语言中的结构体类似\n - SEQUENCE OF：一个向量，参见后面ANS.1语法详细介绍章节\n\nSNMP报文在传输层是封装在UDP报文中的，而UDP又是基于IP网络的，因此，我们可以得到完整的报文描述结构，如下图所示：\n![SNMP协议报文格式][5]\nPDU类型其实包含两个字节，第一个字节表示真实的PDU的类型；第二个字节表示后面报文所占的字节总数。针对SNMPv1，这个字段取值如下：\n| PDU类型  | 名 称   |\n| :--------: | :-----:  |\n| 0     | get-request |\n| 1        |   get-next-request   |\n| 2        |    get-response    |\n| 3        |    set-request   |\n| 4        |    trap   |\n　　也就是说，trap的类型是4。但是在数据报文中，该字段一般表示为ax，其中x取[0,4]，即a0~a3表示相应的get、set等操作，a4表示trap报文。这里除了类型字段意外，其他字段均采用BER编码方式：\n![采用BER编码的字段][6]\n　　\n**实战演练之报文格式分析**\n　　Trap报文格式和上述图5所展示的结构有些差别，这里我们只分析SNMPv1和SNMPv2的Trap报文格式。trap报文前面的部分都一样，区别在PDU协议数据单元部分。\n\nSNMPv1 Trap报文\nSNMPv1的Trap报文格式如下所示：\n![SNMPv1的Trap报文格式][7]\n注意：除了PDU类型和PDU长度字段外，后面的每个字段都是BER编码方式。\n    trap类型”可以取以下值，其中0~6是已定义的特定trap，7及其以后的类型由供应商自定义。\n表2 trap类型、名称及描述信息\n| trap类型        | 名称   |  描述信息  |\n| :--------:   | :-----:  | :----:  |\n| ０     | coldStart |   代理进程对自己初始化     |\n| １        |   warmStart   |   代理进程对自己重新初始化   |\n| ２        |   linkDown    |  一个接口已从工作状态变为故障状态(报文中的第一个变量标识此接口)  |\n| ３     | linkUp |  一个接口已从故障状态变为工作状态(报文中的第一个变量标识此接口)     |\n| ４        |   authenticationFailure   |   从SNMP管理进程收到无效共同体的报文   |\n| ５        |    egpNeighborLoss    |  一个EGP邻站已变为故障状态(报文中的第一个变量包含邻站IP地址) |\n| ６     | enterpriseSpecific |   在这个特定的代码段中查找trap信息     |\n　　通过wireshark抓包工具，捕获一条如下的SNMP报文，接下来对其进行仔细分析。\nSNMPv1原始报文内容：\n\n<font color=\"green\">00 23 5a 9e 58 b9</font> <font color=\"blue\">00 4c 41 49 50 55</font> <font color=\"red\">08 005</font> <font color=\"gold\">45 00 00 48 00 00 40 00 40 11 a5 4e c0 a8 0a 01 c0 a8 0a 05</font> <font color=\"purple\">0c 00 00 a2 00 34 ff e0</font> 30 2a 02 01 00 04 06 70 75 62 6c 69 63 a4 1d 06 0a 2b 06 01 04 01 bf 08 03 02 0a 40 04 c0 a8 0a 01 02 01 00 02 01 00 43 01 0e 30 00\n \n目的MAC：<font color=\"green\">00 23 5a 9e 58 b9</font>\n源MAC：<font color=\"blue\">00 4c 41 49 50 55</font>\n协议类型：<font color=\"red\">08 005</font> ，为IP数据报\nIP头：<font color=\"gold\">45 00 00 48 00 00 40 00 40 11 a5 4e c0 a8 0a 01 c0 a8 0a 05</font>\nUDP头：<font color=\"purple\">0c 00 00 a2 00 34 ff e0</font>\n其余部分都为SNMP报文，接下来我们对照前面的报文结构体来逐个分析一下。\n\n - 30 表示SNMP消息是ASN.1的SEQUENCE类型；\n - 2a 表示该SNMP报文的总长度是42(0x2a)个字节，该字段所表示的报文长度起始于它后面的第一个字节直到报文结束；\n - 02 01 00 表示版本号，可见其确实为BER编码方式。02表示该字段是INTEGER类型；01表示该字段占1个字节；00表示版本号，该值为“版本号-1”；\n - 04 06 70 75 62 6c 69 63 表示团体名，04表示该字段为OCTET STRING类型；06表示该字段占6个字节；70 75 62 6c 69 63 表示团体名的ANSII码的十六进制形式，这里是“public”；\n - a4 1d 其中a4中的“4”表示这是一个trap报文，a4又叫报文的标签标记；1d表示后面还有29(0x1d)个字节的数据；\n - 06 0a 2b 06 01 04 01 bf 08 03 02 0a 企业OID标识。06表示该字段是个对象标识符，OBJECT IDENTIFIER；0a表示该字段占10(0x0a)个字节；关于SNMP的OID的编码方式有些奇特：例如1.3.6.1.2…. 取前两个数字分别记为x和y。编码时40*x+y，这里x=1，y=3，因此结果为40*1+3=43，即表示十六进制的2b。因此，这里的企业OID编码即为1.3.6.1.4.1.8072.3.2.10；\n - 40 04 c0 a8 0a 01 同样40表示该字段为OCTET STRING 类型；04表示IP地址占4个字节；IP地址为192.168.10.1；\n - 02 01 00 其中00表示trap类型为coldStart；\n - 02 01 00 其中00表示我们指定的trap即specific-trap也为coldStart类型；\n - 43 01 0e 43表示为TimeTicks类型；01表示该字段占1个字节；0e即十进制的14表示时间标签为0.14秒，这里时间计数器以0.01秒递增；\n - 30 00 30表示“键-值”值对的编码类型为SEQUENCE；00表示该字段占0个字节，即没有该字段。\n\nSNMPv2 Trap报文 \nSNMPv2的Trap报文格式如图8所示：\n![SNMPv2的Trap报文格式][8]\n同样的，这里除了trap类型和报文长度是标准网络字节序之外，其余协议字段也均为BER编码方式。可以看到v2版的trap报文正在向统一的报文格式发展，已经非常类似普通的SNMP请求、响应报文了。\nSNMPv2原始报文内容：\n00 23 5a 9e 58 b9 00 4c 41 49 50 55 08 00 45 00 00 7b 00 00 40 00 40 11 a5 1b c0 a8 0a 01 c0 a8 0a 05 0c 01 00 a2 00 67 04 bb 30 5d 02 01 01 04 06 70 75 62 6c 69 63 a7 50 02 04 17 73 2c fb 02 01 00 02 01 00 30 42 30 0d 06 08 2b 06 01 02 01 01 03 00 43 01 0e 30 17 06 0a 2b 06 01 06 03 01 01 04 01 00 06 09 2b 06 01 06 03 01 01 05 01 30 18 06 0a 2b 06 01 06 03 01 01 04 03 00 06 0a 2b 06 01 04 01 bf 08 03 02 0a\n \n目的MAC：00 23 5a 9e 58 b9\n源MAC：00 4c 41 49 50 55\n协议类型：08 00，IP报文\nIP头：45 00 00 7b 00 00 40 00 40 11 a5 1b c0 a8 0a 01 c0 a8 0a 05\nUDP头：0c 01 00 a2 00 67 04 bb\n余下部分全为SNMP报文内容，这里我们做一下简单的约定：\nxx 标注类型；xx 标注长度；xx 标注真正的数据。\n这样一来上面这串原始数据就好分析多了\n\n - 30 5d 整个SNMP报文的编码方式为30，即SEQUENCE类型，报文长度93(0x5d)字节；\n - 02 01 01 版本号01即v2版本；\n - 04 06 70 75 62 6c 69 63 团体名70 75 62 6c 69 63  即英文的“public”；\n - a7 50 a7表示trap类型为7，即厂商自定义trap；50表示PDU区段占80(0x50)字节；\n - 02 04 17 73 2c fb 请求ID为17 73 2c fb 十进制的393424123；\n - 02 01 00 错误状态0；\n - 02 01 00 错误索引0；\n - 30 42 “变量名-值”对编码类型30 即SEQUENCE类型；“变量名-值”所占总字节0x42，即66字节；\n - 30 0d 06 08 2b 06 01 02 01 01 03 00 43 01 0e 第一个“名-值”对区段编码方式30 即SEQUENCE类型；第一个“名-值”对总长度0x0d，13字节；第一个变量名的编码类型0x06，时间标签；第一个变量名占0x08个字节；第一个变量名2b 06 01 02 01 01 03 00，为1.3.6.1.2.1.1.3.0；第一个变量值为0x0e，即14；\n - 30 17 06 0a 2b 06 01 06 03 01 01 04 01 00 06 09 2b 06 01 06 03 01 01 05 01 第二个“名-值”对；变量名1.3.6.1.6.3.1.1.4.1.0；变量值1.3.6.1.6.3.1.1.5.1；\n - 30 18 06 0a 2b 06 01 06 03 01 01 04 03 00 06 0a 2b 06 01 04 01 bf 08 03 02 0a 第三个“名-值”对；变量名1.3.6.1.6.3.1.1.4.3.0；变量值1.3.6.1.4.1.8072.3.2.10；\n\n今天我们简单对SNMP协议做个入门普及，包括它的原理，应用场景报文格式等。下面的章节，我们将以开源net-snmp为例来向大家阐述多种代理开发流程和原理，以及要注意的问题，其中每种扩展mib的方式都对应不同的开发需求。\n  ------\n\n\n  [1]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274236dktq.jpg\n  [2]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274238733S.jpg\n  [3]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274240Yo8Q.jpg\n  [4]: http://blog.chinaunix.net/attachment/201206/21/23069658_134027424269yP.jpg\n  [5]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274245phSV.jpg\n  [6]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274247srSc.jpg\n  [7]: http://blog.chinaunix.net/attachment/201206/21/23069658_134027425066MR.jpg\n  [8]: http://blog.chinaunix.net/attachment/201206/21/23069658_1340274252oJOX.jpg","slug":"SNMP学习总结(1)——基本概念","published":1,"updated":"2017-05-25T00:45:37.423Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0efi0002ssvf18fw6lqw","content":"<p>这篇博客简要介绍了snmp协议的基本概念<br><a id=\"more\"></a></p>\n<h2 id=\"1-SNMP简单概述\"><a href=\"#1-SNMP简单概述\" class=\"headerlink\" title=\"1 SNMP简单概述\"></a>1 SNMP简单概述</h2><h3 id=\"1-1-什么是SNMP\"><a href=\"#1-1-什么是SNMP\" class=\"headerlink\" title=\"1.1 什么是SNMP?\"></a>1.1 什么是SNMP?</h3><p>　　SNMP是英文”Simple Network Management Protocol”的缩写，中文意思是“简单的网络管理协议”。它属于TCP/IP五层协议中的应用层协议，用于网络管理的协议。SNMP主要用于网络设备的管理。由于SNMP协议简单可靠 ，受到了众多厂商的欢迎，成为了目前最为广泛的网管协议。<br>　　SNMP协议主要由两大部分组成：<strong>SNMP管理站</strong>和<strong>SNMP代理</strong>。SNMP管理站是一个中心节点，负责收集维护各个SNMP元素的信息，并对这些信息进行处理，最后反馈给网络管理员；而SNMP代理是运行在各个被管理的网络节点之上，负责统计该节点的各项信息，并且负责与SNMP管理站交互，接收并执行管理站的命令，上传各种本地的网络信息。<br>　　SNMP管理站和SNMP代理之间是松散耦合。他们之间的通信是通过UDP协议完成的。一般情况下，SNMP管理站通过UDP协议向SNMP代理发送各种命令，当SNMP代理收到命令后，返回SNMP管理站需要的参数。但是当SNMP代理检测到网络元素异常的时候，也可以主动向SNMP管理站发送消息，通告当前异常状况。<br>　　SNMP的基本思想：为不同种类的设备、不同厂家生产的设备、不同型号的设备，定义为一个统一的接口和协议，使得管理员可以是使用统一的外观面对这些需要管理的网络设备进行管理。通过网络，管理员可以管理位于不同物理空间的设备，从而大大提高网络管理的效率，简化网络管理员的工作。<br>　　SNMP的工作方式：管理员需要向设备获取数据，所以SNMP提供了【读】操作；管理员需要向设备执行设置操作，所以SNMP提供了【写】操作；设备需要在重要状况改变的时候，向管理员通报事件的发生，所以SNMP提供了【Trap】操作。</p>\n<h3 id=\"1-2-SNMP和UDP\"><a href=\"#1-2-SNMP和UDP\" class=\"headerlink\" title=\"1.2 SNMP和UDP\"></a>1.2 SNMP和UDP</h3><p>SNMP采用UDP协议在管理端和agent之间传输信息。 SNMP采用UDP161端口接收和发送请求，162端口接收trap，执行SNMP的设备缺省都必须采用这些端口。SNMP消息全部通过UDP端口161接收，只有Trap信息采用UDP端口162。</p>\n<h3 id=\"1-3-Snmp版本\"><a href=\"#1-3-Snmp版本\" class=\"headerlink\" title=\"1.3 Snmp版本\"></a>1.3 Snmp版本</h3><p>SNMP目前共有v1，v2，v3这三个版本： </p>\n<ul>\n<li>SNMP v1是SNMP协议的最初版本，不过依然是众多厂家实现SNMP基本方式。 </li>\n<li>SNMP v2通常被指是基于community的SNMP V2。Community实质上就是密码。</li>\n<li>SNMP v3 是最新版本的SNMP。它对网络管理最大的贡献在于其安全性。增加了对认证和密文传输的支持。</li>\n</ul>\n<h2 id=\"2-SNMP工作原理\"><a href=\"#2-SNMP工作原理\" class=\"headerlink\" title=\"2 SNMP工作原理\"></a>2 SNMP工作原理</h2><p>　　在具体的实现上，SNMP为管理员提供了一个网管平台（NMS），又称为管理站，负责网管命令的发出、数据存储及数据分析。被监管的设备上运行一个SNMP代理（Agent），代理实现设备与管理站的SNMP通信。<br>　　<img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274236dktq.jpg\" alt=\"snmp工作原理\"><br>　　管理站和代理端使用MIB进行接口统一，MIB定义了设备中的被管理对象。管理站和代理都实现相应的MIB对象，使得双方可以识别对方的数据，实现通信。管理站向代理请求MIB中定义的数据，代理端识别后，将管理设备提供的相关状态或参数等数据转换成MIB定义的格式，最后将该信息返回给管理站，完成一次管理操作。\n　　</p>\n<h2 id=\"3-SNMP报文\"><a href=\"#3-SNMP报文\" class=\"headerlink\" title=\"3 SNMP报文\"></a>3 SNMP报文</h2><h3 id=\"3-1-报文类型\"><a href=\"#3-1-报文类型\" class=\"headerlink\" title=\"3.1 报文类型\"></a>3.1 报文类型</h3><p>　　SNMP中定义了五种消息类型：Get-Request、Get-Response、Get-Next-Request、Set-Request和Trap。</p>\n<ul>\n<li>Get-Request 、Get-Next-Request与Get-Response<br>SNMP 管理站用Get-Request消息从拥有SNMP代理的网络设备中检索信息，而SNMP代理则用Get-Response消息响应。Get-Next- Request用于和Get-Request组合起来查询特定的表对象中的列元素。</li>\n<li>Set-Request SNMP管理站用Set-Request 可以对网络设备进行远程配置（包括设备名、设备属性、删除设备或使某一个设备属性有效/无效等）。</li>\n<li>Trap SNMP代理使用Trap向SNMP管理站发送非请求消息，一般用于描述某一事件的发生，如接口UP/DOWN，IP地址更改等。</li>\n</ul>\n<p>上面五种消息中Get-Request、Get-Next-Request和Set-Request是由管理站发送到代理侧的161端口的；后面两种Get-Response和Trap 是由代理进程发给管理进程的，其中Trap消息被发送到管理进程的162端口，所有数据都是走UDP封装。SNMP工作流程如图2：<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274238733S.jpg\" alt=\"SNMP工作流程\"></p>\n<h3 id=\"3-2-报文格式\"><a href=\"#3-2-报文格式\" class=\"headerlink\" title=\"3.2 报文格式\"></a>3.2 报文格式</h3><p>SNMP代理和管理站通过SNMP协议中的标准消息进行通信，每个消息都是一个单独的数据报。SNMP使用UDP（用户数据报协议）作为第四层协议（传输协议），进行无连接操作。SNMP消息报文包含两个部分：SNMP报头和协议数据单元PDU。<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274240Yo8Q.jpg\" alt=\"SNMP报文格式\"></p>\n<p><strong>以下部分是报文格式的具体分析，有需要可以继续学习。</strong></p>\n<p>　　在实际网络传输环境下，SNMP报文的长度取决于其所采用的编码方式。SNMP统一采用BER(Basic Encoding Rule)的编码规则，同时在正式SNMP规范中使用的是ASN.1语法，Abastract Syntax Notation v1，即抽象语法描述语言。这两个概念在后面实践环节再做进一步介绍，这里只要稍微了解一下即可，不妨碍我们对协议本身的分析。这里我们简单解释一下BER编码规则：<br>　　BER作为ANS.1的基本编码规则，描述具体的ANS.1对象如何编码为比特流在网络上进行传输。BER编码规则由三部分组成：<br>　　<img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_134027424269yP.jpg\" alt=\"BER编码方式\"><br>    SNMP中定义了几种基本的数据类型，其中v1和v2版有些改动，具体参见相应的RFC文档。这里我们只介绍几种最常见的类型：</p>\n<ul>\n<li>INTEGER：一个整数</li>\n<li>OCTER STRING： 0或多个8bit字节，每个字节在0~255之间取值</li>\n<li>DisplayString：0或多个8bit字节，每个字节必须是ASCII码。在MIB-II中，所有该类型变量不能超过255个字符(0个字符可以)</li>\n<li>NULL：代表相关的变量没有值</li>\n<li>IpAddress：4字节长的OCTER STRING，以网络字节序表示IP地址</li>\n<li>PhyAddress：6字节长的OCTER STRING，代表物理地址</li>\n<li>Counter：非负整数，可以从0递增到232-1()。达到最大值后归0</li>\n<li>TimeTicks：时间计数器，以0.01秒为单位递增，不同的变量可以有不同的递增幅度。所以在定义这种类型的变量时需要制定递增幅度</li>\n<li>SEQUENCE：与C语言中的结构体类似</li>\n<li>SEQUENCE OF：一个向量，参见后面ANS.1语法详细介绍章节</li>\n</ul>\n<p>SNMP报文在传输层是封装在UDP报文中的，而UDP又是基于IP网络的，因此，我们可以得到完整的报文描述结构，如下图所示：<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274245phSV.jpg\" alt=\"SNMP协议报文格式\"><br>PDU类型其实包含两个字节，第一个字节表示真实的PDU的类型；第二个字节表示后面报文所占的字节总数。针对SNMPv1，这个字段取值如下：<br>| PDU类型  | 名 称   |<br>| :——–: | :—–:  |<br>| 0     | get-request |<br>| 1        |   get-next-request   |<br>| 2        |    get-response    |<br>| 3        |    set-request   |<br>| 4        |    trap   |<br>　　也就是说，trap的类型是4。但是在数据报文中，该字段一般表示为ax，其中x取[0,4]，即a0~a3表示相应的get、set等操作，a4表示trap报文。这里除了类型字段意外，其他字段均采用BER编码方式：<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274247srSc.jpg\" alt=\"采用BER编码的字段\"><br>　　<br><strong>实战演练之报文格式分析</strong><br>　　Trap报文格式和上述图5所展示的结构有些差别，这里我们只分析SNMPv1和SNMPv2的Trap报文格式。trap报文前面的部分都一样，区别在PDU协议数据单元部分。</p>\n<p>SNMPv1 Trap报文<br>SNMPv1的Trap报文格式如下所示：<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_134027425066MR.jpg\" alt=\"SNMPv1的Trap报文格式\"><br>注意：除了PDU类型和PDU长度字段外，后面的每个字段都是BER编码方式。<br>    trap类型”可以取以下值，其中0~6是已定义的特定trap，7及其以后的类型由供应商自定义。<br>表2 trap类型、名称及描述信息<br>| trap类型        | 名称   |  描述信息  |<br>| :——–:   | :—–:  | :—-:  |<br>| ０     | coldStart |   代理进程对自己初始化     |<br>| １        |   warmStart   |   代理进程对自己重新初始化   |<br>| ２        |   linkDown    |  一个接口已从工作状态变为故障状态(报文中的第一个变量标识此接口)  |<br>| ３     | linkUp |  一个接口已从故障状态变为工作状态(报文中的第一个变量标识此接口)     |<br>| ４        |   authenticationFailure   |   从SNMP管理进程收到无效共同体的报文   |<br>| ５        |    egpNeighborLoss    |  一个EGP邻站已变为故障状态(报文中的第一个变量包含邻站IP地址) |<br>| ６     | enterpriseSpecific |   在这个特定的代码段中查找trap信息     |<br>　　通过wireshark抓包工具，捕获一条如下的SNMP报文，接下来对其进行仔细分析。<br>SNMPv1原始报文内容：</p>\n<p><font color=\"green\">00 23 5a 9e 58 b9</font> <font color=\"blue\">00 4c 41 49 50 55</font> <font color=\"red\">08 005</font> <font color=\"gold\">45 00 00 48 00 00 40 00 40 11 a5 4e c0 a8 0a 01 c0 a8 0a 05</font> <font color=\"purple\">0c 00 00 a2 00 34 ff e0</font> 30 2a 02 01 00 04 06 70 75 62 6c 69 63 a4 1d 06 0a 2b 06 01 04 01 bf 08 03 02 0a 40 04 c0 a8 0a 01 02 01 00 02 01 00 43 01 0e 30 00</p>\n<p>目的MAC：<font color=\"green\">00 23 5a 9e 58 b9</font><br>源MAC：<font color=\"blue\">00 4c 41 49 50 55</font><br>协议类型：<font color=\"red\">08 005</font> ，为IP数据报<br>IP头：<font color=\"gold\">45 00 00 48 00 00 40 00 40 11 a5 4e c0 a8 0a 01 c0 a8 0a 05</font><br>UDP头：<font color=\"purple\">0c 00 00 a2 00 34 ff e0</font><br>其余部分都为SNMP报文，接下来我们对照前面的报文结构体来逐个分析一下。</p>\n<ul>\n<li>30 表示SNMP消息是ASN.1的SEQUENCE类型；</li>\n<li>2a 表示该SNMP报文的总长度是42(0x2a)个字节，该字段所表示的报文长度起始于它后面的第一个字节直到报文结束；</li>\n<li>02 01 00 表示版本号，可见其确实为BER编码方式。02表示该字段是INTEGER类型；01表示该字段占1个字节；00表示版本号，该值为“版本号-1”；</li>\n<li>04 06 70 75 62 6c 69 63 表示团体名，04表示该字段为OCTET STRING类型；06表示该字段占6个字节；70 75 62 6c 69 63 表示团体名的ANSII码的十六进制形式，这里是“public”；</li>\n<li>a4 1d 其中a4中的“4”表示这是一个trap报文，a4又叫报文的标签标记；1d表示后面还有29(0x1d)个字节的数据；</li>\n<li>06 0a 2b 06 01 04 01 bf 08 03 02 0a 企业OID标识。06表示该字段是个对象标识符，OBJECT IDENTIFIER；0a表示该字段占10(0x0a)个字节；关于SNMP的OID的编码方式有些奇特：例如1.3.6.1.2…. 取前两个数字分别记为x和y。编码时40<em>x+y，这里x=1，y=3，因此结果为40</em>1+3=43，即表示十六进制的2b。因此，这里的企业OID编码即为1.3.6.1.4.1.8072.3.2.10；</li>\n<li>40 04 c0 a8 0a 01 同样40表示该字段为OCTET STRING 类型；04表示IP地址占4个字节；IP地址为192.168.10.1；</li>\n<li>02 01 00 其中00表示trap类型为coldStart；</li>\n<li>02 01 00 其中00表示我们指定的trap即specific-trap也为coldStart类型；</li>\n<li>43 01 0e 43表示为TimeTicks类型；01表示该字段占1个字节；0e即十进制的14表示时间标签为0.14秒，这里时间计数器以0.01秒递增；</li>\n<li>30 00 30表示“键-值”值对的编码类型为SEQUENCE；00表示该字段占0个字节，即没有该字段。</li>\n</ul>\n<p>SNMPv2 Trap报文<br>SNMPv2的Trap报文格式如图8所示：<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274252oJOX.jpg\" alt=\"SNMPv2的Trap报文格式\"><br>同样的，这里除了trap类型和报文长度是标准网络字节序之外，其余协议字段也均为BER编码方式。可以看到v2版的trap报文正在向统一的报文格式发展，已经非常类似普通的SNMP请求、响应报文了。<br>SNMPv2原始报文内容：<br>00 23 5a 9e 58 b9 00 4c 41 49 50 55 08 00 45 00 00 7b 00 00 40 00 40 11 a5 1b c0 a8 0a 01 c0 a8 0a 05 0c 01 00 a2 00 67 04 bb 30 5d 02 01 01 04 06 70 75 62 6c 69 63 a7 50 02 04 17 73 2c fb 02 01 00 02 01 00 30 42 30 0d 06 08 2b 06 01 02 01 01 03 00 43 01 0e 30 17 06 0a 2b 06 01 06 03 01 01 04 01 00 06 09 2b 06 01 06 03 01 01 05 01 30 18 06 0a 2b 06 01 06 03 01 01 04 03 00 06 0a 2b 06 01 04 01 bf 08 03 02 0a</p>\n<p>目的MAC：00 23 5a 9e 58 b9<br>源MAC：00 4c 41 49 50 55<br>协议类型：08 00，IP报文<br>IP头：45 00 00 7b 00 00 40 00 40 11 a5 1b c0 a8 0a 01 c0 a8 0a 05<br>UDP头：0c 01 00 a2 00 67 04 bb<br>余下部分全为SNMP报文内容，这里我们做一下简单的约定：<br>xx 标注类型；xx 标注长度；xx 标注真正的数据。<br>这样一来上面这串原始数据就好分析多了</p>\n<ul>\n<li>30 5d 整个SNMP报文的编码方式为30，即SEQUENCE类型，报文长度93(0x5d)字节；</li>\n<li>02 01 01 版本号01即v2版本；</li>\n<li>04 06 70 75 62 6c 69 63 团体名70 75 62 6c 69 63  即英文的“public”；</li>\n<li>a7 50 a7表示trap类型为7，即厂商自定义trap；50表示PDU区段占80(0x50)字节；</li>\n<li>02 04 17 73 2c fb 请求ID为17 73 2c fb 十进制的393424123；</li>\n<li>02 01 00 错误状态0；</li>\n<li>02 01 00 错误索引0；</li>\n<li>30 42 “变量名-值”对编码类型30 即SEQUENCE类型；“变量名-值”所占总字节0x42，即66字节；</li>\n<li>30 0d 06 08 2b 06 01 02 01 01 03 00 43 01 0e 第一个“名-值”对区段编码方式30 即SEQUENCE类型；第一个“名-值”对总长度0x0d，13字节；第一个变量名的编码类型0x06，时间标签；第一个变量名占0x08个字节；第一个变量名2b 06 01 02 01 01 03 00，为1.3.6.1.2.1.1.3.0；第一个变量值为0x0e，即14；</li>\n<li>30 17 06 0a 2b 06 01 06 03 01 01 04 01 00 06 09 2b 06 01 06 03 01 01 05 01 第二个“名-值”对；变量名1.3.6.1.6.3.1.1.4.1.0；变量值1.3.6.1.6.3.1.1.5.1；</li>\n<li>30 18 06 0a 2b 06 01 06 03 01 01 04 03 00 06 0a 2b 06 01 04 01 bf 08 03 02 0a 第三个“名-值”对；变量名1.3.6.1.6.3.1.1.4.3.0；变量值1.3.6.1.4.1.8072.3.2.10；</li>\n</ul>\n<h2 id=\"今天我们简单对SNMP协议做个入门普及，包括它的原理，应用场景报文格式等。下面的章节，我们将以开源net-snmp为例来向大家阐述多种代理开发流程和原理，以及要注意的问题，其中每种扩展mib的方式都对应不同的开发需求。\"><a href=\"#今天我们简单对SNMP协议做个入门普及，包括它的原理，应用场景报文格式等。下面的章节，我们将以开源net-snmp为例来向大家阐述多种代理开发流程和原理，以及要注意的问题，其中每种扩展mib的方式都对应不同的开发需求。\" class=\"headerlink\" title=\"今天我们简单对SNMP协议做个入门普及，包括它的原理，应用场景报文格式等。下面的章节，我们将以开源net-snmp为例来向大家阐述多种代理开发流程和原理，以及要注意的问题，其中每种扩展mib的方式都对应不同的开发需求。\"></a>今天我们简单对SNMP协议做个入门普及，包括它的原理，应用场景报文格式等。下面的章节，我们将以开源net-snmp为例来向大家阐述多种代理开发流程和原理，以及要注意的问题，其中每种扩展mib的方式都对应不同的开发需求。</h2>","site":{"data":{}},"excerpt":"<p>这篇博客简要介绍了snmp协议的基本概念<br>","more":"</p>\n<h2 id=\"1-SNMP简单概述\"><a href=\"#1-SNMP简单概述\" class=\"headerlink\" title=\"1 SNMP简单概述\"></a>1 SNMP简单概述</h2><h3 id=\"1-1-什么是SNMP\"><a href=\"#1-1-什么是SNMP\" class=\"headerlink\" title=\"1.1 什么是SNMP?\"></a>1.1 什么是SNMP?</h3><p>　　SNMP是英文”Simple Network Management Protocol”的缩写，中文意思是“简单的网络管理协议”。它属于TCP/IP五层协议中的应用层协议，用于网络管理的协议。SNMP主要用于网络设备的管理。由于SNMP协议简单可靠 ，受到了众多厂商的欢迎，成为了目前最为广泛的网管协议。<br>　　SNMP协议主要由两大部分组成：<strong>SNMP管理站</strong>和<strong>SNMP代理</strong>。SNMP管理站是一个中心节点，负责收集维护各个SNMP元素的信息，并对这些信息进行处理，最后反馈给网络管理员；而SNMP代理是运行在各个被管理的网络节点之上，负责统计该节点的各项信息，并且负责与SNMP管理站交互，接收并执行管理站的命令，上传各种本地的网络信息。<br>　　SNMP管理站和SNMP代理之间是松散耦合。他们之间的通信是通过UDP协议完成的。一般情况下，SNMP管理站通过UDP协议向SNMP代理发送各种命令，当SNMP代理收到命令后，返回SNMP管理站需要的参数。但是当SNMP代理检测到网络元素异常的时候，也可以主动向SNMP管理站发送消息，通告当前异常状况。<br>　　SNMP的基本思想：为不同种类的设备、不同厂家生产的设备、不同型号的设备，定义为一个统一的接口和协议，使得管理员可以是使用统一的外观面对这些需要管理的网络设备进行管理。通过网络，管理员可以管理位于不同物理空间的设备，从而大大提高网络管理的效率，简化网络管理员的工作。<br>　　SNMP的工作方式：管理员需要向设备获取数据，所以SNMP提供了【读】操作；管理员需要向设备执行设置操作，所以SNMP提供了【写】操作；设备需要在重要状况改变的时候，向管理员通报事件的发生，所以SNMP提供了【Trap】操作。</p>\n<h3 id=\"1-2-SNMP和UDP\"><a href=\"#1-2-SNMP和UDP\" class=\"headerlink\" title=\"1.2 SNMP和UDP\"></a>1.2 SNMP和UDP</h3><p>SNMP采用UDP协议在管理端和agent之间传输信息。 SNMP采用UDP161端口接收和发送请求，162端口接收trap，执行SNMP的设备缺省都必须采用这些端口。SNMP消息全部通过UDP端口161接收，只有Trap信息采用UDP端口162。</p>\n<h3 id=\"1-3-Snmp版本\"><a href=\"#1-3-Snmp版本\" class=\"headerlink\" title=\"1.3 Snmp版本\"></a>1.3 Snmp版本</h3><p>SNMP目前共有v1，v2，v3这三个版本： </p>\n<ul>\n<li>SNMP v1是SNMP协议的最初版本，不过依然是众多厂家实现SNMP基本方式。 </li>\n<li>SNMP v2通常被指是基于community的SNMP V2。Community实质上就是密码。</li>\n<li>SNMP v3 是最新版本的SNMP。它对网络管理最大的贡献在于其安全性。增加了对认证和密文传输的支持。</li>\n</ul>\n<h2 id=\"2-SNMP工作原理\"><a href=\"#2-SNMP工作原理\" class=\"headerlink\" title=\"2 SNMP工作原理\"></a>2 SNMP工作原理</h2><p>　　在具体的实现上，SNMP为管理员提供了一个网管平台（NMS），又称为管理站，负责网管命令的发出、数据存储及数据分析。被监管的设备上运行一个SNMP代理（Agent），代理实现设备与管理站的SNMP通信。<br>　　<img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274236dktq.jpg\" alt=\"snmp工作原理\"><br>　　管理站和代理端使用MIB进行接口统一，MIB定义了设备中的被管理对象。管理站和代理都实现相应的MIB对象，使得双方可以识别对方的数据，实现通信。管理站向代理请求MIB中定义的数据，代理端识别后，将管理设备提供的相关状态或参数等数据转换成MIB定义的格式，最后将该信息返回给管理站，完成一次管理操作。\n　　</p>\n<h2 id=\"3-SNMP报文\"><a href=\"#3-SNMP报文\" class=\"headerlink\" title=\"3 SNMP报文\"></a>3 SNMP报文</h2><h3 id=\"3-1-报文类型\"><a href=\"#3-1-报文类型\" class=\"headerlink\" title=\"3.1 报文类型\"></a>3.1 报文类型</h3><p>　　SNMP中定义了五种消息类型：Get-Request、Get-Response、Get-Next-Request、Set-Request和Trap。</p>\n<ul>\n<li>Get-Request 、Get-Next-Request与Get-Response<br>SNMP 管理站用Get-Request消息从拥有SNMP代理的网络设备中检索信息，而SNMP代理则用Get-Response消息响应。Get-Next- Request用于和Get-Request组合起来查询特定的表对象中的列元素。</li>\n<li>Set-Request SNMP管理站用Set-Request 可以对网络设备进行远程配置（包括设备名、设备属性、删除设备或使某一个设备属性有效/无效等）。</li>\n<li>Trap SNMP代理使用Trap向SNMP管理站发送非请求消息，一般用于描述某一事件的发生，如接口UP/DOWN，IP地址更改等。</li>\n</ul>\n<p>上面五种消息中Get-Request、Get-Next-Request和Set-Request是由管理站发送到代理侧的161端口的；后面两种Get-Response和Trap 是由代理进程发给管理进程的，其中Trap消息被发送到管理进程的162端口，所有数据都是走UDP封装。SNMP工作流程如图2：<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274238733S.jpg\" alt=\"SNMP工作流程\"></p>\n<h3 id=\"3-2-报文格式\"><a href=\"#3-2-报文格式\" class=\"headerlink\" title=\"3.2 报文格式\"></a>3.2 报文格式</h3><p>SNMP代理和管理站通过SNMP协议中的标准消息进行通信，每个消息都是一个单独的数据报。SNMP使用UDP（用户数据报协议）作为第四层协议（传输协议），进行无连接操作。SNMP消息报文包含两个部分：SNMP报头和协议数据单元PDU。<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274240Yo8Q.jpg\" alt=\"SNMP报文格式\"></p>\n<p><strong>以下部分是报文格式的具体分析，有需要可以继续学习。</strong></p>\n<p>　　在实际网络传输环境下，SNMP报文的长度取决于其所采用的编码方式。SNMP统一采用BER(Basic Encoding Rule)的编码规则，同时在正式SNMP规范中使用的是ASN.1语法，Abastract Syntax Notation v1，即抽象语法描述语言。这两个概念在后面实践环节再做进一步介绍，这里只要稍微了解一下即可，不妨碍我们对协议本身的分析。这里我们简单解释一下BER编码规则：<br>　　BER作为ANS.1的基本编码规则，描述具体的ANS.1对象如何编码为比特流在网络上进行传输。BER编码规则由三部分组成：<br>　　<img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_134027424269yP.jpg\" alt=\"BER编码方式\"><br>    SNMP中定义了几种基本的数据类型，其中v1和v2版有些改动，具体参见相应的RFC文档。这里我们只介绍几种最常见的类型：</p>\n<ul>\n<li>INTEGER：一个整数</li>\n<li>OCTER STRING： 0或多个8bit字节，每个字节在0~255之间取值</li>\n<li>DisplayString：0或多个8bit字节，每个字节必须是ASCII码。在MIB-II中，所有该类型变量不能超过255个字符(0个字符可以)</li>\n<li>NULL：代表相关的变量没有值</li>\n<li>IpAddress：4字节长的OCTER STRING，以网络字节序表示IP地址</li>\n<li>PhyAddress：6字节长的OCTER STRING，代表物理地址</li>\n<li>Counter：非负整数，可以从0递增到232-1()。达到最大值后归0</li>\n<li>TimeTicks：时间计数器，以0.01秒为单位递增，不同的变量可以有不同的递增幅度。所以在定义这种类型的变量时需要制定递增幅度</li>\n<li>SEQUENCE：与C语言中的结构体类似</li>\n<li>SEQUENCE OF：一个向量，参见后面ANS.1语法详细介绍章节</li>\n</ul>\n<p>SNMP报文在传输层是封装在UDP报文中的，而UDP又是基于IP网络的，因此，我们可以得到完整的报文描述结构，如下图所示：<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274245phSV.jpg\" alt=\"SNMP协议报文格式\"><br>PDU类型其实包含两个字节，第一个字节表示真实的PDU的类型；第二个字节表示后面报文所占的字节总数。针对SNMPv1，这个字段取值如下：<br>| PDU类型  | 名 称   |<br>| :——–: | :—–:  |<br>| 0     | get-request |<br>| 1        |   get-next-request   |<br>| 2        |    get-response    |<br>| 3        |    set-request   |<br>| 4        |    trap   |<br>　　也就是说，trap的类型是4。但是在数据报文中，该字段一般表示为ax，其中x取[0,4]，即a0~a3表示相应的get、set等操作，a4表示trap报文。这里除了类型字段意外，其他字段均采用BER编码方式：<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274247srSc.jpg\" alt=\"采用BER编码的字段\"><br>　　<br><strong>实战演练之报文格式分析</strong><br>　　Trap报文格式和上述图5所展示的结构有些差别，这里我们只分析SNMPv1和SNMPv2的Trap报文格式。trap报文前面的部分都一样，区别在PDU协议数据单元部分。</p>\n<p>SNMPv1 Trap报文<br>SNMPv1的Trap报文格式如下所示：<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_134027425066MR.jpg\" alt=\"SNMPv1的Trap报文格式\"><br>注意：除了PDU类型和PDU长度字段外，后面的每个字段都是BER编码方式。<br>    trap类型”可以取以下值，其中0~6是已定义的特定trap，7及其以后的类型由供应商自定义。<br>表2 trap类型、名称及描述信息<br>| trap类型        | 名称   |  描述信息  |<br>| :——–:   | :—–:  | :—-:  |<br>| ０     | coldStart |   代理进程对自己初始化     |<br>| １        |   warmStart   |   代理进程对自己重新初始化   |<br>| ２        |   linkDown    |  一个接口已从工作状态变为故障状态(报文中的第一个变量标识此接口)  |<br>| ３     | linkUp |  一个接口已从故障状态变为工作状态(报文中的第一个变量标识此接口)     |<br>| ４        |   authenticationFailure   |   从SNMP管理进程收到无效共同体的报文   |<br>| ５        |    egpNeighborLoss    |  一个EGP邻站已变为故障状态(报文中的第一个变量包含邻站IP地址) |<br>| ６     | enterpriseSpecific |   在这个特定的代码段中查找trap信息     |<br>　　通过wireshark抓包工具，捕获一条如下的SNMP报文，接下来对其进行仔细分析。<br>SNMPv1原始报文内容：</p>\n<p><font color=\"green\">00 23 5a 9e 58 b9</font> <font color=\"blue\">00 4c 41 49 50 55</font> <font color=\"red\">08 005</font> <font color=\"gold\">45 00 00 48 00 00 40 00 40 11 a5 4e c0 a8 0a 01 c0 a8 0a 05</font> <font color=\"purple\">0c 00 00 a2 00 34 ff e0</font> 30 2a 02 01 00 04 06 70 75 62 6c 69 63 a4 1d 06 0a 2b 06 01 04 01 bf 08 03 02 0a 40 04 c0 a8 0a 01 02 01 00 02 01 00 43 01 0e 30 00</p>\n<p>目的MAC：<font color=\"green\">00 23 5a 9e 58 b9</font><br>源MAC：<font color=\"blue\">00 4c 41 49 50 55</font><br>协议类型：<font color=\"red\">08 005</font> ，为IP数据报<br>IP头：<font color=\"gold\">45 00 00 48 00 00 40 00 40 11 a5 4e c0 a8 0a 01 c0 a8 0a 05</font><br>UDP头：<font color=\"purple\">0c 00 00 a2 00 34 ff e0</font><br>其余部分都为SNMP报文，接下来我们对照前面的报文结构体来逐个分析一下。</p>\n<ul>\n<li>30 表示SNMP消息是ASN.1的SEQUENCE类型；</li>\n<li>2a 表示该SNMP报文的总长度是42(0x2a)个字节，该字段所表示的报文长度起始于它后面的第一个字节直到报文结束；</li>\n<li>02 01 00 表示版本号，可见其确实为BER编码方式。02表示该字段是INTEGER类型；01表示该字段占1个字节；00表示版本号，该值为“版本号-1”；</li>\n<li>04 06 70 75 62 6c 69 63 表示团体名，04表示该字段为OCTET STRING类型；06表示该字段占6个字节；70 75 62 6c 69 63 表示团体名的ANSII码的十六进制形式，这里是“public”；</li>\n<li>a4 1d 其中a4中的“4”表示这是一个trap报文，a4又叫报文的标签标记；1d表示后面还有29(0x1d)个字节的数据；</li>\n<li>06 0a 2b 06 01 04 01 bf 08 03 02 0a 企业OID标识。06表示该字段是个对象标识符，OBJECT IDENTIFIER；0a表示该字段占10(0x0a)个字节；关于SNMP的OID的编码方式有些奇特：例如1.3.6.1.2…. 取前两个数字分别记为x和y。编码时40<em>x+y，这里x=1，y=3，因此结果为40</em>1+3=43，即表示十六进制的2b。因此，这里的企业OID编码即为1.3.6.1.4.1.8072.3.2.10；</li>\n<li>40 04 c0 a8 0a 01 同样40表示该字段为OCTET STRING 类型；04表示IP地址占4个字节；IP地址为192.168.10.1；</li>\n<li>02 01 00 其中00表示trap类型为coldStart；</li>\n<li>02 01 00 其中00表示我们指定的trap即specific-trap也为coldStart类型；</li>\n<li>43 01 0e 43表示为TimeTicks类型；01表示该字段占1个字节；0e即十进制的14表示时间标签为0.14秒，这里时间计数器以0.01秒递增；</li>\n<li>30 00 30表示“键-值”值对的编码类型为SEQUENCE；00表示该字段占0个字节，即没有该字段。</li>\n</ul>\n<p>SNMPv2 Trap报文<br>SNMPv2的Trap报文格式如图8所示：<br><img src=\"http://blog.chinaunix.net/attachment/201206/21/23069658_1340274252oJOX.jpg\" alt=\"SNMPv2的Trap报文格式\"><br>同样的，这里除了trap类型和报文长度是标准网络字节序之外，其余协议字段也均为BER编码方式。可以看到v2版的trap报文正在向统一的报文格式发展，已经非常类似普通的SNMP请求、响应报文了。<br>SNMPv2原始报文内容：<br>00 23 5a 9e 58 b9 00 4c 41 49 50 55 08 00 45 00 00 7b 00 00 40 00 40 11 a5 1b c0 a8 0a 01 c0 a8 0a 05 0c 01 00 a2 00 67 04 bb 30 5d 02 01 01 04 06 70 75 62 6c 69 63 a7 50 02 04 17 73 2c fb 02 01 00 02 01 00 30 42 30 0d 06 08 2b 06 01 02 01 01 03 00 43 01 0e 30 17 06 0a 2b 06 01 06 03 01 01 04 01 00 06 09 2b 06 01 06 03 01 01 05 01 30 18 06 0a 2b 06 01 06 03 01 01 04 03 00 06 0a 2b 06 01 04 01 bf 08 03 02 0a</p>\n<p>目的MAC：00 23 5a 9e 58 b9<br>源MAC：00 4c 41 49 50 55<br>协议类型：08 00，IP报文<br>IP头：45 00 00 7b 00 00 40 00 40 11 a5 1b c0 a8 0a 01 c0 a8 0a 05<br>UDP头：0c 01 00 a2 00 67 04 bb<br>余下部分全为SNMP报文内容，这里我们做一下简单的约定：<br>xx 标注类型；xx 标注长度；xx 标注真正的数据。<br>这样一来上面这串原始数据就好分析多了</p>\n<ul>\n<li>30 5d 整个SNMP报文的编码方式为30，即SEQUENCE类型，报文长度93(0x5d)字节；</li>\n<li>02 01 01 版本号01即v2版本；</li>\n<li>04 06 70 75 62 6c 69 63 团体名70 75 62 6c 69 63  即英文的“public”；</li>\n<li>a7 50 a7表示trap类型为7，即厂商自定义trap；50表示PDU区段占80(0x50)字节；</li>\n<li>02 04 17 73 2c fb 请求ID为17 73 2c fb 十进制的393424123；</li>\n<li>02 01 00 错误状态0；</li>\n<li>02 01 00 错误索引0；</li>\n<li>30 42 “变量名-值”对编码类型30 即SEQUENCE类型；“变量名-值”所占总字节0x42，即66字节；</li>\n<li>30 0d 06 08 2b 06 01 02 01 01 03 00 43 01 0e 第一个“名-值”对区段编码方式30 即SEQUENCE类型；第一个“名-值”对总长度0x0d，13字节；第一个变量名的编码类型0x06，时间标签；第一个变量名占0x08个字节；第一个变量名2b 06 01 02 01 01 03 00，为1.3.6.1.2.1.1.3.0；第一个变量值为0x0e，即14；</li>\n<li>30 17 06 0a 2b 06 01 06 03 01 01 04 01 00 06 09 2b 06 01 06 03 01 01 05 01 第二个“名-值”对；变量名1.3.6.1.6.3.1.1.4.1.0；变量值1.3.6.1.6.3.1.1.5.1；</li>\n<li>30 18 06 0a 2b 06 01 06 03 01 01 04 03 00 06 0a 2b 06 01 04 01 bf 08 03 02 0a 第三个“名-值”对；变量名1.3.6.1.6.3.1.1.4.3.0；变量值1.3.6.1.4.1.8072.3.2.10；</li>\n</ul>\n<h2 id=\"今天我们简单对SNMP协议做个入门普及，包括它的原理，应用场景报文格式等。下面的章节，我们将以开源net-snmp为例来向大家阐述多种代理开发流程和原理，以及要注意的问题，其中每种扩展mib的方式都对应不同的开发需求。\"><a href=\"#今天我们简单对SNMP协议做个入门普及，包括它的原理，应用场景报文格式等。下面的章节，我们将以开源net-snmp为例来向大家阐述多种代理开发流程和原理，以及要注意的问题，其中每种扩展mib的方式都对应不同的开发需求。\" class=\"headerlink\" title=\"今天我们简单对SNMP协议做个入门普及，包括它的原理，应用场景报文格式等。下面的章节，我们将以开源net-snmp为例来向大家阐述多种代理开发流程和原理，以及要注意的问题，其中每种扩展mib的方式都对应不同的开发需求。\"></a>今天我们简单对SNMP协议做个入门普及，包括它的原理，应用场景报文格式等。下面的章节，我们将以开源net-snmp为例来向大家阐述多种代理开发流程和原理，以及要注意的问题，其中每种扩展mib的方式都对应不同的开发需求。</h2>"},{"title":"SNMP学习总结(2)——snmp安装和配置","date":"2017-05-25T00:42:50.000Z","_content":"这篇博客简要介绍了snmp的安装\n<!-- more -->\n\n针对不同的操作系统有不同的操作流程，具体参见[孤傲苍狼的博客][1]。\n\n\n  [1]: http://www.cnblogs.com/xdp-gacl/category/613358.html","source":"_posts/SNMP学习总结(2)——snmp安装和配置.md","raw":"---\ntitle: SNMP学习总结(2)——snmp安装和配置\ndate: 2017-05-25 8:42:50\ncategories:\n  - SNMP\ntags:\n  - snmp\n  - network\n  - snmp4j\n---\n这篇博客简要介绍了snmp的安装\n<!-- more -->\n\n针对不同的操作系统有不同的操作流程，具体参见[孤傲苍狼的博客][1]。\n\n\n  [1]: http://www.cnblogs.com/xdp-gacl/category/613358.html","slug":"SNMP学习总结(2)——snmp安装和配置","published":1,"updated":"2017-06-14T02:43:49.406Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0eft0006ssvfltmx7von","content":"<p>这篇博客简要介绍了snmp的安装<br><a id=\"more\"></a></p>\n<p>针对不同的操作系统有不同的操作流程，具体参见<a href=\"http://www.cnblogs.com/xdp-gacl/category/613358.html\" target=\"_blank\" rel=\"external\">孤傲苍狼的博客</a>。</p>\n","site":{"data":{}},"excerpt":"<p>这篇博客简要介绍了snmp的安装<br>","more":"</p>\n<p>针对不同的操作系统有不同的操作流程，具体参见<a href=\"http://www.cnblogs.com/xdp-gacl/category/613358.html\" target=\"_blank\" rel=\"external\">孤傲苍狼的博客</a>。</p>"},{"title":"hexo+github搭建个人博客","date":"2017-04-27T10:54:43.000Z","_content":"## 1.前言\n使用github pages服务搭建博客的好处有：\n1.全是静态文件，访问速度快；\n2.免费方便，不用花一分钱就可以搭建一个自由的个人博客，不需要服务器不需要后台；\n3.可以随意绑定自己的域名，不仔细看的话根本看不出来你的网站是基于github的；\n4.数据绝对安全，基于github的版本管理，想恢复到哪个历史版本都行；\n5.博客内容可以轻松打包、转移、发布到其它平台；\n<!-- more -->\n6.等等；\n\n### 1.1准备工作\n\n - 创建github账号       [github注册地址](https://github.com/)\n - 安装node.js、npm     [node.js下载地址](https://nodejs.org/en/download/)\n - 安装git for windows  [git下载地址](https://git-scm.com/downloads)\n \n**本文所使用的环境**\n - windows10\n - git@1.9.5\n - node.js@6.10.2\n - hexo@\n\n## 2.搭建github博客\n### 2.1创建仓库\n登陆github,打开新建页面，如图![步骤一](/images/blog/newRepository.png)\n![步骤二](/images/blog/step2.png)\n新建仓库名必须为**你的用户名.github.io**,假如说你的用户名是test,那仓库名为test.github.io,将来的博客访问地址就是http://test.github.io 了，是不是很方便？\n由此可见，每一个github账户最多只能创建一个这样可以直接使用域名访问的仓库。\n**几个注意的地方：**\n1.注册的邮箱一定要验证，否则不会成功；\n2.仓库名字必须是：username.github.io，其中username是你的用户名；\n3.仓库创建成功不会立即生效，需要过一段时间，大概10-30分钟，或者更久\n###2.2绑定域名\n这一步不是必须，若不绑定则可用默认的http://xxx.github.io来访问，若想自己拥有一个域名，则需要注册，这一步留待以后再将，直接下一步。\n## 3.配置SSH key\n为什么要配置这个呢？因为你提交代码肯定要拥有你的github权限才可以，但是直接使用用户名和密码太不安全了，所以我们使用ssh key来解决本地和服务器的连接问题。\n在电脑任意位置进入**git bash**\n`$ cd ~/. ssh #检查本机已存在的ssh密钥` \n如果提示：No such file or directory 说明你是第一次使用git\n`ssh-keygen -t rsa -C \"邮件地址\"`\n然后连续3次回车，最终会生成一个文件在用户目录下，打开用户目录，找到**.ssh\\id_rsa.pub**文件，文本编辑器打开并复制里面的内容，打开你的github主页，进入个人设置 -> SSH and GPG keys -> New SSH key：将刚复制的内容粘贴到key那里，title随便填，保存。\n![步骤三](/images/blog/step3.png)\n**测试是否设置成功**\n`$ ssh -T git@github.com # 注意邮箱地址不用改`\n如果提示Are you sure you want to continue connecting (yes/no)?，输入yes，然后会看到：\n\nHi xiaoyue! You've successfully authenticated, but GitHub does not provide shell access.\n\n看到这个信息说明SSH已配置成功！\n此时你还需要配置：\n```bash\n$ git config --global user.name \"liuxianan\"// 你的github用户名，非昵称\n$ git config --global user.email  \"xxx@qq.com\"// 填写你的github注册邮箱\n```\n\n## 4.使用hexo写博客\n### 4.1hexo简介\nHexo是一个简单、快速、强大的基于 Github Pages 的博客发布工具，支持Markdown格式，有众多优秀插件和主题。\n\n官网： http://hexo.io\ngithub: https://github.com/hexojs/hexo\n###4.2原理\n由于github pages存放的都是静态文件，博客存放的不只是文章内容，还有文章列表、分类、标签、翻页等动态内容，假如每次写完一篇文章都要手动更新博文目录和相关链接信息，相信谁都会疯掉，所以hexo所做的就是将这些md文件都放在本地，每次写完文章后调用写好的命令来批量完成相关页面的生成，然后再将有改动的页面提交到github。\n\n**注意事项**\n\n 1. 很多命令既可以用Windows的cmd来完成，也可以使用git bash来完成，但是部分命令会有一些问题，为避免不必要的问题，建议全部使用git bash来执行；\n 2. hexo不同版本差别比较大，网上很多文章的配置信息都是基于2.x的，所以注意不要被误导；\n 3. hexo有2种_config.yml文件，一个是根目录下的全局的_config.yml，一个是各个theme下的；\n\n**安装hexo**\n`$ npm install -g hexo`\n若上面的命令失败，建议使用下面的代理命令\n`此处输入代码`\n\n**初始化**\n在电脑的某个地方新建一个名为hexo的文件夹（名字可以随便取），比如我的是*F:\\Workspaces\\hexo*，由于这个文件夹将来就作为你存放代码的地方，所以最好不要随便放。\n`$ cd /f/Workspaces/hexo/`\n`$ hexo init`\nhexo会自动下载一些文件到这个目录，包括node_modules。继续执行下面两条命令\n`$ hexo g # 生成`\n`$ hexo s # 启动服务`\n执行以上命令之后，hexo就会在public文件夹生成相关html文件，这些文件将来都是要提交到github去的。\n\n**hexo s**是开启本地预览服务，打开浏览器访问 http://localhost:4000 即可看到内容，很多人会碰到浏览器一直在转圈但是就是加载不出来的问题，一般情况下是因为端口占用的缘故，因为4000这个端口太常见了，解决端口冲突问题请参考这篇文章：\n\nhttp://blog.liuxianan.com/windows-port-bind.html\n\n第一次初始化的时候hexo已经帮我们写了一篇名为 Hello World 的文章，默认的主题比较丑。\n\n## 5.配置主题\n### 5.1更换主题\n既然默认主题很丑，那我们别的不做，首先来替换一个好看点的主题。这是 [官方主题](https://hexo.io/themes/)。\n个人比较喜欢的主题：[hexo-theme-next](https://github.com/iissnan/hexo-theme-next) 和[hexo-theme-yilia](https://github.com/litten/hexo-theme-yilia)\n以next主题为例，首先clone这个主题：\n\n进入之前建立的hexo目录，在git bash中执行clone命令\n\n`$ git clone https://github.com/iissnan/hexo-theme-next.git themes/next`\n\n下载的主题到了hexo>theme文件夹下。\n修改##hexo##根目录下的**_config.yml**文件中的**theme: landscape**改为**theme: yilia**，然后重新执行**hexo g**来重新生成静态文件，**hexo s**部署到本地，**localhost:4000**预览博客效果。\n\n如果出现一些莫名其妙的问题，可以先执行**hexo clean**来清理一下public的内容，然后再来重新生成和发布。\n\n","source":"_posts/hexo+github搭建个人博客.md","raw":"---\ntitle: hexo+github搭建个人博客\ndate: 2017-04-27 18:54:43\ncategories:\n\t- course\ntags:\n\t- github\n\t- hexo\n\t- next\n---\n## 1.前言\n使用github pages服务搭建博客的好处有：\n1.全是静态文件，访问速度快；\n2.免费方便，不用花一分钱就可以搭建一个自由的个人博客，不需要服务器不需要后台；\n3.可以随意绑定自己的域名，不仔细看的话根本看不出来你的网站是基于github的；\n4.数据绝对安全，基于github的版本管理，想恢复到哪个历史版本都行；\n5.博客内容可以轻松打包、转移、发布到其它平台；\n<!-- more -->\n6.等等；\n\n### 1.1准备工作\n\n - 创建github账号       [github注册地址](https://github.com/)\n - 安装node.js、npm     [node.js下载地址](https://nodejs.org/en/download/)\n - 安装git for windows  [git下载地址](https://git-scm.com/downloads)\n \n**本文所使用的环境**\n - windows10\n - git@1.9.5\n - node.js@6.10.2\n - hexo@\n\n## 2.搭建github博客\n### 2.1创建仓库\n登陆github,打开新建页面，如图![步骤一](/images/blog/newRepository.png)\n![步骤二](/images/blog/step2.png)\n新建仓库名必须为**你的用户名.github.io**,假如说你的用户名是test,那仓库名为test.github.io,将来的博客访问地址就是http://test.github.io 了，是不是很方便？\n由此可见，每一个github账户最多只能创建一个这样可以直接使用域名访问的仓库。\n**几个注意的地方：**\n1.注册的邮箱一定要验证，否则不会成功；\n2.仓库名字必须是：username.github.io，其中username是你的用户名；\n3.仓库创建成功不会立即生效，需要过一段时间，大概10-30分钟，或者更久\n###2.2绑定域名\n这一步不是必须，若不绑定则可用默认的http://xxx.github.io来访问，若想自己拥有一个域名，则需要注册，这一步留待以后再将，直接下一步。\n## 3.配置SSH key\n为什么要配置这个呢？因为你提交代码肯定要拥有你的github权限才可以，但是直接使用用户名和密码太不安全了，所以我们使用ssh key来解决本地和服务器的连接问题。\n在电脑任意位置进入**git bash**\n`$ cd ~/. ssh #检查本机已存在的ssh密钥` \n如果提示：No such file or directory 说明你是第一次使用git\n`ssh-keygen -t rsa -C \"邮件地址\"`\n然后连续3次回车，最终会生成一个文件在用户目录下，打开用户目录，找到**.ssh\\id_rsa.pub**文件，文本编辑器打开并复制里面的内容，打开你的github主页，进入个人设置 -> SSH and GPG keys -> New SSH key：将刚复制的内容粘贴到key那里，title随便填，保存。\n![步骤三](/images/blog/step3.png)\n**测试是否设置成功**\n`$ ssh -T git@github.com # 注意邮箱地址不用改`\n如果提示Are you sure you want to continue connecting (yes/no)?，输入yes，然后会看到：\n\nHi xiaoyue! You've successfully authenticated, but GitHub does not provide shell access.\n\n看到这个信息说明SSH已配置成功！\n此时你还需要配置：\n```bash\n$ git config --global user.name \"liuxianan\"// 你的github用户名，非昵称\n$ git config --global user.email  \"xxx@qq.com\"// 填写你的github注册邮箱\n```\n\n## 4.使用hexo写博客\n### 4.1hexo简介\nHexo是一个简单、快速、强大的基于 Github Pages 的博客发布工具，支持Markdown格式，有众多优秀插件和主题。\n\n官网： http://hexo.io\ngithub: https://github.com/hexojs/hexo\n###4.2原理\n由于github pages存放的都是静态文件，博客存放的不只是文章内容，还有文章列表、分类、标签、翻页等动态内容，假如每次写完一篇文章都要手动更新博文目录和相关链接信息，相信谁都会疯掉，所以hexo所做的就是将这些md文件都放在本地，每次写完文章后调用写好的命令来批量完成相关页面的生成，然后再将有改动的页面提交到github。\n\n**注意事项**\n\n 1. 很多命令既可以用Windows的cmd来完成，也可以使用git bash来完成，但是部分命令会有一些问题，为避免不必要的问题，建议全部使用git bash来执行；\n 2. hexo不同版本差别比较大，网上很多文章的配置信息都是基于2.x的，所以注意不要被误导；\n 3. hexo有2种_config.yml文件，一个是根目录下的全局的_config.yml，一个是各个theme下的；\n\n**安装hexo**\n`$ npm install -g hexo`\n若上面的命令失败，建议使用下面的代理命令\n`此处输入代码`\n\n**初始化**\n在电脑的某个地方新建一个名为hexo的文件夹（名字可以随便取），比如我的是*F:\\Workspaces\\hexo*，由于这个文件夹将来就作为你存放代码的地方，所以最好不要随便放。\n`$ cd /f/Workspaces/hexo/`\n`$ hexo init`\nhexo会自动下载一些文件到这个目录，包括node_modules。继续执行下面两条命令\n`$ hexo g # 生成`\n`$ hexo s # 启动服务`\n执行以上命令之后，hexo就会在public文件夹生成相关html文件，这些文件将来都是要提交到github去的。\n\n**hexo s**是开启本地预览服务，打开浏览器访问 http://localhost:4000 即可看到内容，很多人会碰到浏览器一直在转圈但是就是加载不出来的问题，一般情况下是因为端口占用的缘故，因为4000这个端口太常见了，解决端口冲突问题请参考这篇文章：\n\nhttp://blog.liuxianan.com/windows-port-bind.html\n\n第一次初始化的时候hexo已经帮我们写了一篇名为 Hello World 的文章，默认的主题比较丑。\n\n## 5.配置主题\n### 5.1更换主题\n既然默认主题很丑，那我们别的不做，首先来替换一个好看点的主题。这是 [官方主题](https://hexo.io/themes/)。\n个人比较喜欢的主题：[hexo-theme-next](https://github.com/iissnan/hexo-theme-next) 和[hexo-theme-yilia](https://github.com/litten/hexo-theme-yilia)\n以next主题为例，首先clone这个主题：\n\n进入之前建立的hexo目录，在git bash中执行clone命令\n\n`$ git clone https://github.com/iissnan/hexo-theme-next.git themes/next`\n\n下载的主题到了hexo>theme文件夹下。\n修改##hexo##根目录下的**_config.yml**文件中的**theme: landscape**改为**theme: yilia**，然后重新执行**hexo g**来重新生成静态文件，**hexo s**部署到本地，**localhost:4000**预览博客效果。\n\n如果出现一些莫名其妙的问题，可以先执行**hexo clean**来清理一下public的内容，然后再来重新生成和发布。\n\n","slug":"hexo+github搭建个人博客","published":1,"updated":"2017-04-28T07:25:38.787Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0efy0008ssvf9bdysl2x","content":"<h2 id=\"1-前言\"><a href=\"#1-前言\" class=\"headerlink\" title=\"1.前言\"></a>1.前言</h2><p>使用github pages服务搭建博客的好处有：<br>1.全是静态文件，访问速度快；<br>2.免费方便，不用花一分钱就可以搭建一个自由的个人博客，不需要服务器不需要后台；<br>3.可以随意绑定自己的域名，不仔细看的话根本看不出来你的网站是基于github的；<br>4.数据绝对安全，基于github的版本管理，想恢复到哪个历史版本都行；<br>5.博客内容可以轻松打包、转移、发布到其它平台；<br><a id=\"more\"></a><br>6.等等；</p>\n<h3 id=\"1-1准备工作\"><a href=\"#1-1准备工作\" class=\"headerlink\" title=\"1.1准备工作\"></a>1.1准备工作</h3><ul>\n<li>创建github账号       <a href=\"https://github.com/\" target=\"_blank\" rel=\"external\">github注册地址</a></li>\n<li>安装node.js、npm     <a href=\"https://nodejs.org/en/download/\" target=\"_blank\" rel=\"external\">node.js下载地址</a></li>\n<li>安装git for windows  <a href=\"https://git-scm.com/downloads\" target=\"_blank\" rel=\"external\">git下载地址</a></li>\n</ul>\n<p><strong>本文所使用的环境</strong></p>\n<ul>\n<li>windows10</li>\n<li>git@1.9.5</li>\n<li>node.js@6.10.2</li>\n<li>hexo@</li>\n</ul>\n<h2 id=\"2-搭建github博客\"><a href=\"#2-搭建github博客\" class=\"headerlink\" title=\"2.搭建github博客\"></a>2.搭建github博客</h2><h3 id=\"2-1创建仓库\"><a href=\"#2-1创建仓库\" class=\"headerlink\" title=\"2.1创建仓库\"></a>2.1创建仓库</h3><p>登陆github,打开新建页面，如图<img src=\"/images/blog/newRepository.png\" alt=\"步骤一\"><br><img src=\"/images/blog/step2.png\" alt=\"步骤二\"><br>新建仓库名必须为<strong>你的用户名.github.io</strong>,假如说你的用户名是test,那仓库名为test.github.io,将来的博客访问地址就是<a href=\"http://test.github.io\" target=\"_blank\" rel=\"external\">http://test.github.io</a> 了，是不是很方便？<br>由此可见，每一个github账户最多只能创建一个这样可以直接使用域名访问的仓库。<br><strong>几个注意的地方：</strong><br>1.注册的邮箱一定要验证，否则不会成功；<br>2.仓库名字必须是：username.github.io，其中username是你的用户名；<br>3.仓库创建成功不会立即生效，需要过一段时间，大概10-30分钟，或者更久</p>\n<p>###2.2绑定域名<br>这一步不是必须，若不绑定则可用默认的<a href=\"http://xxx.github.io来访问，若想自己拥有一个域名，则需要注册，这一步留待以后再将，直接下一步。\" target=\"_blank\" rel=\"external\">http://xxx.github.io来访问，若想自己拥有一个域名，则需要注册，这一步留待以后再将，直接下一步。</a></p>\n<h2 id=\"3-配置SSH-key\"><a href=\"#3-配置SSH-key\" class=\"headerlink\" title=\"3.配置SSH key\"></a>3.配置SSH key</h2><p>为什么要配置这个呢？因为你提交代码肯定要拥有你的github权限才可以，但是直接使用用户名和密码太不安全了，所以我们使用ssh key来解决本地和服务器的连接问题。<br>在电脑任意位置进入<strong>git bash</strong><br><code>$ cd ~/. ssh #检查本机已存在的ssh密钥</code><br>如果提示：No such file or directory 说明你是第一次使用git<br><code>ssh-keygen -t rsa -C &quot;邮件地址&quot;</code><br>然后连续3次回车，最终会生成一个文件在用户目录下，打开用户目录，找到<strong>.ssh\\id_rsa.pub</strong>文件，文本编辑器打开并复制里面的内容，打开你的github主页，进入个人设置 -&gt; SSH and GPG keys -&gt; New SSH key：将刚复制的内容粘贴到key那里，title随便填，保存。<br><img src=\"/images/blog/step3.png\" alt=\"步骤三\"><br><strong>测试是否设置成功</strong><br><code>$ ssh -T git@github.com # 注意邮箱地址不用改</code><br>如果提示Are you sure you want to continue connecting (yes/no)?，输入yes，然后会看到：</p>\n<p>Hi xiaoyue! You’ve successfully authenticated, but GitHub does not provide shell access.</p>\n<p>看到这个信息说明SSH已配置成功！<br>此时你还需要配置：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ git config --global user.name <span class=\"string\">\"liuxianan\"</span>// 你的github用户名，非昵称</div><div class=\"line\">$ git config --global user.email  <span class=\"string\">\"xxx@qq.com\"</span>// 填写你的github注册邮箱</div></pre></td></tr></table></figure></p>\n<h2 id=\"4-使用hexo写博客\"><a href=\"#4-使用hexo写博客\" class=\"headerlink\" title=\"4.使用hexo写博客\"></a>4.使用hexo写博客</h2><h3 id=\"4-1hexo简介\"><a href=\"#4-1hexo简介\" class=\"headerlink\" title=\"4.1hexo简介\"></a>4.1hexo简介</h3><p>Hexo是一个简单、快速、强大的基于 Github Pages 的博客发布工具，支持Markdown格式，有众多优秀插件和主题。</p>\n<p>官网： <a href=\"http://hexo.io\" target=\"_blank\" rel=\"external\">http://hexo.io</a><br>github: <a href=\"https://github.com/hexojs/hexo\" target=\"_blank\" rel=\"external\">https://github.com/hexojs/hexo</a></p>\n<p>###4.2原理<br>由于github pages存放的都是静态文件，博客存放的不只是文章内容，还有文章列表、分类、标签、翻页等动态内容，假如每次写完一篇文章都要手动更新博文目录和相关链接信息，相信谁都会疯掉，所以hexo所做的就是将这些md文件都放在本地，每次写完文章后调用写好的命令来批量完成相关页面的生成，然后再将有改动的页面提交到github。</p>\n<p><strong>注意事项</strong></p>\n<ol>\n<li>很多命令既可以用Windows的cmd来完成，也可以使用git bash来完成，但是部分命令会有一些问题，为避免不必要的问题，建议全部使用git bash来执行；</li>\n<li>hexo不同版本差别比较大，网上很多文章的配置信息都是基于2.x的，所以注意不要被误导；</li>\n<li>hexo有2种_config.yml文件，一个是根目录下的全局的_config.yml，一个是各个theme下的；</li>\n</ol>\n<p><strong>安装hexo</strong><br><code>$ npm install -g hexo</code><br>若上面的命令失败，建议使用下面的代理命令<br><code>此处输入代码</code></p>\n<p><strong>初始化</strong><br>在电脑的某个地方新建一个名为hexo的文件夹（名字可以随便取），比如我的是<em>F:\\Workspaces\\hexo</em>，由于这个文件夹将来就作为你存放代码的地方，所以最好不要随便放。<br><code>$ cd /f/Workspaces/hexo/</code><br><code>$ hexo init</code><br>hexo会自动下载一些文件到这个目录，包括node_modules。继续执行下面两条命令<br><code>$ hexo g # 生成</code><br><code>$ hexo s # 启动服务</code><br>执行以上命令之后，hexo就会在public文件夹生成相关html文件，这些文件将来都是要提交到github去的。</p>\n<p><strong>hexo s</strong>是开启本地预览服务，打开浏览器访问 <a href=\"http://localhost:4000\" target=\"_blank\" rel=\"external\">http://localhost:4000</a> 即可看到内容，很多人会碰到浏览器一直在转圈但是就是加载不出来的问题，一般情况下是因为端口占用的缘故，因为4000这个端口太常见了，解决端口冲突问题请参考这篇文章：</p>\n<p><a href=\"http://blog.liuxianan.com/windows-port-bind.html\" target=\"_blank\" rel=\"external\">http://blog.liuxianan.com/windows-port-bind.html</a></p>\n<p>第一次初始化的时候hexo已经帮我们写了一篇名为 Hello World 的文章，默认的主题比较丑。</p>\n<h2 id=\"5-配置主题\"><a href=\"#5-配置主题\" class=\"headerlink\" title=\"5.配置主题\"></a>5.配置主题</h2><h3 id=\"5-1更换主题\"><a href=\"#5-1更换主题\" class=\"headerlink\" title=\"5.1更换主题\"></a>5.1更换主题</h3><p>既然默认主题很丑，那我们别的不做，首先来替换一个好看点的主题。这是 <a href=\"https://hexo.io/themes/\" target=\"_blank\" rel=\"external\">官方主题</a>。<br>个人比较喜欢的主题：<a href=\"https://github.com/iissnan/hexo-theme-next\" target=\"_blank\" rel=\"external\">hexo-theme-next</a> 和<a href=\"https://github.com/litten/hexo-theme-yilia\" target=\"_blank\" rel=\"external\">hexo-theme-yilia</a><br>以next主题为例，首先clone这个主题：</p>\n<p>进入之前建立的hexo目录，在git bash中执行clone命令</p>\n<p><code>$ git clone https://github.com/iissnan/hexo-theme-next.git themes/next</code></p>\n<p>下载的主题到了hexo&gt;theme文件夹下。<br>修改##hexo##根目录下的<strong>_config.yml</strong>文件中的<strong>theme: landscape</strong>改为<strong>theme: yilia</strong>，然后重新执行<strong>hexo g</strong>来重新生成静态文件，<strong>hexo s</strong>部署到本地，<strong>localhost:4000</strong>预览博客效果。</p>\n<p>如果出现一些莫名其妙的问题，可以先执行<strong>hexo clean</strong>来清理一下public的内容，然后再来重新生成和发布。</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"1-前言\"><a href=\"#1-前言\" class=\"headerlink\" title=\"1.前言\"></a>1.前言</h2><p>使用github pages服务搭建博客的好处有：<br>1.全是静态文件，访问速度快；<br>2.免费方便，不用花一分钱就可以搭建一个自由的个人博客，不需要服务器不需要后台；<br>3.可以随意绑定自己的域名，不仔细看的话根本看不出来你的网站是基于github的；<br>4.数据绝对安全，基于github的版本管理，想恢复到哪个历史版本都行；<br>5.博客内容可以轻松打包、转移、发布到其它平台；<br>","more":"<br>6.等等；</p>\n<h3 id=\"1-1准备工作\"><a href=\"#1-1准备工作\" class=\"headerlink\" title=\"1.1准备工作\"></a>1.1准备工作</h3><ul>\n<li>创建github账号       <a href=\"https://github.com/\" target=\"_blank\" rel=\"external\">github注册地址</a></li>\n<li>安装node.js、npm     <a href=\"https://nodejs.org/en/download/\" target=\"_blank\" rel=\"external\">node.js下载地址</a></li>\n<li>安装git for windows  <a href=\"https://git-scm.com/downloads\" target=\"_blank\" rel=\"external\">git下载地址</a></li>\n</ul>\n<p><strong>本文所使用的环境</strong></p>\n<ul>\n<li>windows10</li>\n<li>git@1.9.5</li>\n<li>node.js@6.10.2</li>\n<li>hexo@</li>\n</ul>\n<h2 id=\"2-搭建github博客\"><a href=\"#2-搭建github博客\" class=\"headerlink\" title=\"2.搭建github博客\"></a>2.搭建github博客</h2><h3 id=\"2-1创建仓库\"><a href=\"#2-1创建仓库\" class=\"headerlink\" title=\"2.1创建仓库\"></a>2.1创建仓库</h3><p>登陆github,打开新建页面，如图<img src=\"/images/blog/newRepository.png\" alt=\"步骤一\"><br><img src=\"/images/blog/step2.png\" alt=\"步骤二\"><br>新建仓库名必须为<strong>你的用户名.github.io</strong>,假如说你的用户名是test,那仓库名为test.github.io,将来的博客访问地址就是<a href=\"http://test.github.io\" target=\"_blank\" rel=\"external\">http://test.github.io</a> 了，是不是很方便？<br>由此可见，每一个github账户最多只能创建一个这样可以直接使用域名访问的仓库。<br><strong>几个注意的地方：</strong><br>1.注册的邮箱一定要验证，否则不会成功；<br>2.仓库名字必须是：username.github.io，其中username是你的用户名；<br>3.仓库创建成功不会立即生效，需要过一段时间，大概10-30分钟，或者更久</p>\n<p>###2.2绑定域名<br>这一步不是必须，若不绑定则可用默认的<a href=\"http://xxx.github.io来访问，若想自己拥有一个域名，则需要注册，这一步留待以后再将，直接下一步。\" target=\"_blank\" rel=\"external\">http://xxx.github.io来访问，若想自己拥有一个域名，则需要注册，这一步留待以后再将，直接下一步。</a></p>\n<h2 id=\"3-配置SSH-key\"><a href=\"#3-配置SSH-key\" class=\"headerlink\" title=\"3.配置SSH key\"></a>3.配置SSH key</h2><p>为什么要配置这个呢？因为你提交代码肯定要拥有你的github权限才可以，但是直接使用用户名和密码太不安全了，所以我们使用ssh key来解决本地和服务器的连接问题。<br>在电脑任意位置进入<strong>git bash</strong><br><code>$ cd ~/. ssh #检查本机已存在的ssh密钥</code><br>如果提示：No such file or directory 说明你是第一次使用git<br><code>ssh-keygen -t rsa -C &quot;邮件地址&quot;</code><br>然后连续3次回车，最终会生成一个文件在用户目录下，打开用户目录，找到<strong>.ssh\\id_rsa.pub</strong>文件，文本编辑器打开并复制里面的内容，打开你的github主页，进入个人设置 -&gt; SSH and GPG keys -&gt; New SSH key：将刚复制的内容粘贴到key那里，title随便填，保存。<br><img src=\"/images/blog/step3.png\" alt=\"步骤三\"><br><strong>测试是否设置成功</strong><br><code>$ ssh -T git@github.com # 注意邮箱地址不用改</code><br>如果提示Are you sure you want to continue connecting (yes/no)?，输入yes，然后会看到：</p>\n<p>Hi xiaoyue! You’ve successfully authenticated, but GitHub does not provide shell access.</p>\n<p>看到这个信息说明SSH已配置成功！<br>此时你还需要配置：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ git config --global user.name <span class=\"string\">\"liuxianan\"</span>// 你的github用户名，非昵称</div><div class=\"line\">$ git config --global user.email  <span class=\"string\">\"xxx@qq.com\"</span>// 填写你的github注册邮箱</div></pre></td></tr></table></figure></p>\n<h2 id=\"4-使用hexo写博客\"><a href=\"#4-使用hexo写博客\" class=\"headerlink\" title=\"4.使用hexo写博客\"></a>4.使用hexo写博客</h2><h3 id=\"4-1hexo简介\"><a href=\"#4-1hexo简介\" class=\"headerlink\" title=\"4.1hexo简介\"></a>4.1hexo简介</h3><p>Hexo是一个简单、快速、强大的基于 Github Pages 的博客发布工具，支持Markdown格式，有众多优秀插件和主题。</p>\n<p>官网： <a href=\"http://hexo.io\" target=\"_blank\" rel=\"external\">http://hexo.io</a><br>github: <a href=\"https://github.com/hexojs/hexo\" target=\"_blank\" rel=\"external\">https://github.com/hexojs/hexo</a></p>\n<p>###4.2原理<br>由于github pages存放的都是静态文件，博客存放的不只是文章内容，还有文章列表、分类、标签、翻页等动态内容，假如每次写完一篇文章都要手动更新博文目录和相关链接信息，相信谁都会疯掉，所以hexo所做的就是将这些md文件都放在本地，每次写完文章后调用写好的命令来批量完成相关页面的生成，然后再将有改动的页面提交到github。</p>\n<p><strong>注意事项</strong></p>\n<ol>\n<li>很多命令既可以用Windows的cmd来完成，也可以使用git bash来完成，但是部分命令会有一些问题，为避免不必要的问题，建议全部使用git bash来执行；</li>\n<li>hexo不同版本差别比较大，网上很多文章的配置信息都是基于2.x的，所以注意不要被误导；</li>\n<li>hexo有2种_config.yml文件，一个是根目录下的全局的_config.yml，一个是各个theme下的；</li>\n</ol>\n<p><strong>安装hexo</strong><br><code>$ npm install -g hexo</code><br>若上面的命令失败，建议使用下面的代理命令<br><code>此处输入代码</code></p>\n<p><strong>初始化</strong><br>在电脑的某个地方新建一个名为hexo的文件夹（名字可以随便取），比如我的是<em>F:\\Workspaces\\hexo</em>，由于这个文件夹将来就作为你存放代码的地方，所以最好不要随便放。<br><code>$ cd /f/Workspaces/hexo/</code><br><code>$ hexo init</code><br>hexo会自动下载一些文件到这个目录，包括node_modules。继续执行下面两条命令<br><code>$ hexo g # 生成</code><br><code>$ hexo s # 启动服务</code><br>执行以上命令之后，hexo就会在public文件夹生成相关html文件，这些文件将来都是要提交到github去的。</p>\n<p><strong>hexo s</strong>是开启本地预览服务，打开浏览器访问 <a href=\"http://localhost:4000\" target=\"_blank\" rel=\"external\">http://localhost:4000</a> 即可看到内容，很多人会碰到浏览器一直在转圈但是就是加载不出来的问题，一般情况下是因为端口占用的缘故，因为4000这个端口太常见了，解决端口冲突问题请参考这篇文章：</p>\n<p><a href=\"http://blog.liuxianan.com/windows-port-bind.html\" target=\"_blank\" rel=\"external\">http://blog.liuxianan.com/windows-port-bind.html</a></p>\n<p>第一次初始化的时候hexo已经帮我们写了一篇名为 Hello World 的文章，默认的主题比较丑。</p>\n<h2 id=\"5-配置主题\"><a href=\"#5-配置主题\" class=\"headerlink\" title=\"5.配置主题\"></a>5.配置主题</h2><h3 id=\"5-1更换主题\"><a href=\"#5-1更换主题\" class=\"headerlink\" title=\"5.1更换主题\"></a>5.1更换主题</h3><p>既然默认主题很丑，那我们别的不做，首先来替换一个好看点的主题。这是 <a href=\"https://hexo.io/themes/\" target=\"_blank\" rel=\"external\">官方主题</a>。<br>个人比较喜欢的主题：<a href=\"https://github.com/iissnan/hexo-theme-next\" target=\"_blank\" rel=\"external\">hexo-theme-next</a> 和<a href=\"https://github.com/litten/hexo-theme-yilia\" target=\"_blank\" rel=\"external\">hexo-theme-yilia</a><br>以next主题为例，首先clone这个主题：</p>\n<p>进入之前建立的hexo目录，在git bash中执行clone命令</p>\n<p><code>$ git clone https://github.com/iissnan/hexo-theme-next.git themes/next</code></p>\n<p>下载的主题到了hexo&gt;theme文件夹下。<br>修改##hexo##根目录下的<strong>_config.yml</strong>文件中的<strong>theme: landscape</strong>改为<strong>theme: yilia</strong>，然后重新执行<strong>hexo g</strong>来重新生成静态文件，<strong>hexo s</strong>部署到本地，<strong>localhost:4000</strong>预览博客效果。</p>\n<p>如果出现一些莫名其妙的问题，可以先执行<strong>hexo clean</strong>来清理一下public的内容，然后再来重新生成和发布。</p>"},{"title":"SNMP学习总结(3)——SNMP4J","date":"2017-05-25T00:42:50.000Z","_content":"这篇博客简要介绍了snmp4j协议栈的基本使用\n<!-- more -->\n## 1 snmp4j简介\n　　SNMP4J是一个用Java来实现SNMP(简单网络管理协议)协议的开源项目.它支持以命令行的形式进行管理与响应。SNMP4J是纯面向对象设计与SNMP++(用C++实现SNMPv1/v2c/v3)相类似。\n　　SNMP4J API 提供以下下特性：\n\n         - 支持MD5和SHA验证，DES，3DES,AES128、AES192和AES256加密的SNMPv3。\n         - 支持MPv1,MPv2C和MPv3，带执行的可阻塞的信息处理模块。\n         - 全部PDU格式。\n         - 可阻塞的传输拓扑。支持UPD、TCP、TLS 。\n         - 可阻塞的超时模块。\n         - 同步和异步请求。\n         - 命令发生器以及命令应答器的支持。\n         - 基于Apache license的开源免费。\n         - JAVA 1.4.1或更高版本(2.0或更高版本需要jdk1.6及以上的支持)。\n         - 基于LOG4J记录日志。\n         - 使用GETBULK实现Row-based的有效的异步表格获取。\n         - 支持多线程。\n         \n## 2 snmp4j重要的类及接口介绍\nSnmp4j包中最重要的三个概念，也是三个类：**Snmp**、**Target**、**PDU**\n### 2.1 Target类\n#### 2.1.1 共有方法\n　　Target表示被管理的设备。对于被管理的设备，我们关注它的Address,它所使用的的协议版本Version，访问它的用户名和密码，以及人为设置的跟他打交道的策略，比如超时时间、\n重传次数等。所以有如下方法：\n\n - 设置或获取IP地址\n```java\nvoid setAddress（Address address）   \nAddress getAddress（）\n```\n - 设置或获取协议版本\n```java\nvoid setVersion(int ver)\nint getVersion()\n```\n - 超时时间（单位：milliseconds）\n```java\nvoid   setTimeout(long out）\nlong getTimeout()\n```\n - 重传次数\n```java\nvoid setRetries(int retries)\nint getRetries()\n```\n - PUD最大值\n```java\nvoid setMaxSizeRequestPDU(int max)\nint getMaxSizeRequestPDU()\n```\n\n上面的方法对于snmp三个版本都是相同的，不同的在于安全方面。具体来说，Snmpv1，v2c采用共同体（community）方式，安全性很差；SnmpV3采用基于用户的安全（USM）方式，安全性能得到很大提高。\n\n#### 2.1.2 communityTarget\n对于Snmpv1，v2c，使用Target派生出一个子类CommunityTarget，增加了对Community的方法：\n```java\nvoid setMaxSizeRequestPDU(int max)\nint getMaxSizeRequestPDU()\n```\n#### 2.1.3 UserTarget\n对于SnmpV3，使用其子类UserTarget，增加了一些有关USM安全方面的设置，比如采用的安全模型、安全级别、访问该设备的用户名以及权威引擎ID（authoritative engine ID）：\n\n - 安全级别（支持三种安全级别）\n```java\nvoid setSecurityLevel(int level)\nint   getSecurityLevel()\n```\n - 访问用户名（该访问用户名称必须在设置USM的时候添加其相应的UsmUser）\n```java\nvoid setSecurityName(OctetString name)\nOctetString   getSecurityName()\n```\n - 安全模型（支持三种安全模型）\n```java\nvoid setSecurityModel(int model)\nint   getSecurityModel()\n```\n - 权威引擎ID（authoritative engine ID）\n```java\nvoid   setAuthoritativeEngineID(byte[] id)\nbyte[] getAuthoritativeEngineID（）\n```\n\n### 2.2 PDU类\n　　PDU（协议数据单元），用来表示管理站跟代理站点进行通信的数据。包括PDU的类型、传输的数据集合、错误说明等。\n　　该类是SNMP报文单元的抽象，其中PDU类适用于SNMPv1和SNMPv2c。ScopedPDU类继承于PDU类，适用于SNMPv3。\n　　Snmp4j针对Snmp的各个版本，开发了三个有关PDU的类。PDU（针对Snmpv2c）、PDUv1（针对Snmpv1）、ScopedPDU（针对Snmpv3），但三个类除各自特别的一些参数外，都基本相同。所以Snmp4j在设计的时候，将PDU设计成另外两个的超类，使他们能够共享大部分功能。\n　　\n### 2.3 Snmp类\n　　snmp类是SNMP4J的核心，它提供了发送和接收SNMP PDUs的方法，所有的SNMP PDU 类型都可以采用同步或者异步的方式被发送。\n　　Snmp采用独立的传输协议，通过`TransportMapping`接口调用`addTransportMapping(TransportMapping transportMapping)`方法或者采用默认的构造函数来实现传输映射，以此来实现信息的传输。\n　　\n\n\n\n\n","source":"_posts/SNMP学习笔记(3)——snmp4j.md","raw":"---\ntitle: SNMP学习总结(3)——SNMP4J\ndate: 2017-05-25 8:42:50\ncategories:\n  - SNMP\ntags:\n  - snmp\n  - network\n  - snmp4j\n---\n这篇博客简要介绍了snmp4j协议栈的基本使用\n<!-- more -->\n## 1 snmp4j简介\n　　SNMP4J是一个用Java来实现SNMP(简单网络管理协议)协议的开源项目.它支持以命令行的形式进行管理与响应。SNMP4J是纯面向对象设计与SNMP++(用C++实现SNMPv1/v2c/v3)相类似。\n　　SNMP4J API 提供以下下特性：\n\n         - 支持MD5和SHA验证，DES，3DES,AES128、AES192和AES256加密的SNMPv3。\n         - 支持MPv1,MPv2C和MPv3，带执行的可阻塞的信息处理模块。\n         - 全部PDU格式。\n         - 可阻塞的传输拓扑。支持UPD、TCP、TLS 。\n         - 可阻塞的超时模块。\n         - 同步和异步请求。\n         - 命令发生器以及命令应答器的支持。\n         - 基于Apache license的开源免费。\n         - JAVA 1.4.1或更高版本(2.0或更高版本需要jdk1.6及以上的支持)。\n         - 基于LOG4J记录日志。\n         - 使用GETBULK实现Row-based的有效的异步表格获取。\n         - 支持多线程。\n         \n## 2 snmp4j重要的类及接口介绍\nSnmp4j包中最重要的三个概念，也是三个类：**Snmp**、**Target**、**PDU**\n### 2.1 Target类\n#### 2.1.1 共有方法\n　　Target表示被管理的设备。对于被管理的设备，我们关注它的Address,它所使用的的协议版本Version，访问它的用户名和密码，以及人为设置的跟他打交道的策略，比如超时时间、\n重传次数等。所以有如下方法：\n\n - 设置或获取IP地址\n```java\nvoid setAddress（Address address）   \nAddress getAddress（）\n```\n - 设置或获取协议版本\n```java\nvoid setVersion(int ver)\nint getVersion()\n```\n - 超时时间（单位：milliseconds）\n```java\nvoid   setTimeout(long out）\nlong getTimeout()\n```\n - 重传次数\n```java\nvoid setRetries(int retries)\nint getRetries()\n```\n - PUD最大值\n```java\nvoid setMaxSizeRequestPDU(int max)\nint getMaxSizeRequestPDU()\n```\n\n上面的方法对于snmp三个版本都是相同的，不同的在于安全方面。具体来说，Snmpv1，v2c采用共同体（community）方式，安全性很差；SnmpV3采用基于用户的安全（USM）方式，安全性能得到很大提高。\n\n#### 2.1.2 communityTarget\n对于Snmpv1，v2c，使用Target派生出一个子类CommunityTarget，增加了对Community的方法：\n```java\nvoid setMaxSizeRequestPDU(int max)\nint getMaxSizeRequestPDU()\n```\n#### 2.1.3 UserTarget\n对于SnmpV3，使用其子类UserTarget，增加了一些有关USM安全方面的设置，比如采用的安全模型、安全级别、访问该设备的用户名以及权威引擎ID（authoritative engine ID）：\n\n - 安全级别（支持三种安全级别）\n```java\nvoid setSecurityLevel(int level)\nint   getSecurityLevel()\n```\n - 访问用户名（该访问用户名称必须在设置USM的时候添加其相应的UsmUser）\n```java\nvoid setSecurityName(OctetString name)\nOctetString   getSecurityName()\n```\n - 安全模型（支持三种安全模型）\n```java\nvoid setSecurityModel(int model)\nint   getSecurityModel()\n```\n - 权威引擎ID（authoritative engine ID）\n```java\nvoid   setAuthoritativeEngineID(byte[] id)\nbyte[] getAuthoritativeEngineID（）\n```\n\n### 2.2 PDU类\n　　PDU（协议数据单元），用来表示管理站跟代理站点进行通信的数据。包括PDU的类型、传输的数据集合、错误说明等。\n　　该类是SNMP报文单元的抽象，其中PDU类适用于SNMPv1和SNMPv2c。ScopedPDU类继承于PDU类，适用于SNMPv3。\n　　Snmp4j针对Snmp的各个版本，开发了三个有关PDU的类。PDU（针对Snmpv2c）、PDUv1（针对Snmpv1）、ScopedPDU（针对Snmpv3），但三个类除各自特别的一些参数外，都基本相同。所以Snmp4j在设计的时候，将PDU设计成另外两个的超类，使他们能够共享大部分功能。\n　　\n### 2.3 Snmp类\n　　snmp类是SNMP4J的核心，它提供了发送和接收SNMP PDUs的方法，所有的SNMP PDU 类型都可以采用同步或者异步的方式被发送。\n　　Snmp采用独立的传输协议，通过`TransportMapping`接口调用`addTransportMapping(TransportMapping transportMapping)`方法或者采用默认的构造函数来实现传输映射，以此来实现信息的传输。\n　　\n\n\n\n\n","slug":"SNMP学习笔记(3)——snmp4j","published":1,"updated":"2017-06-12T05:24:13.353Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0eg3000assvfhd54nr2x","content":"<p>这篇博客简要介绍了snmp4j协议栈的基本使用<br><a id=\"more\"></a></p>\n<h2 id=\"1-snmp4j简介\"><a href=\"#1-snmp4j简介\" class=\"headerlink\" title=\"1 snmp4j简介\"></a>1 snmp4j简介</h2><p>　　SNMP4J是一个用Java来实现SNMP(简单网络管理协议)协议的开源项目.它支持以命令行的形式进行管理与响应。SNMP4J是纯面向对象设计与SNMP++(用C++实现SNMPv1/v2c/v3)相类似。<br>　　SNMP4J API 提供以下下特性：</p>\n<pre><code>- 支持MD5和SHA验证，DES，3DES,AES128、AES192和AES256加密的SNMPv3。\n- 支持MPv1,MPv2C和MPv3，带执行的可阻塞的信息处理模块。\n- 全部PDU格式。\n- 可阻塞的传输拓扑。支持UPD、TCP、TLS 。\n- 可阻塞的超时模块。\n- 同步和异步请求。\n- 命令发生器以及命令应答器的支持。\n- 基于Apache license的开源免费。\n- JAVA 1.4.1或更高版本(2.0或更高版本需要jdk1.6及以上的支持)。\n- 基于LOG4J记录日志。\n- 使用GETBULK实现Row-based的有效的异步表格获取。\n- 支持多线程。\n</code></pre><h2 id=\"2-snmp4j重要的类及接口介绍\"><a href=\"#2-snmp4j重要的类及接口介绍\" class=\"headerlink\" title=\"2 snmp4j重要的类及接口介绍\"></a>2 snmp4j重要的类及接口介绍</h2><p>Snmp4j包中最重要的三个概念，也是三个类：<strong>Snmp</strong>、<strong>Target</strong>、<strong>PDU</strong></p>\n<h3 id=\"2-1-Target类\"><a href=\"#2-1-Target类\" class=\"headerlink\" title=\"2.1 Target类\"></a>2.1 Target类</h3><h4 id=\"2-1-1-共有方法\"><a href=\"#2-1-1-共有方法\" class=\"headerlink\" title=\"2.1.1 共有方法\"></a>2.1.1 共有方法</h4><p>　　Target表示被管理的设备。对于被管理的设备，我们关注它的Address,它所使用的的协议版本Version，访问它的用户名和密码，以及人为设置的跟他打交道的策略，比如超时时间、<br>重传次数等。所以有如下方法：</p>\n<ul>\n<li><p>设置或获取IP地址</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">void</span> setAddress（Address address）   </div><div class=\"line\">Address getAddress（）</div></pre></td></tr></table></figure>\n</li>\n<li><p>设置或获取协议版本</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setVersion</span><span class=\"params\">(<span class=\"keyword\">int</span> ver)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span> <span class=\"title\">getVersion</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>超时时间（单位：milliseconds）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>   <span class=\"title\">setTimeout</span><span class=\"params\">(<span class=\"keyword\">long</span> out）</span></span></div><div class=\"line\"><span class=\"keyword\">long</span> getTimeout()</div></pre></td></tr></table></figure>\n</li>\n<li><p>重传次数</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setRetries</span><span class=\"params\">(<span class=\"keyword\">int</span> retries)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span> <span class=\"title\">getRetries</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>PUD最大值</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setMaxSizeRequestPDU</span><span class=\"params\">(<span class=\"keyword\">int</span> max)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span> <span class=\"title\">getMaxSizeRequestPDU</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>上面的方法对于snmp三个版本都是相同的，不同的在于安全方面。具体来说，Snmpv1，v2c采用共同体（community）方式，安全性很差；SnmpV3采用基于用户的安全（USM）方式，安全性能得到很大提高。</p>\n<h4 id=\"2-1-2-communityTarget\"><a href=\"#2-1-2-communityTarget\" class=\"headerlink\" title=\"2.1.2 communityTarget\"></a>2.1.2 communityTarget</h4><p>对于Snmpv1，v2c，使用Target派生出一个子类CommunityTarget，增加了对Community的方法：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setMaxSizeRequestPDU</span><span class=\"params\">(<span class=\"keyword\">int</span> max)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span> <span class=\"title\">getMaxSizeRequestPDU</span><span class=\"params\">()</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"2-1-3-UserTarget\"><a href=\"#2-1-3-UserTarget\" class=\"headerlink\" title=\"2.1.3 UserTarget\"></a>2.1.3 UserTarget</h4><p>对于SnmpV3，使用其子类UserTarget，增加了一些有关USM安全方面的设置，比如采用的安全模型、安全级别、访问该设备的用户名以及权威引擎ID（authoritative engine ID）：</p>\n<ul>\n<li><p>安全级别（支持三种安全级别）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setSecurityLevel</span><span class=\"params\">(<span class=\"keyword\">int</span> level)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span>   <span class=\"title\">getSecurityLevel</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>访问用户名（该访问用户名称必须在设置USM的时候添加其相应的UsmUser）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setSecurityName</span><span class=\"params\">(OctetString name)</span></span></div><div class=\"line\">OctetString   <span class=\"title\">getSecurityName</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>安全模型（支持三种安全模型）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setSecurityModel</span><span class=\"params\">(<span class=\"keyword\">int</span> model)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span>   <span class=\"title\">getSecurityModel</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>权威引擎ID（authoritative engine ID）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>   <span class=\"title\">setAuthoritativeEngineID</span><span class=\"params\">(<span class=\"keyword\">byte</span>[] id)</span></span></div><div class=\"line\"><span class=\"keyword\">byte</span>[] getAuthoritativeEngineID（）</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"2-2-PDU类\"><a href=\"#2-2-PDU类\" class=\"headerlink\" title=\"2.2 PDU类\"></a>2.2 PDU类</h3><p>　　PDU（协议数据单元），用来表示管理站跟代理站点进行通信的数据。包括PDU的类型、传输的数据集合、错误说明等。<br>　　该类是SNMP报文单元的抽象，其中PDU类适用于SNMPv1和SNMPv2c。ScopedPDU类继承于PDU类，适用于SNMPv3。<br>　　Snmp4j针对Snmp的各个版本，开发了三个有关PDU的类。PDU（针对Snmpv2c）、PDUv1（针对Snmpv1）、ScopedPDU（针对Snmpv3），但三个类除各自特别的一些参数外，都基本相同。所以Snmp4j在设计的时候，将PDU设计成另外两个的超类，使他们能够共享大部分功能。\n　　</p>\n<h3 id=\"2-3-Snmp类\"><a href=\"#2-3-Snmp类\" class=\"headerlink\" title=\"2.3 Snmp类\"></a>2.3 Snmp类</h3><p>　　snmp类是SNMP4J的核心，它提供了发送和接收SNMP PDUs的方法，所有的SNMP PDU 类型都可以采用同步或者异步的方式被发送。<br>　　Snmp采用独立的传输协议，通过<code>TransportMapping</code>接口调用<code>addTransportMapping(TransportMapping transportMapping)</code>方法或者采用默认的构造函数来实现传输映射，以此来实现信息的传输。\n　　</p>\n","site":{"data":{}},"excerpt":"<p>这篇博客简要介绍了snmp4j协议栈的基本使用<br>","more":"</p>\n<h2 id=\"1-snmp4j简介\"><a href=\"#1-snmp4j简介\" class=\"headerlink\" title=\"1 snmp4j简介\"></a>1 snmp4j简介</h2><p>　　SNMP4J是一个用Java来实现SNMP(简单网络管理协议)协议的开源项目.它支持以命令行的形式进行管理与响应。SNMP4J是纯面向对象设计与SNMP++(用C++实现SNMPv1/v2c/v3)相类似。<br>　　SNMP4J API 提供以下下特性：</p>\n<pre><code>- 支持MD5和SHA验证，DES，3DES,AES128、AES192和AES256加密的SNMPv3。\n- 支持MPv1,MPv2C和MPv3，带执行的可阻塞的信息处理模块。\n- 全部PDU格式。\n- 可阻塞的传输拓扑。支持UPD、TCP、TLS 。\n- 可阻塞的超时模块。\n- 同步和异步请求。\n- 命令发生器以及命令应答器的支持。\n- 基于Apache license的开源免费。\n- JAVA 1.4.1或更高版本(2.0或更高版本需要jdk1.6及以上的支持)。\n- 基于LOG4J记录日志。\n- 使用GETBULK实现Row-based的有效的异步表格获取。\n- 支持多线程。\n</code></pre><h2 id=\"2-snmp4j重要的类及接口介绍\"><a href=\"#2-snmp4j重要的类及接口介绍\" class=\"headerlink\" title=\"2 snmp4j重要的类及接口介绍\"></a>2 snmp4j重要的类及接口介绍</h2><p>Snmp4j包中最重要的三个概念，也是三个类：<strong>Snmp</strong>、<strong>Target</strong>、<strong>PDU</strong></p>\n<h3 id=\"2-1-Target类\"><a href=\"#2-1-Target类\" class=\"headerlink\" title=\"2.1 Target类\"></a>2.1 Target类</h3><h4 id=\"2-1-1-共有方法\"><a href=\"#2-1-1-共有方法\" class=\"headerlink\" title=\"2.1.1 共有方法\"></a>2.1.1 共有方法</h4><p>　　Target表示被管理的设备。对于被管理的设备，我们关注它的Address,它所使用的的协议版本Version，访问它的用户名和密码，以及人为设置的跟他打交道的策略，比如超时时间、<br>重传次数等。所以有如下方法：</p>\n<ul>\n<li><p>设置或获取IP地址</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">void</span> setAddress（Address address）   </div><div class=\"line\">Address getAddress（）</div></pre></td></tr></table></figure>\n</li>\n<li><p>设置或获取协议版本</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setVersion</span><span class=\"params\">(<span class=\"keyword\">int</span> ver)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span> <span class=\"title\">getVersion</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>超时时间（单位：milliseconds）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>   <span class=\"title\">setTimeout</span><span class=\"params\">(<span class=\"keyword\">long</span> out）</span></span></div><div class=\"line\"><span class=\"keyword\">long</span> getTimeout()</div></pre></td></tr></table></figure>\n</li>\n<li><p>重传次数</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setRetries</span><span class=\"params\">(<span class=\"keyword\">int</span> retries)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span> <span class=\"title\">getRetries</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>PUD最大值</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setMaxSizeRequestPDU</span><span class=\"params\">(<span class=\"keyword\">int</span> max)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span> <span class=\"title\">getMaxSizeRequestPDU</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>上面的方法对于snmp三个版本都是相同的，不同的在于安全方面。具体来说，Snmpv1，v2c采用共同体（community）方式，安全性很差；SnmpV3采用基于用户的安全（USM）方式，安全性能得到很大提高。</p>\n<h4 id=\"2-1-2-communityTarget\"><a href=\"#2-1-2-communityTarget\" class=\"headerlink\" title=\"2.1.2 communityTarget\"></a>2.1.2 communityTarget</h4><p>对于Snmpv1，v2c，使用Target派生出一个子类CommunityTarget，增加了对Community的方法：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setMaxSizeRequestPDU</span><span class=\"params\">(<span class=\"keyword\">int</span> max)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span> <span class=\"title\">getMaxSizeRequestPDU</span><span class=\"params\">()</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"2-1-3-UserTarget\"><a href=\"#2-1-3-UserTarget\" class=\"headerlink\" title=\"2.1.3 UserTarget\"></a>2.1.3 UserTarget</h4><p>对于SnmpV3，使用其子类UserTarget，增加了一些有关USM安全方面的设置，比如采用的安全模型、安全级别、访问该设备的用户名以及权威引擎ID（authoritative engine ID）：</p>\n<ul>\n<li><p>安全级别（支持三种安全级别）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setSecurityLevel</span><span class=\"params\">(<span class=\"keyword\">int</span> level)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span>   <span class=\"title\">getSecurityLevel</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>访问用户名（该访问用户名称必须在设置USM的时候添加其相应的UsmUser）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setSecurityName</span><span class=\"params\">(OctetString name)</span></span></div><div class=\"line\">OctetString   <span class=\"title\">getSecurityName</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>安全模型（支持三种安全模型）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setSecurityModel</span><span class=\"params\">(<span class=\"keyword\">int</span> model)</span></span></div><div class=\"line\"><span class=\"keyword\">int</span>   <span class=\"title\">getSecurityModel</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>权威引擎ID（authoritative engine ID）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>   <span class=\"title\">setAuthoritativeEngineID</span><span class=\"params\">(<span class=\"keyword\">byte</span>[] id)</span></span></div><div class=\"line\"><span class=\"keyword\">byte</span>[] getAuthoritativeEngineID（）</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"2-2-PDU类\"><a href=\"#2-2-PDU类\" class=\"headerlink\" title=\"2.2 PDU类\"></a>2.2 PDU类</h3><p>　　PDU（协议数据单元），用来表示管理站跟代理站点进行通信的数据。包括PDU的类型、传输的数据集合、错误说明等。<br>　　该类是SNMP报文单元的抽象，其中PDU类适用于SNMPv1和SNMPv2c。ScopedPDU类继承于PDU类，适用于SNMPv3。<br>　　Snmp4j针对Snmp的各个版本，开发了三个有关PDU的类。PDU（针对Snmpv2c）、PDUv1（针对Snmpv1）、ScopedPDU（针对Snmpv3），但三个类除各自特别的一些参数外，都基本相同。所以Snmp4j在设计的时候，将PDU设计成另外两个的超类，使他们能够共享大部分功能。\n　　</p>\n<h3 id=\"2-3-Snmp类\"><a href=\"#2-3-Snmp类\" class=\"headerlink\" title=\"2.3 Snmp类\"></a>2.3 Snmp类</h3><p>　　snmp类是SNMP4J的核心，它提供了发送和接收SNMP PDUs的方法，所有的SNMP PDU 类型都可以采用同步或者异步的方式被发送。<br>　　Snmp采用独立的传输协议，通过<code>TransportMapping</code>接口调用<code>addTransportMapping(TransportMapping transportMapping)</code>方法或者采用默认的构造函数来实现传输映射，以此来实现信息的传输。\n　　</p>"},{"title":"mybatis(一):快速入门","date":"2017-04-28T10:28:53.000Z","_content":"","source":"_posts/mybatis-一-快速入门.md","raw":"---\ntitle: 'mybatis(一):快速入门'\ndate: 2017-04-28 18:28:53\ntags:\n---\n","slug":"mybatis-一-快速入门","published":1,"updated":"2017-04-28T10:28:53.166Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0eg7000essvfueniuev4","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"html5+常用功能","date":"2017-05-19T10:09:53.000Z","_content":"这篇博文介绍了html5+在webApp开发中经常使用的功能模块\n<!--more-->\n## 获取wifi信息 ##\n\n 1. 获取wifi的IP\n``` javascript\nfunction getOnuIp() {\n    if(mui.os.android) {\n        var Context = plus.android.importClass(\"android.content.Context\");\n        var WifiManager = plus.android.importClass(\"android.net.wifi.WifiManager\");\n        var WifiInfo = plus.android.importClass(\"android.net.wifi.WifiInfo\");\n\n        var wifiManager = plus.android.runtimeMainActivity().getSystemService(Context.WIFI_SERVICE);\n        var wifiInfo = wifiManager.getConnectionInfo();\n        var ipAddress = wifiInfo.getIpAddress();\n        if(ipAddress == 0) return \"未连接wifi\";\n        return((ipAddress & 0xff) + \".\" + (ipAddress >> 8 & 0xff) + \".\" + (ipAddress >> 16 & 0xff) + \".\" + (ipAddress >> 24 & 0xff));\n    } else if(mui.os.ios) {\n        mui.toast(\"ios暂未获\");\n    }\n}\n```\n\n 2. 获取wifi的网关\n```javascript\nfunction getOnuIp() {\n    if(mui.os.android) {\n        var Context = plus.android.importClass(\"android.content.Context\");\n        var WifiManager = plus.android.importClass(\"android.net.wifi.WifiManager\");\n        var WifiInfo = plus.android.importClass(\"android.net.wifi.WifiInfo\");\n        var DhcpInfo=plus.android.importClass(\"android.net.DhcpInfo\");\n        var wifiManager = plus.android.runtimeMainActivity().getSystemService(Context.WIFI_SERVICE);\n        var dhcpInfo = wifiManager.getDhcpInfo()\n        var begin=dhcpInfo.toString().indexOf(\"gateway\");\n        var end=dhcpInfo.toString().indexOf(\"netmask\");\n        var ipAddress = dhcpInfo.toString().substring(begin+7,end).trim();  \n        if(ipAddress == 0) return \"未连接wifi\";\n        return ipAddress;\n//        return((ipAddress & 0xff) + \".\" + (ipAddress >> 8 & 0xff) + \".\" + (ipAddress >> 16 & 0xff) + \".\" + (ipAddress >> 24 & 0xff));\n    } else if(mui.os.ios) {\n        var WifiManager = plus.ios.importClass(\"WifiManager\");\n        var wifiManager = new WifiManager();\n        var gateWay = wifiManager.defaultGateWay();\n        return gateWay;\n    }\n}\n```\n\n## 软键盘 ##\n\n 1. 强制打开全键盘\n```javascript\n//弹出软键盘，搜索框获得焦点\nvar nativeWebview, imm, InputMethodManager;\nvar initNativeObjects = function() {\n    if(mui.os.android) {\n        var main = plus.android.runtimeMainActivity();\n        var Context = plus.android.importClass(\"android.content.Context\");\n        InputMethodManager = plus.android.importClass(\"android.view.inputmethod.InputMethodManager\");\n        imm = main.getSystemService(Context.INPUT_METHOD_SERVICE);\n    } else {\n        nativeWebview = plus.webview.currentWebview().nativeInstanceObject();\n    }\n};\nvar showSoftInput = function() {\n    if(mui.os.android) {\n        imm.toggleSoftInput(0, InputMethodManager.SHOW_FORCED);\n    } else {\n        nativeWebview.plusCallMethod({\n            \"setKeyboardDisplayRequiresUserAction\": false\n        });\n    }\n    setTimeout(function() {\n        //此处可写具体逻辑设置获取焦点的input\n        var inputElem = document.querySelector('input');\n        inputElem.focus();\n    }, 200);\n};\nvar showSoftInput2 = function() {\n    var nativeWebview = plus.webview.currentWebview().nativeInstanceObject();\n    if(mui.os.android) {\n        //强制当前webview获得焦点\n        plus.android.importClass(nativeWebview);\n        nativeWebview.requestFocus();\n        imm.toggleSoftInput(0, InputMethodManager.SHOW_FORCED);\n    } else {\n        nativeWebview.plusCallMethod({\n            \"setKeyboardDisplayRequiresUserAction\": false\n        });\n    }\n    setTimeout(function() {\n        //此处可写具体逻辑设置获取焦点的input\n        var inputElem = document.querySelector('input');\n        inputElem.select();\n    }, 200);\n};\n```\n 2. 关闭软键盘\n```javascript\ndocument.activeElement.blur(); //隐藏软键盘 \n```\n## 两次点击退出 ##\n```javascript\n//首页返回键处理  \n//处理逻辑：2秒内，连续两次按返回键，则退出应用  \n//首次按键，提示‘再按一次退出应用’  \nif(!first) {\n    first = new Date().getTime();\n    mui.toast('再按一次退出应用');\n    setTimeout(function() {\n        first = null;\n    }, 2000);\n    return false;\n} else {\n    if(new Date().getTime() - first < 2000) {\n        plus.runtime.quit();\n    }\n}\n```\n## 注销关闭其他窗口 ##\n```javascript\n/*监听注销按钮*/\ndocument.getElementById(\"logoutBtn\").addEventListener(\"tap\", function() {\n    var btnArray = ['是', '否'];\n    mui.confirm('您确定退出?', '', btnArray, function(e) {\n        if(e.index == 0) {\n            // 获取所有Webview窗口\n            var launchWebview = plus.webview.getLaunchWebview();\n            var curr = plus.webview.currentWebview();\n            var wvs = plus.webview.all();\n            for(var i = 0, len = wvs.length; i < len; i++) {\n                //关闭除setting页面和首页外的其他页面\n                if(wvs[i].getURL() == curr.getURL() || wvs[i].getURL() == launchWebview.getURL())\n                    continue;\n                plus.webview.close(wvs[i]);\n            }\n            //清除已存储的账号信息\n            myStorage.removeItem('ONU.token.username');\n            myStorage.removeItem('ONU.token.password');\n            myStorage.removeItem('ONU.token.autoLogin');\n            myStorage.removeItem('isLogin');\n            //注销静默登录的定时器\n            //clearInterval('backLoading()');\n            //打开login页面后再关闭setting页面\n            launchWebview.show();\n            curr.close();\n        }\n    })\n});\n```\n","source":"_posts/html5-常用功能.md","raw":"---\ntitle: html5+常用功能\ndate: 2017-05-19 18:09:53\ncategories:\n\t- course\ntags:\n\t- html5+\n\t- native.js\n---\n这篇博文介绍了html5+在webApp开发中经常使用的功能模块\n<!--more-->\n## 获取wifi信息 ##\n\n 1. 获取wifi的IP\n``` javascript\nfunction getOnuIp() {\n    if(mui.os.android) {\n        var Context = plus.android.importClass(\"android.content.Context\");\n        var WifiManager = plus.android.importClass(\"android.net.wifi.WifiManager\");\n        var WifiInfo = plus.android.importClass(\"android.net.wifi.WifiInfo\");\n\n        var wifiManager = plus.android.runtimeMainActivity().getSystemService(Context.WIFI_SERVICE);\n        var wifiInfo = wifiManager.getConnectionInfo();\n        var ipAddress = wifiInfo.getIpAddress();\n        if(ipAddress == 0) return \"未连接wifi\";\n        return((ipAddress & 0xff) + \".\" + (ipAddress >> 8 & 0xff) + \".\" + (ipAddress >> 16 & 0xff) + \".\" + (ipAddress >> 24 & 0xff));\n    } else if(mui.os.ios) {\n        mui.toast(\"ios暂未获\");\n    }\n}\n```\n\n 2. 获取wifi的网关\n```javascript\nfunction getOnuIp() {\n    if(mui.os.android) {\n        var Context = plus.android.importClass(\"android.content.Context\");\n        var WifiManager = plus.android.importClass(\"android.net.wifi.WifiManager\");\n        var WifiInfo = plus.android.importClass(\"android.net.wifi.WifiInfo\");\n        var DhcpInfo=plus.android.importClass(\"android.net.DhcpInfo\");\n        var wifiManager = plus.android.runtimeMainActivity().getSystemService(Context.WIFI_SERVICE);\n        var dhcpInfo = wifiManager.getDhcpInfo()\n        var begin=dhcpInfo.toString().indexOf(\"gateway\");\n        var end=dhcpInfo.toString().indexOf(\"netmask\");\n        var ipAddress = dhcpInfo.toString().substring(begin+7,end).trim();  \n        if(ipAddress == 0) return \"未连接wifi\";\n        return ipAddress;\n//        return((ipAddress & 0xff) + \".\" + (ipAddress >> 8 & 0xff) + \".\" + (ipAddress >> 16 & 0xff) + \".\" + (ipAddress >> 24 & 0xff));\n    } else if(mui.os.ios) {\n        var WifiManager = plus.ios.importClass(\"WifiManager\");\n        var wifiManager = new WifiManager();\n        var gateWay = wifiManager.defaultGateWay();\n        return gateWay;\n    }\n}\n```\n\n## 软键盘 ##\n\n 1. 强制打开全键盘\n```javascript\n//弹出软键盘，搜索框获得焦点\nvar nativeWebview, imm, InputMethodManager;\nvar initNativeObjects = function() {\n    if(mui.os.android) {\n        var main = plus.android.runtimeMainActivity();\n        var Context = plus.android.importClass(\"android.content.Context\");\n        InputMethodManager = plus.android.importClass(\"android.view.inputmethod.InputMethodManager\");\n        imm = main.getSystemService(Context.INPUT_METHOD_SERVICE);\n    } else {\n        nativeWebview = plus.webview.currentWebview().nativeInstanceObject();\n    }\n};\nvar showSoftInput = function() {\n    if(mui.os.android) {\n        imm.toggleSoftInput(0, InputMethodManager.SHOW_FORCED);\n    } else {\n        nativeWebview.plusCallMethod({\n            \"setKeyboardDisplayRequiresUserAction\": false\n        });\n    }\n    setTimeout(function() {\n        //此处可写具体逻辑设置获取焦点的input\n        var inputElem = document.querySelector('input');\n        inputElem.focus();\n    }, 200);\n};\nvar showSoftInput2 = function() {\n    var nativeWebview = plus.webview.currentWebview().nativeInstanceObject();\n    if(mui.os.android) {\n        //强制当前webview获得焦点\n        plus.android.importClass(nativeWebview);\n        nativeWebview.requestFocus();\n        imm.toggleSoftInput(0, InputMethodManager.SHOW_FORCED);\n    } else {\n        nativeWebview.plusCallMethod({\n            \"setKeyboardDisplayRequiresUserAction\": false\n        });\n    }\n    setTimeout(function() {\n        //此处可写具体逻辑设置获取焦点的input\n        var inputElem = document.querySelector('input');\n        inputElem.select();\n    }, 200);\n};\n```\n 2. 关闭软键盘\n```javascript\ndocument.activeElement.blur(); //隐藏软键盘 \n```\n## 两次点击退出 ##\n```javascript\n//首页返回键处理  \n//处理逻辑：2秒内，连续两次按返回键，则退出应用  \n//首次按键，提示‘再按一次退出应用’  \nif(!first) {\n    first = new Date().getTime();\n    mui.toast('再按一次退出应用');\n    setTimeout(function() {\n        first = null;\n    }, 2000);\n    return false;\n} else {\n    if(new Date().getTime() - first < 2000) {\n        plus.runtime.quit();\n    }\n}\n```\n## 注销关闭其他窗口 ##\n```javascript\n/*监听注销按钮*/\ndocument.getElementById(\"logoutBtn\").addEventListener(\"tap\", function() {\n    var btnArray = ['是', '否'];\n    mui.confirm('您确定退出?', '', btnArray, function(e) {\n        if(e.index == 0) {\n            // 获取所有Webview窗口\n            var launchWebview = plus.webview.getLaunchWebview();\n            var curr = plus.webview.currentWebview();\n            var wvs = plus.webview.all();\n            for(var i = 0, len = wvs.length; i < len; i++) {\n                //关闭除setting页面和首页外的其他页面\n                if(wvs[i].getURL() == curr.getURL() || wvs[i].getURL() == launchWebview.getURL())\n                    continue;\n                plus.webview.close(wvs[i]);\n            }\n            //清除已存储的账号信息\n            myStorage.removeItem('ONU.token.username');\n            myStorage.removeItem('ONU.token.password');\n            myStorage.removeItem('ONU.token.autoLogin');\n            myStorage.removeItem('isLogin');\n            //注销静默登录的定时器\n            //clearInterval('backLoading()');\n            //打开login页面后再关闭setting页面\n            launchWebview.show();\n            curr.close();\n        }\n    })\n});\n```\n","slug":"html5-常用功能","published":1,"updated":"2017-05-19T10:14:02.695Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0egc000gssvfcocapni5","content":"<p>这篇博文介绍了html5+在webApp开发中经常使用的功能模块<br><a id=\"more\"></a></p>\n<h2 id=\"获取wifi信息\"><a href=\"#获取wifi信息\" class=\"headerlink\" title=\"获取wifi信息\"></a>获取wifi信息</h2><ol>\n<li><p>获取wifi的IP</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getOnuIp</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mui.os.android) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> Context = plus.android.importClass(<span class=\"string\">\"android.content.Context\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> WifiManager = plus.android.importClass(<span class=\"string\">\"android.net.wifi.WifiManager\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> WifiInfo = plus.android.importClass(<span class=\"string\">\"android.net.wifi.WifiInfo\"</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> wifiManager = plus.android.runtimeMainActivity().getSystemService(Context.WIFI_SERVICE);</div><div class=\"line\">        <span class=\"keyword\">var</span> wifiInfo = wifiManager.getConnectionInfo();</div><div class=\"line\">        <span class=\"keyword\">var</span> ipAddress = wifiInfo.getIpAddress();</div><div class=\"line\">        <span class=\"keyword\">if</span>(ipAddress == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"string\">\"未连接wifi\"</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span>((ipAddress &amp; <span class=\"number\">0xff</span>) + <span class=\"string\">\".\"</span> + (ipAddress &gt;&gt; <span class=\"number\">8</span> &amp; <span class=\"number\">0xff</span>) + <span class=\"string\">\".\"</span> + (ipAddress &gt;&gt; <span class=\"number\">16</span> &amp; <span class=\"number\">0xff</span>) + <span class=\"string\">\".\"</span> + (ipAddress &gt;&gt; <span class=\"number\">24</span> &amp; <span class=\"number\">0xff</span>));</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(mui.os.ios) &#123;</div><div class=\"line\">        mui.toast(<span class=\"string\">\"ios暂未获\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>获取wifi的网关</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getOnuIp</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mui.os.android) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> Context = plus.android.importClass(<span class=\"string\">\"android.content.Context\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> WifiManager = plus.android.importClass(<span class=\"string\">\"android.net.wifi.WifiManager\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> WifiInfo = plus.android.importClass(<span class=\"string\">\"android.net.wifi.WifiInfo\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> DhcpInfo=plus.android.importClass(<span class=\"string\">\"android.net.DhcpInfo\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> wifiManager = plus.android.runtimeMainActivity().getSystemService(Context.WIFI_SERVICE);</div><div class=\"line\">        <span class=\"keyword\">var</span> dhcpInfo = wifiManager.getDhcpInfo()</div><div class=\"line\">        <span class=\"keyword\">var</span> begin=dhcpInfo.toString().indexOf(<span class=\"string\">\"gateway\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> end=dhcpInfo.toString().indexOf(<span class=\"string\">\"netmask\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> ipAddress = dhcpInfo.toString().substring(begin+<span class=\"number\">7</span>,end).trim();  </div><div class=\"line\">        <span class=\"keyword\">if</span>(ipAddress == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"string\">\"未连接wifi\"</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span> ipAddress;</div><div class=\"line\"><span class=\"comment\">//        return((ipAddress &amp; 0xff) + \".\" + (ipAddress &gt;&gt; 8 &amp; 0xff) + \".\" + (ipAddress &gt;&gt; 16 &amp; 0xff) + \".\" + (ipAddress &gt;&gt; 24 &amp; 0xff));</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(mui.os.ios) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> WifiManager = plus.ios.importClass(<span class=\"string\">\"WifiManager\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> wifiManager = <span class=\"keyword\">new</span> WifiManager();</div><div class=\"line\">        <span class=\"keyword\">var</span> gateWay = wifiManager.defaultGateWay();</div><div class=\"line\">        <span class=\"keyword\">return</span> gateWay;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"软键盘\"><a href=\"#软键盘\" class=\"headerlink\" title=\"软键盘\"></a>软键盘</h2><ol>\n<li><p>强制打开全键盘</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//弹出软键盘，搜索框获得焦点</span></div><div class=\"line\"><span class=\"keyword\">var</span> nativeWebview, imm, InputMethodManager;</div><div class=\"line\"><span class=\"keyword\">var</span> initNativeObjects = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mui.os.android) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> main = plus.android.runtimeMainActivity();</div><div class=\"line\">        <span class=\"keyword\">var</span> Context = plus.android.importClass(<span class=\"string\">\"android.content.Context\"</span>);</div><div class=\"line\">        InputMethodManager = plus.android.importClass(<span class=\"string\">\"android.view.inputmethod.InputMethodManager\"</span>);</div><div class=\"line\">        imm = main.getSystemService(Context.INPUT_METHOD_SERVICE);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        nativeWebview = plus.webview.currentWebview().nativeInstanceObject();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> showSoftInput = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mui.os.android) &#123;</div><div class=\"line\">        imm.toggleSoftInput(<span class=\"number\">0</span>, InputMethodManager.SHOW_FORCED);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        nativeWebview.plusCallMethod(&#123;</div><div class=\"line\">            <span class=\"string\">\"setKeyboardDisplayRequiresUserAction\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//此处可写具体逻辑设置获取焦点的input</span></div><div class=\"line\">        <span class=\"keyword\">var</span> inputElem = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'input'</span>);</div><div class=\"line\">        inputElem.focus();</div><div class=\"line\">    &#125;, <span class=\"number\">200</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> showSoftInput2 = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> nativeWebview = plus.webview.currentWebview().nativeInstanceObject();</div><div class=\"line\">    <span class=\"keyword\">if</span>(mui.os.android) &#123;</div><div class=\"line\">        <span class=\"comment\">//强制当前webview获得焦点</span></div><div class=\"line\">        plus.android.importClass(nativeWebview);</div><div class=\"line\">        nativeWebview.requestFocus();</div><div class=\"line\">        imm.toggleSoftInput(<span class=\"number\">0</span>, InputMethodManager.SHOW_FORCED);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        nativeWebview.plusCallMethod(&#123;</div><div class=\"line\">            <span class=\"string\">\"setKeyboardDisplayRequiresUserAction\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//此处可写具体逻辑设置获取焦点的input</span></div><div class=\"line\">        <span class=\"keyword\">var</span> inputElem = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'input'</span>);</div><div class=\"line\">        inputElem.select();</div><div class=\"line\">    &#125;, <span class=\"number\">200</span>);</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n</li>\n<li><p>关闭软键盘</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">document</span>.activeElement.blur(); <span class=\"comment\">//隐藏软键盘</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"两次点击退出\"><a href=\"#两次点击退出\" class=\"headerlink\" title=\"两次点击退出\"></a>两次点击退出</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//首页返回键处理  </span></div><div class=\"line\"><span class=\"comment\">//处理逻辑：2秒内，连续两次按返回键，则退出应用  </span></div><div class=\"line\"><span class=\"comment\">//首次按键，提示‘再按一次退出应用’  </span></div><div class=\"line\"><span class=\"keyword\">if</span>(!first) &#123;</div><div class=\"line\">    first = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">    mui.toast(<span class=\"string\">'再按一次退出应用'</span>);</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        first = <span class=\"literal\">null</span>;</div><div class=\"line\">    &#125;, <span class=\"number\">2000</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime() - first &lt; <span class=\"number\">2000</span>) &#123;</div><div class=\"line\">        plus.runtime.quit();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"注销关闭其他窗口\"><a href=\"#注销关闭其他窗口\" class=\"headerlink\" title=\"注销关闭其他窗口\"></a>注销关闭其他窗口</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/*监听注销按钮*/</span></div><div class=\"line\"><span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"logoutBtn\"</span>).addEventListener(<span class=\"string\">\"tap\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> btnArray = [<span class=\"string\">'是'</span>, <span class=\"string\">'否'</span>];</div><div class=\"line\">    mui.confirm(<span class=\"string\">'您确定退出?'</span>, <span class=\"string\">''</span>, btnArray, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(e.index == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">            <span class=\"comment\">// 获取所有Webview窗口</span></div><div class=\"line\">            <span class=\"keyword\">var</span> launchWebview = plus.webview.getLaunchWebview();</div><div class=\"line\">            <span class=\"keyword\">var</span> curr = plus.webview.currentWebview();</div><div class=\"line\">            <span class=\"keyword\">var</span> wvs = plus.webview.all();</div><div class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, len = wvs.length; i &lt; len; i++) &#123;</div><div class=\"line\">                <span class=\"comment\">//关闭除setting页面和首页外的其他页面</span></div><div class=\"line\">                <span class=\"keyword\">if</span>(wvs[i].getURL() == curr.getURL() || wvs[i].getURL() == launchWebview.getURL())</div><div class=\"line\">                    <span class=\"keyword\">continue</span>;</div><div class=\"line\">                plus.webview.close(wvs[i]);</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"comment\">//清除已存储的账号信息</span></div><div class=\"line\">            myStorage.removeItem(<span class=\"string\">'ONU.token.username'</span>);</div><div class=\"line\">            myStorage.removeItem(<span class=\"string\">'ONU.token.password'</span>);</div><div class=\"line\">            myStorage.removeItem(<span class=\"string\">'ONU.token.autoLogin'</span>);</div><div class=\"line\">            myStorage.removeItem(<span class=\"string\">'isLogin'</span>);</div><div class=\"line\">            <span class=\"comment\">//注销静默登录的定时器</span></div><div class=\"line\">            <span class=\"comment\">//clearInterval('backLoading()');</span></div><div class=\"line\">            <span class=\"comment\">//打开login页面后再关闭setting页面</span></div><div class=\"line\">            launchWebview.show();</div><div class=\"line\">            curr.close();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>这篇博文介绍了html5+在webApp开发中经常使用的功能模块<br>","more":"</p>\n<h2 id=\"获取wifi信息\"><a href=\"#获取wifi信息\" class=\"headerlink\" title=\"获取wifi信息\"></a>获取wifi信息</h2><ol>\n<li><p>获取wifi的IP</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getOnuIp</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mui.os.android) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> Context = plus.android.importClass(<span class=\"string\">\"android.content.Context\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> WifiManager = plus.android.importClass(<span class=\"string\">\"android.net.wifi.WifiManager\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> WifiInfo = plus.android.importClass(<span class=\"string\">\"android.net.wifi.WifiInfo\"</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> wifiManager = plus.android.runtimeMainActivity().getSystemService(Context.WIFI_SERVICE);</div><div class=\"line\">        <span class=\"keyword\">var</span> wifiInfo = wifiManager.getConnectionInfo();</div><div class=\"line\">        <span class=\"keyword\">var</span> ipAddress = wifiInfo.getIpAddress();</div><div class=\"line\">        <span class=\"keyword\">if</span>(ipAddress == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"string\">\"未连接wifi\"</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span>((ipAddress &amp; <span class=\"number\">0xff</span>) + <span class=\"string\">\".\"</span> + (ipAddress &gt;&gt; <span class=\"number\">8</span> &amp; <span class=\"number\">0xff</span>) + <span class=\"string\">\".\"</span> + (ipAddress &gt;&gt; <span class=\"number\">16</span> &amp; <span class=\"number\">0xff</span>) + <span class=\"string\">\".\"</span> + (ipAddress &gt;&gt; <span class=\"number\">24</span> &amp; <span class=\"number\">0xff</span>));</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(mui.os.ios) &#123;</div><div class=\"line\">        mui.toast(<span class=\"string\">\"ios暂未获\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>获取wifi的网关</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getOnuIp</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mui.os.android) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> Context = plus.android.importClass(<span class=\"string\">\"android.content.Context\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> WifiManager = plus.android.importClass(<span class=\"string\">\"android.net.wifi.WifiManager\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> WifiInfo = plus.android.importClass(<span class=\"string\">\"android.net.wifi.WifiInfo\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> DhcpInfo=plus.android.importClass(<span class=\"string\">\"android.net.DhcpInfo\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> wifiManager = plus.android.runtimeMainActivity().getSystemService(Context.WIFI_SERVICE);</div><div class=\"line\">        <span class=\"keyword\">var</span> dhcpInfo = wifiManager.getDhcpInfo()</div><div class=\"line\">        <span class=\"keyword\">var</span> begin=dhcpInfo.toString().indexOf(<span class=\"string\">\"gateway\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> end=dhcpInfo.toString().indexOf(<span class=\"string\">\"netmask\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> ipAddress = dhcpInfo.toString().substring(begin+<span class=\"number\">7</span>,end).trim();  </div><div class=\"line\">        <span class=\"keyword\">if</span>(ipAddress == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"string\">\"未连接wifi\"</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span> ipAddress;</div><div class=\"line\"><span class=\"comment\">//        return((ipAddress &amp; 0xff) + \".\" + (ipAddress &gt;&gt; 8 &amp; 0xff) + \".\" + (ipAddress &gt;&gt; 16 &amp; 0xff) + \".\" + (ipAddress &gt;&gt; 24 &amp; 0xff));</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(mui.os.ios) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> WifiManager = plus.ios.importClass(<span class=\"string\">\"WifiManager\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> wifiManager = <span class=\"keyword\">new</span> WifiManager();</div><div class=\"line\">        <span class=\"keyword\">var</span> gateWay = wifiManager.defaultGateWay();</div><div class=\"line\">        <span class=\"keyword\">return</span> gateWay;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"软键盘\"><a href=\"#软键盘\" class=\"headerlink\" title=\"软键盘\"></a>软键盘</h2><ol>\n<li><p>强制打开全键盘</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//弹出软键盘，搜索框获得焦点</span></div><div class=\"line\"><span class=\"keyword\">var</span> nativeWebview, imm, InputMethodManager;</div><div class=\"line\"><span class=\"keyword\">var</span> initNativeObjects = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mui.os.android) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> main = plus.android.runtimeMainActivity();</div><div class=\"line\">        <span class=\"keyword\">var</span> Context = plus.android.importClass(<span class=\"string\">\"android.content.Context\"</span>);</div><div class=\"line\">        InputMethodManager = plus.android.importClass(<span class=\"string\">\"android.view.inputmethod.InputMethodManager\"</span>);</div><div class=\"line\">        imm = main.getSystemService(Context.INPUT_METHOD_SERVICE);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        nativeWebview = plus.webview.currentWebview().nativeInstanceObject();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> showSoftInput = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mui.os.android) &#123;</div><div class=\"line\">        imm.toggleSoftInput(<span class=\"number\">0</span>, InputMethodManager.SHOW_FORCED);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        nativeWebview.plusCallMethod(&#123;</div><div class=\"line\">            <span class=\"string\">\"setKeyboardDisplayRequiresUserAction\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//此处可写具体逻辑设置获取焦点的input</span></div><div class=\"line\">        <span class=\"keyword\">var</span> inputElem = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'input'</span>);</div><div class=\"line\">        inputElem.focus();</div><div class=\"line\">    &#125;, <span class=\"number\">200</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> showSoftInput2 = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> nativeWebview = plus.webview.currentWebview().nativeInstanceObject();</div><div class=\"line\">    <span class=\"keyword\">if</span>(mui.os.android) &#123;</div><div class=\"line\">        <span class=\"comment\">//强制当前webview获得焦点</span></div><div class=\"line\">        plus.android.importClass(nativeWebview);</div><div class=\"line\">        nativeWebview.requestFocus();</div><div class=\"line\">        imm.toggleSoftInput(<span class=\"number\">0</span>, InputMethodManager.SHOW_FORCED);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        nativeWebview.plusCallMethod(&#123;</div><div class=\"line\">            <span class=\"string\">\"setKeyboardDisplayRequiresUserAction\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//此处可写具体逻辑设置获取焦点的input</span></div><div class=\"line\">        <span class=\"keyword\">var</span> inputElem = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'input'</span>);</div><div class=\"line\">        inputElem.select();</div><div class=\"line\">    &#125;, <span class=\"number\">200</span>);</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n</li>\n<li><p>关闭软键盘</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">document</span>.activeElement.blur(); <span class=\"comment\">//隐藏软键盘</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"两次点击退出\"><a href=\"#两次点击退出\" class=\"headerlink\" title=\"两次点击退出\"></a>两次点击退出</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//首页返回键处理  </span></div><div class=\"line\"><span class=\"comment\">//处理逻辑：2秒内，连续两次按返回键，则退出应用  </span></div><div class=\"line\"><span class=\"comment\">//首次按键，提示‘再按一次退出应用’  </span></div><div class=\"line\"><span class=\"keyword\">if</span>(!first) &#123;</div><div class=\"line\">    first = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">    mui.toast(<span class=\"string\">'再按一次退出应用'</span>);</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        first = <span class=\"literal\">null</span>;</div><div class=\"line\">    &#125;, <span class=\"number\">2000</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime() - first &lt; <span class=\"number\">2000</span>) &#123;</div><div class=\"line\">        plus.runtime.quit();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"注销关闭其他窗口\"><a href=\"#注销关闭其他窗口\" class=\"headerlink\" title=\"注销关闭其他窗口\"></a>注销关闭其他窗口</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/*监听注销按钮*/</span></div><div class=\"line\"><span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"logoutBtn\"</span>).addEventListener(<span class=\"string\">\"tap\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> btnArray = [<span class=\"string\">'是'</span>, <span class=\"string\">'否'</span>];</div><div class=\"line\">    mui.confirm(<span class=\"string\">'您确定退出?'</span>, <span class=\"string\">''</span>, btnArray, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(e.index == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">            <span class=\"comment\">// 获取所有Webview窗口</span></div><div class=\"line\">            <span class=\"keyword\">var</span> launchWebview = plus.webview.getLaunchWebview();</div><div class=\"line\">            <span class=\"keyword\">var</span> curr = plus.webview.currentWebview();</div><div class=\"line\">            <span class=\"keyword\">var</span> wvs = plus.webview.all();</div><div class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, len = wvs.length; i &lt; len; i++) &#123;</div><div class=\"line\">                <span class=\"comment\">//关闭除setting页面和首页外的其他页面</span></div><div class=\"line\">                <span class=\"keyword\">if</span>(wvs[i].getURL() == curr.getURL() || wvs[i].getURL() == launchWebview.getURL())</div><div class=\"line\">                    <span class=\"keyword\">continue</span>;</div><div class=\"line\">                plus.webview.close(wvs[i]);</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"comment\">//清除已存储的账号信息</span></div><div class=\"line\">            myStorage.removeItem(<span class=\"string\">'ONU.token.username'</span>);</div><div class=\"line\">            myStorage.removeItem(<span class=\"string\">'ONU.token.password'</span>);</div><div class=\"line\">            myStorage.removeItem(<span class=\"string\">'ONU.token.autoLogin'</span>);</div><div class=\"line\">            myStorage.removeItem(<span class=\"string\">'isLogin'</span>);</div><div class=\"line\">            <span class=\"comment\">//注销静默登录的定时器</span></div><div class=\"line\">            <span class=\"comment\">//clearInterval('backLoading()');</span></div><div class=\"line\">            <span class=\"comment\">//打开login页面后再关闭setting页面</span></div><div class=\"line\">            launchWebview.show();</div><div class=\"line\">            curr.close();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>"},{"title":"spring(2)——IOC浅析","date":"2017-06-14T01:59:11.000Z","_content":"\n这篇博客简单分析了IOC和DI的原理及区别，并介绍了基于xml和注解的Bean配置方式。\n<!--more-->\n## 1. 什么是IOC?\n\n### 1.1 IoC(Inversion of Control)控制反转\n - 控制:控制的双方是什么？谁控制谁？\n    -  主控方：Spring\n    -  被控方：应用程序所使用的资源\n    -  (原始)应用程序控制自己执行操作需要使用的外部资源\n    -  (Spring)Spring控制整个程序中所需要使用的外部资源\n - 反转:什么是反转？反转什么？\n    -  正向：应用程序直接调用资源\n    -  反向：应用程序依赖Spring为其提供资源\n    -  反转的是资源的控制权\n    -  应用程序由主动调用资源，变为被动的等待Spring提供资源\n - 有什么好处？\n    -  正向缺点：应用程序控制的资源分布在程序的每一个地方\n    -  反向的优点：所有的资源都在Spring中，便于管理\n    -  总结：Spring反向控制应用程序所需要使用的外部资源。资源受Spring管理，利用率最大化。\n\n### 1.2 spring演进模式\n\tA.基于分层设计\n\t\tUserAction\t\t\t使用UserService,new UserService()\n\t\tUserService\t\t\t使用UserDAO,new UserDAO()\n\t\tUserDAO\n\tB.工厂模式，使用面向接口编程设计，解决层与层之间的紧耦合\n\t\t制作接口，制作实现类，制作对象工厂\n```java\nA a = AFactory.createA();  \nB b = BFactory.createB();  \na.setB(b);\n```\n\tC.工厂模式+配置\n\t\t制作XML文件，将实现类配置到XML文件中\n\t\t读取XML文件中的配置信息，得到实现类的类名\n\t\t使用反射思想，获取实现类对象 class.newInstance();\n```java\nA a = Factory.create(“a”);  \nB b = Factory.create(“b”);  \na.setB(b);  \n```\n```xml\n<!--配置xml-->\na=AImpl  \nb=BImpl\n```\n\tD.自动的工厂+配置\n```java\n//返回装配好的a   \nA a = Factory.create(“a”);  \n```\n```xml\n<!--xml配置-->\n<bean id=“a” class=“AImpl”>  \n    <property name=“b” ref=“b”/>  \n</bean>  \n<bean id=“b” class=“BImpl”/>  \n```\n    E.工厂由Spring提供，实现类使用XML格式配置\n        工厂由Spring提供，实现类使用XML格式配置\n```java\n//返回装配好的a   \nA a = ApplicationContext.getBean(“a”);  \n```\n```xml\n<!--xml配置-->\n<bean id=“a” class=“AImpl”>  \n    <property name=“b” ref=“b”/>  \n</bean>  \n<bean id=“b” class=“BImpl”/>  \n```\n## 2. 什么是DI？\n### 2.1 DI的概念\nDI(Dependency Injection)依赖注入，指应用程序依赖Spring为其提供运行时所需的资源.\n\n- 谁依赖于谁？            -------   应用程序依赖于IoC容器\n- 为什么需要依赖？        -------   应用程序依赖于IoC容器装配类之间的关系\n- 依赖什么东西？          -------   依赖了IoC容器的装配功能\n- 谁注入于谁？            -------   IoC容器注入应用程序\n- 注入什么东西？          -------   注入应用程序需要的资源（类之间的关系）\n\n更能描述容器其特点的名字——“依赖注入”（Dependency Injection）\nIoC容器应该具有依赖注入功能，因此也可以叫DI容器 \n\n### 2.2 DI实现方式\n\n 1. 构造器注入\n 2. setter注入\n 3. 接口注入\n\n## 3. IOC和DI的关系？\nIOC和DI其实是同一概念的两种说法，两者站立的角度不一样。\nIOC：从spring的角度看，资源的控制权限被反转了\nDI：从应用程序的角度看，应用程序要依赖spring为其注入资源。\n\n## 4. BeanFactory\n\n 1. BeanFactory是ApplicationContext的顶层父接口，使用BeanFactory接口也可以完成获取Bean的操作.\n 2. 操作步骤:\n    ```java\n    //初始化Resource对象\n    Resource res = new ClassPathResource(\"applicationContext.xml\");\n    //初始化BeanFactory对象\n    BeanFactory bf = new XmlBeanFactory(res);\n    //根据id名称获取Bean\n    UserService service = (UserService) bf.getBean(\"userService\");\n    ```\n    \n 3. AppplicationContext与BeanFactory的区别\n   A. 加载方式不同\n\n        AppplicationContext：立即加载，加载配置文件时即加载\n\t\tBeanFactory:延迟加载，获取Bean实例时才加载\n   B. AppplicationContext具有更多的功能\n   \n        国际化处理\n        事件传递\n        Bean自动装配\n        各种不同应用层的Context实现\n        注意：实际开发中，优先选择ApplicationContext对象，避免使用BeanFactory\n\n 4. Schema风格离线约束配置方式\n        A.拷贝访问路径\n\t\tB.打开MyEclipse设置中的XML catalog选项\n\t\tC.创建新的映射\n\t\tD.选择对应的schema风格的约束文件\n\t\tE.将key type修改为schema location\n\t\tF.将要配置的路径复制到key中\n\n## 5. Bean配置（XML）\n### 5.1 Bean初始化\n\n 1. 构造器初始化（重点）\n    **Bean对应的类必须提供一个默认无参可访问的构造方法**\n 2. 静态工厂初始化\n \n    ```xml\n    <bean id=\"userService2\" \n        <!--配置中所配置的class配置成工厂类的类名-->\n        class=\"com.topvision.bean.UserStataicFactory\"\n        <!--配置工厂类中的创建实例的静态方法-->\n        factory-method=\"getInst\">\n    </bean>\n    ```\n 3. 实例工厂初始化\n    提供一个实例工厂类，使用其中的实例方法获取对象。由于该工厂类本身需要创建对象，因此该对象必须受Spring控制，所以必须配置该工厂类为Bean.\n\n    ```xml\n    <!—实例化工厂Bean -->\n    <bean id=\"uf\" class=\"com.topvision.bean.UserFactory\"></bean>\n    <!--使用实例工厂创建Bean -->\n    <!--factory-bean: 配置实例工厂在Spring范围内对应的Bean的id名称-->\n    <!--factory-method：配置工厂类中的创建实例的实例方法-->\n    <bean id=\"userService3\"  factory-bean=\"uf\" factory-method=\"getInst2\"></bean>\n    ```\n    \n### 5.2 Bean的作用域\n\nSpring初始化的Bean默认为单例模式，如果想修改成非单例模式需要修改Bean的作用范围。\n```xml   \n<bean id=”beanId” class=”BeanClassName” scope=”prototype”></bean>\n```\n\t\tscope属性：\n\t\t\tsingleton：单例\n\t\t\tprototype：非单例\n\t\t\trequest：请求对象范围request.setAttribute(\"beanId\",obj);\n\t\t\tsession：会话Session范围request.getSession().setAttribute(\"beanId\",obj);\n\t\t\tglobalSession：全局会话,分布式服务器\n\t\t\t\n### 5.3 Bean的生命周期\n定义Bean初始化与销毁时的动作，属于回调方法配置\n定义bean时指定两个回调方法，控制bean的初始化与销毁操作时执行的动作\n\n- init-method：初始化回调方法名，配置的方法必须由bean对象提供\n- destroy-method：销毁回调方法名，配置的方法必须由bean对象提供\n\n```xml\n<bean id=\"user\" class=\"com.topvision.lifecycle.User\" init-method=\"init\" destroy-method=\"destroy\" scope=\"prototype\"></bean>\n```\n\n- 销毁操作只针对scope=\"singletion\"的对象，对于非单例对象无效\n- 单例对象的销毁是在IoC容器关闭时发生，使用ClassPathXmlApplicationContext对象close方法完成\n- 非单例Bean对象的内存回收交由JVM完成——GC\n\n### 5.4 Bean属性注入\n\n 1. 构造器注入（了解）\n    A.在domain中提供对象的构造方法\n    B.xml配置中设置构造方法的参数\n    ```xml\n    <!-- constructor-arg:使用构造器传递参数  -->\n    <!-- value:赋值 -->\n    <bean id=\"bean6\" class=\"com.topvision.bean.xml.Bean6\">\n        <constructor-arg value=\"topvision\"/>\n        <constructor-arg value=\"2017\"/>\n    </bean>\n    ```\n    注意：如果类型匹配不成功，可以为配置中指定index索引属性，对应构造器中参数的位置.\n    ```xml\n\t<bean id=\"bean6\" class=\"com.topvision.bean.xml.Bean6\">\n\t\t<constructor-arg index=\"0\" value=\"2014\" type=\"java.lang.Integer\"></constructor-arg>\n\t    <constructor-arg index=\"1\" value=\"topvision\" type=\"java.lang.String\"></constructor-arg>\n\t</bean>\n\t```\n\t说明：构造器传参受构造器参数位置和类型的限定，因此不常使用\n\t\n 2. setter注入\n **前提：setter注入要求Bean必须提供无参可访问构造方法**\n\n    A.注入简单类型\n        \n        1.提供对应要注入的属性\n        2.为每个要注入的属性提供对应的标准封装setter方法\n        3.在配置中为Bean指定要注入的属性，使用property元素 name=“属性名” value=”值”\n    ```xml\n    <property name=\"属性名\" value=\"值\"/>\n    ```\n    B.注入引用类型\n         \n        1.为某个Bean注入引用类型的值，首先在Bean对应的类中声明对应的属性\n    ```java\n    private TeacherDAO dao;\n    ``` \n\n\t\t2.为每个要注入的属性提供对应的标准封装setter方法 (访问器)\n    ```xml\n \tpublic void setDao(TeacherDAO dao) {\n\t\tthis.dao = dao;\n\t}\n    ```\n        3.必须保障引入的对象是Spring控制的Bean\n    ```xml\n    <!-- 声明引用类型的资源为Bean -->\n    <bean id=\"teacherDao\" class=\"com.topvision.di.setter.TeacherDAO\">\t</bean>\n    ```\n        4.在Bean的属性注入中，使用ref引用对应的资源 ref=”beanId/beanName”\n    ```xml\n    <!-- setter注入 -->\n\t<!-- name:属性名 -->\n\t<!-- value:简单类型的值 -->\n\t<!-- ref:引用别的Bean，beanId/beanName -->\n\t<bean id=\"bean7\" class=\"com.topvision.bean.xml.Bean7\">\n\t\t<property name=\"name\" value=\"topvision\"/>\n\t\t<property name=\"age\" value=\"8\"/>\n\t\t<property name=\"dao\" ref=\"teacherDao\"></property>\n\t</bean>\n    ```\n    \n## 6. Bean配置（注解）\n从Spring2.5开始提供使用注解的形式配置Bean。\n\n### 6.1 配置Bean使用@Component注解\n如需为Bean定义名称，在参数中添加Bean名称@Component(\"beanName\")\n\n### 6.2 设定Spring的自动扫描路径\n用于检测对应的Bean是否配置了注解，并加载配置了注解的类\n\n - 开启context空间的支持\n```xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n  \txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   \txmlns:context=\"http://www.springframework.org/schema/context\" \n   \txsi:schemaLocation=\"\n\thttp://www.springframework.org/schema/beans \n\thttp://www.springframework.org/schema/beans/spring-beans.xsd\n\thttp://www.springframework.org/schema/context \t\t\t\t\t\n\thttp://www.springframework.org/schema/context/spring-context.xsd\">\n\t\n```\n - 开启自动扫描功能，并指定扫描的路径\n```xml\n<context:component-scan base-package=\"com.topvision.annotation\"></context:component-scan>\n```\n说明：扫描路径可以设置多个，中间使用,隔开，扫描路径包含指定包和子包内所有的类,通常使用*号通配符匹配路径\n\n### 6.3 Spring提供的三个注解\n\n 1. @Repository 用于数据层实现类标注\n 2. @Service 用于业务逻辑层实现类标注\n 3. @Controller 用于控制层实现类进行标注\n\n### 6.4 注入简单类型\n\n 1. 在属性名上方声明该属性自动装配@Autowired\n 2. 在属性名上方声明该属性注入的值@Value(value)\n```java\n@Autowired\n@Value(\"topvision\")\nprivate String msg;\n```\n注意：注解自动装配属性值无需提供对应属性的setter方法\n\n### 6.5 注入引用类型\n\n - 在属性名上方声明该属性自动装配@Autowired\n - 在属性名上方声明该属性注入的值@Qualifier(bean引用名称)\n```java\n@Autowired\n@Qualifier(\"anno2\")\nprivate AnnotationOther other;\n```\n\n### 6.6 Autowired\nAutowired的required属性用用于声明自动装配的数据是必须的。\n\n 1. 如果required=true，必须为其装配数据，如果没有值，抛出异常\n 2. 如果required=false，自动装配数据失败，则注入值为null\n\n### 6.7 Resource\n\n 1. 格式一：@Resource(name=\"myImpl\")\n 2. 格式二：@Autowired(required=false)\n　　　　@Qualifier(\"myImpl\")\n以上两种格式效果相同\n\n### 6.8 Bean声明周期注解\n\n 1. @PostConstruct\n    功能：为当前Bean指定init-method参数\n\t格式：定义在成员方法的上方，兼容静态方法\n 2. @PreDestroy\n    功能：为当前Bean指定destory-method参数\n\t格式：定义在成员方法的上方，兼容静态方法\n\t注意：要求当前类被注册为Bean，否则无效果\n\n### 6.9 Bean作用域注解\n\n在类的定义上方添加@Scope指定Bean的作用域\n常用：@Scope(\"prototype\")\n默认：@Scope(\"singleton\")\n\n### 6.10 配置类注解\n**@Configuration**配置当前类为配置类，用于加载其中配置的Bean，与静态工厂初始化Bean很相似\n**@Bean(name=\"b1\")**将配置类中的某个方法的返回值声明为Bean，该方法必须返回一个对象\n```java\n@Configuration\t\t\t//设定该类参与自动扫描\npublic class MyBeanFactory {\n\t@Bean(name={\"aa\",\"bb\",\"cc\"})//设定该方法的返回值是一个Bean\n\tpublic static BookService getInst(){\n\t\treturn new BookService();\n\t}\n}\n```\n以上操作必须基于自动扫描功能，如不开启自动扫描，Spring将无法查找到对应的注解配置\n\n### 6.11 AnnotationConfigApplicationContext不使用自动扫描\n\nAnnotationConfigApplicationContext对象可以手工加载基于注解配置的Bean\n```java\n//用于手工添加注解开发Bean的上下文对象\nAnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n//加载配置管理类\nctx.register(MyConfiguration.class);\n//刷新上下文对象\nctx.refresh();\n```\n\n注意：注册完成后一定要进行刷新，否则加载的Bean将无法被使用\n\n## 博客链接\n\n 1. [源码解读Spring IOC原理][1]\n 2. [Spring源代码解析][2]\n\n\n    \n\n\n  [1]: http://www.cnblogs.com/ITtangtang/p/3978349.html\n  [2]: http://www.cnblogs.com/dazhaxie/archive/2012/06/18/2553300.html","source":"_posts/spring-2——IOC浅析.md","raw":"---\ntitle: spring(2)——IOC浅析\ncategories:\n  - Spring\ntags:\n  - Spring\n  - IOC\ndate: 2017-06-14 09:59:11\n---\n\n这篇博客简单分析了IOC和DI的原理及区别，并介绍了基于xml和注解的Bean配置方式。\n<!--more-->\n## 1. 什么是IOC?\n\n### 1.1 IoC(Inversion of Control)控制反转\n - 控制:控制的双方是什么？谁控制谁？\n    -  主控方：Spring\n    -  被控方：应用程序所使用的资源\n    -  (原始)应用程序控制自己执行操作需要使用的外部资源\n    -  (Spring)Spring控制整个程序中所需要使用的外部资源\n - 反转:什么是反转？反转什么？\n    -  正向：应用程序直接调用资源\n    -  反向：应用程序依赖Spring为其提供资源\n    -  反转的是资源的控制权\n    -  应用程序由主动调用资源，变为被动的等待Spring提供资源\n - 有什么好处？\n    -  正向缺点：应用程序控制的资源分布在程序的每一个地方\n    -  反向的优点：所有的资源都在Spring中，便于管理\n    -  总结：Spring反向控制应用程序所需要使用的外部资源。资源受Spring管理，利用率最大化。\n\n### 1.2 spring演进模式\n\tA.基于分层设计\n\t\tUserAction\t\t\t使用UserService,new UserService()\n\t\tUserService\t\t\t使用UserDAO,new UserDAO()\n\t\tUserDAO\n\tB.工厂模式，使用面向接口编程设计，解决层与层之间的紧耦合\n\t\t制作接口，制作实现类，制作对象工厂\n```java\nA a = AFactory.createA();  \nB b = BFactory.createB();  \na.setB(b);\n```\n\tC.工厂模式+配置\n\t\t制作XML文件，将实现类配置到XML文件中\n\t\t读取XML文件中的配置信息，得到实现类的类名\n\t\t使用反射思想，获取实现类对象 class.newInstance();\n```java\nA a = Factory.create(“a”);  \nB b = Factory.create(“b”);  \na.setB(b);  \n```\n```xml\n<!--配置xml-->\na=AImpl  \nb=BImpl\n```\n\tD.自动的工厂+配置\n```java\n//返回装配好的a   \nA a = Factory.create(“a”);  \n```\n```xml\n<!--xml配置-->\n<bean id=“a” class=“AImpl”>  \n    <property name=“b” ref=“b”/>  \n</bean>  \n<bean id=“b” class=“BImpl”/>  \n```\n    E.工厂由Spring提供，实现类使用XML格式配置\n        工厂由Spring提供，实现类使用XML格式配置\n```java\n//返回装配好的a   \nA a = ApplicationContext.getBean(“a”);  \n```\n```xml\n<!--xml配置-->\n<bean id=“a” class=“AImpl”>  \n    <property name=“b” ref=“b”/>  \n</bean>  \n<bean id=“b” class=“BImpl”/>  \n```\n## 2. 什么是DI？\n### 2.1 DI的概念\nDI(Dependency Injection)依赖注入，指应用程序依赖Spring为其提供运行时所需的资源.\n\n- 谁依赖于谁？            -------   应用程序依赖于IoC容器\n- 为什么需要依赖？        -------   应用程序依赖于IoC容器装配类之间的关系\n- 依赖什么东西？          -------   依赖了IoC容器的装配功能\n- 谁注入于谁？            -------   IoC容器注入应用程序\n- 注入什么东西？          -------   注入应用程序需要的资源（类之间的关系）\n\n更能描述容器其特点的名字——“依赖注入”（Dependency Injection）\nIoC容器应该具有依赖注入功能，因此也可以叫DI容器 \n\n### 2.2 DI实现方式\n\n 1. 构造器注入\n 2. setter注入\n 3. 接口注入\n\n## 3. IOC和DI的关系？\nIOC和DI其实是同一概念的两种说法，两者站立的角度不一样。\nIOC：从spring的角度看，资源的控制权限被反转了\nDI：从应用程序的角度看，应用程序要依赖spring为其注入资源。\n\n## 4. BeanFactory\n\n 1. BeanFactory是ApplicationContext的顶层父接口，使用BeanFactory接口也可以完成获取Bean的操作.\n 2. 操作步骤:\n    ```java\n    //初始化Resource对象\n    Resource res = new ClassPathResource(\"applicationContext.xml\");\n    //初始化BeanFactory对象\n    BeanFactory bf = new XmlBeanFactory(res);\n    //根据id名称获取Bean\n    UserService service = (UserService) bf.getBean(\"userService\");\n    ```\n    \n 3. AppplicationContext与BeanFactory的区别\n   A. 加载方式不同\n\n        AppplicationContext：立即加载，加载配置文件时即加载\n\t\tBeanFactory:延迟加载，获取Bean实例时才加载\n   B. AppplicationContext具有更多的功能\n   \n        国际化处理\n        事件传递\n        Bean自动装配\n        各种不同应用层的Context实现\n        注意：实际开发中，优先选择ApplicationContext对象，避免使用BeanFactory\n\n 4. Schema风格离线约束配置方式\n        A.拷贝访问路径\n\t\tB.打开MyEclipse设置中的XML catalog选项\n\t\tC.创建新的映射\n\t\tD.选择对应的schema风格的约束文件\n\t\tE.将key type修改为schema location\n\t\tF.将要配置的路径复制到key中\n\n## 5. Bean配置（XML）\n### 5.1 Bean初始化\n\n 1. 构造器初始化（重点）\n    **Bean对应的类必须提供一个默认无参可访问的构造方法**\n 2. 静态工厂初始化\n \n    ```xml\n    <bean id=\"userService2\" \n        <!--配置中所配置的class配置成工厂类的类名-->\n        class=\"com.topvision.bean.UserStataicFactory\"\n        <!--配置工厂类中的创建实例的静态方法-->\n        factory-method=\"getInst\">\n    </bean>\n    ```\n 3. 实例工厂初始化\n    提供一个实例工厂类，使用其中的实例方法获取对象。由于该工厂类本身需要创建对象，因此该对象必须受Spring控制，所以必须配置该工厂类为Bean.\n\n    ```xml\n    <!—实例化工厂Bean -->\n    <bean id=\"uf\" class=\"com.topvision.bean.UserFactory\"></bean>\n    <!--使用实例工厂创建Bean -->\n    <!--factory-bean: 配置实例工厂在Spring范围内对应的Bean的id名称-->\n    <!--factory-method：配置工厂类中的创建实例的实例方法-->\n    <bean id=\"userService3\"  factory-bean=\"uf\" factory-method=\"getInst2\"></bean>\n    ```\n    \n### 5.2 Bean的作用域\n\nSpring初始化的Bean默认为单例模式，如果想修改成非单例模式需要修改Bean的作用范围。\n```xml   \n<bean id=”beanId” class=”BeanClassName” scope=”prototype”></bean>\n```\n\t\tscope属性：\n\t\t\tsingleton：单例\n\t\t\tprototype：非单例\n\t\t\trequest：请求对象范围request.setAttribute(\"beanId\",obj);\n\t\t\tsession：会话Session范围request.getSession().setAttribute(\"beanId\",obj);\n\t\t\tglobalSession：全局会话,分布式服务器\n\t\t\t\n### 5.3 Bean的生命周期\n定义Bean初始化与销毁时的动作，属于回调方法配置\n定义bean时指定两个回调方法，控制bean的初始化与销毁操作时执行的动作\n\n- init-method：初始化回调方法名，配置的方法必须由bean对象提供\n- destroy-method：销毁回调方法名，配置的方法必须由bean对象提供\n\n```xml\n<bean id=\"user\" class=\"com.topvision.lifecycle.User\" init-method=\"init\" destroy-method=\"destroy\" scope=\"prototype\"></bean>\n```\n\n- 销毁操作只针对scope=\"singletion\"的对象，对于非单例对象无效\n- 单例对象的销毁是在IoC容器关闭时发生，使用ClassPathXmlApplicationContext对象close方法完成\n- 非单例Bean对象的内存回收交由JVM完成——GC\n\n### 5.4 Bean属性注入\n\n 1. 构造器注入（了解）\n    A.在domain中提供对象的构造方法\n    B.xml配置中设置构造方法的参数\n    ```xml\n    <!-- constructor-arg:使用构造器传递参数  -->\n    <!-- value:赋值 -->\n    <bean id=\"bean6\" class=\"com.topvision.bean.xml.Bean6\">\n        <constructor-arg value=\"topvision\"/>\n        <constructor-arg value=\"2017\"/>\n    </bean>\n    ```\n    注意：如果类型匹配不成功，可以为配置中指定index索引属性，对应构造器中参数的位置.\n    ```xml\n\t<bean id=\"bean6\" class=\"com.topvision.bean.xml.Bean6\">\n\t\t<constructor-arg index=\"0\" value=\"2014\" type=\"java.lang.Integer\"></constructor-arg>\n\t    <constructor-arg index=\"1\" value=\"topvision\" type=\"java.lang.String\"></constructor-arg>\n\t</bean>\n\t```\n\t说明：构造器传参受构造器参数位置和类型的限定，因此不常使用\n\t\n 2. setter注入\n **前提：setter注入要求Bean必须提供无参可访问构造方法**\n\n    A.注入简单类型\n        \n        1.提供对应要注入的属性\n        2.为每个要注入的属性提供对应的标准封装setter方法\n        3.在配置中为Bean指定要注入的属性，使用property元素 name=“属性名” value=”值”\n    ```xml\n    <property name=\"属性名\" value=\"值\"/>\n    ```\n    B.注入引用类型\n         \n        1.为某个Bean注入引用类型的值，首先在Bean对应的类中声明对应的属性\n    ```java\n    private TeacherDAO dao;\n    ``` \n\n\t\t2.为每个要注入的属性提供对应的标准封装setter方法 (访问器)\n    ```xml\n \tpublic void setDao(TeacherDAO dao) {\n\t\tthis.dao = dao;\n\t}\n    ```\n        3.必须保障引入的对象是Spring控制的Bean\n    ```xml\n    <!-- 声明引用类型的资源为Bean -->\n    <bean id=\"teacherDao\" class=\"com.topvision.di.setter.TeacherDAO\">\t</bean>\n    ```\n        4.在Bean的属性注入中，使用ref引用对应的资源 ref=”beanId/beanName”\n    ```xml\n    <!-- setter注入 -->\n\t<!-- name:属性名 -->\n\t<!-- value:简单类型的值 -->\n\t<!-- ref:引用别的Bean，beanId/beanName -->\n\t<bean id=\"bean7\" class=\"com.topvision.bean.xml.Bean7\">\n\t\t<property name=\"name\" value=\"topvision\"/>\n\t\t<property name=\"age\" value=\"8\"/>\n\t\t<property name=\"dao\" ref=\"teacherDao\"></property>\n\t</bean>\n    ```\n    \n## 6. Bean配置（注解）\n从Spring2.5开始提供使用注解的形式配置Bean。\n\n### 6.1 配置Bean使用@Component注解\n如需为Bean定义名称，在参数中添加Bean名称@Component(\"beanName\")\n\n### 6.2 设定Spring的自动扫描路径\n用于检测对应的Bean是否配置了注解，并加载配置了注解的类\n\n - 开启context空间的支持\n```xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n  \txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   \txmlns:context=\"http://www.springframework.org/schema/context\" \n   \txsi:schemaLocation=\"\n\thttp://www.springframework.org/schema/beans \n\thttp://www.springframework.org/schema/beans/spring-beans.xsd\n\thttp://www.springframework.org/schema/context \t\t\t\t\t\n\thttp://www.springframework.org/schema/context/spring-context.xsd\">\n\t\n```\n - 开启自动扫描功能，并指定扫描的路径\n```xml\n<context:component-scan base-package=\"com.topvision.annotation\"></context:component-scan>\n```\n说明：扫描路径可以设置多个，中间使用,隔开，扫描路径包含指定包和子包内所有的类,通常使用*号通配符匹配路径\n\n### 6.3 Spring提供的三个注解\n\n 1. @Repository 用于数据层实现类标注\n 2. @Service 用于业务逻辑层实现类标注\n 3. @Controller 用于控制层实现类进行标注\n\n### 6.4 注入简单类型\n\n 1. 在属性名上方声明该属性自动装配@Autowired\n 2. 在属性名上方声明该属性注入的值@Value(value)\n```java\n@Autowired\n@Value(\"topvision\")\nprivate String msg;\n```\n注意：注解自动装配属性值无需提供对应属性的setter方法\n\n### 6.5 注入引用类型\n\n - 在属性名上方声明该属性自动装配@Autowired\n - 在属性名上方声明该属性注入的值@Qualifier(bean引用名称)\n```java\n@Autowired\n@Qualifier(\"anno2\")\nprivate AnnotationOther other;\n```\n\n### 6.6 Autowired\nAutowired的required属性用用于声明自动装配的数据是必须的。\n\n 1. 如果required=true，必须为其装配数据，如果没有值，抛出异常\n 2. 如果required=false，自动装配数据失败，则注入值为null\n\n### 6.7 Resource\n\n 1. 格式一：@Resource(name=\"myImpl\")\n 2. 格式二：@Autowired(required=false)\n　　　　@Qualifier(\"myImpl\")\n以上两种格式效果相同\n\n### 6.8 Bean声明周期注解\n\n 1. @PostConstruct\n    功能：为当前Bean指定init-method参数\n\t格式：定义在成员方法的上方，兼容静态方法\n 2. @PreDestroy\n    功能：为当前Bean指定destory-method参数\n\t格式：定义在成员方法的上方，兼容静态方法\n\t注意：要求当前类被注册为Bean，否则无效果\n\n### 6.9 Bean作用域注解\n\n在类的定义上方添加@Scope指定Bean的作用域\n常用：@Scope(\"prototype\")\n默认：@Scope(\"singleton\")\n\n### 6.10 配置类注解\n**@Configuration**配置当前类为配置类，用于加载其中配置的Bean，与静态工厂初始化Bean很相似\n**@Bean(name=\"b1\")**将配置类中的某个方法的返回值声明为Bean，该方法必须返回一个对象\n```java\n@Configuration\t\t\t//设定该类参与自动扫描\npublic class MyBeanFactory {\n\t@Bean(name={\"aa\",\"bb\",\"cc\"})//设定该方法的返回值是一个Bean\n\tpublic static BookService getInst(){\n\t\treturn new BookService();\n\t}\n}\n```\n以上操作必须基于自动扫描功能，如不开启自动扫描，Spring将无法查找到对应的注解配置\n\n### 6.11 AnnotationConfigApplicationContext不使用自动扫描\n\nAnnotationConfigApplicationContext对象可以手工加载基于注解配置的Bean\n```java\n//用于手工添加注解开发Bean的上下文对象\nAnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n//加载配置管理类\nctx.register(MyConfiguration.class);\n//刷新上下文对象\nctx.refresh();\n```\n\n注意：注册完成后一定要进行刷新，否则加载的Bean将无法被使用\n\n## 博客链接\n\n 1. [源码解读Spring IOC原理][1]\n 2. [Spring源代码解析][2]\n\n\n    \n\n\n  [1]: http://www.cnblogs.com/ITtangtang/p/3978349.html\n  [2]: http://www.cnblogs.com/dazhaxie/archive/2012/06/18/2553300.html","slug":"spring-2——IOC浅析","published":1,"updated":"2017-06-14T02:42:34.767Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0egi000kssvfo0hk63go","content":"<p>这篇博客简单分析了IOC和DI的原理及区别，并介绍了基于xml和注解的Bean配置方式。<br><a id=\"more\"></a></p>\n<h2 id=\"1-什么是IOC\"><a href=\"#1-什么是IOC\" class=\"headerlink\" title=\"1. 什么是IOC?\"></a>1. 什么是IOC?</h2><h3 id=\"1-1-IoC-Inversion-of-Control-控制反转\"><a href=\"#1-1-IoC-Inversion-of-Control-控制反转\" class=\"headerlink\" title=\"1.1 IoC(Inversion of Control)控制反转\"></a>1.1 IoC(Inversion of Control)控制反转</h3><ul>\n<li>控制:控制的双方是什么？谁控制谁？<ul>\n<li>主控方：Spring</li>\n<li>被控方：应用程序所使用的资源</li>\n<li>(原始)应用程序控制自己执行操作需要使用的外部资源</li>\n<li>(Spring)Spring控制整个程序中所需要使用的外部资源</li>\n</ul>\n</li>\n<li>反转:什么是反转？反转什么？<ul>\n<li>正向：应用程序直接调用资源</li>\n<li>反向：应用程序依赖Spring为其提供资源</li>\n<li>反转的是资源的控制权</li>\n<li>应用程序由主动调用资源，变为被动的等待Spring提供资源</li>\n</ul>\n</li>\n<li>有什么好处？<ul>\n<li>正向缺点：应用程序控制的资源分布在程序的每一个地方</li>\n<li>反向的优点：所有的资源都在Spring中，便于管理</li>\n<li>总结：Spring反向控制应用程序所需要使用的外部资源。资源受Spring管理，利用率最大化。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-2-spring演进模式\"><a href=\"#1-2-spring演进模式\" class=\"headerlink\" title=\"1.2 spring演进模式\"></a>1.2 spring演进模式</h3><pre><code>A.基于分层设计\n    UserAction            使用UserService,new UserService()\n    UserService            使用UserDAO,new UserDAO()\n    UserDAO\nB.工厂模式，使用面向接口编程设计，解决层与层之间的紧耦合\n    制作接口，制作实现类，制作对象工厂\n</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">A a = AFactory.createA();  </div><div class=\"line\">B b = BFactory.createB();  </div><div class=\"line\">a.setB(b);</div></pre></td></tr></table></figure>\n<pre><code>C.工厂模式+配置\n    制作XML文件，将实现类配置到XML文件中\n    读取XML文件中的配置信息，得到实现类的类名\n    使用反射思想，获取实现类对象 class.newInstance();\n</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">A a = Factory.create(“a”);  </div><div class=\"line\">B b = Factory.create(“b”);  </div><div class=\"line\">a.setB(b);</div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!--配置xml--&gt;</span></div><div class=\"line\">a=AImpl  </div><div class=\"line\">b=BImpl</div></pre></td></tr></table></figure>\n<pre><code>D.自动的工厂+配置\n</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//返回装配好的a   </span></div><div class=\"line\">A a = Factory.create(“a”);</div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!--xml配置--&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">“a”</span> <span class=\"attr\">class</span>=<span class=\"string\">“AImpl”</span>&gt;</span>  </div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">“b”</span> <span class=\"attr\">ref</span>=<span class=\"string\">“b”/</span>&gt;</span>  </div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span>  </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">“b”</span> <span class=\"attr\">class</span>=<span class=\"string\">“BImpl”/</span>&gt;</span></div></pre></td></tr></table></figure>\n<pre><code>E.工厂由Spring提供，实现类使用XML格式配置\n    工厂由Spring提供，实现类使用XML格式配置\n</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//返回装配好的a   </span></div><div class=\"line\">A a = ApplicationContext.getBean(“a”);</div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!--xml配置--&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">“a”</span> <span class=\"attr\">class</span>=<span class=\"string\">“AImpl”</span>&gt;</span>  </div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">“b”</span> <span class=\"attr\">ref</span>=<span class=\"string\">“b”/</span>&gt;</span>  </div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span>  </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">“b”</span> <span class=\"attr\">class</span>=<span class=\"string\">“BImpl”/</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"2-什么是DI？\"><a href=\"#2-什么是DI？\" class=\"headerlink\" title=\"2. 什么是DI？\"></a>2. 什么是DI？</h2><h3 id=\"2-1-DI的概念\"><a href=\"#2-1-DI的概念\" class=\"headerlink\" title=\"2.1 DI的概念\"></a>2.1 DI的概念</h3><p>DI(Dependency Injection)依赖注入，指应用程序依赖Spring为其提供运行时所需的资源.</p>\n<ul>\n<li>谁依赖于谁？            ——-   应用程序依赖于IoC容器</li>\n<li>为什么需要依赖？        ——-   应用程序依赖于IoC容器装配类之间的关系</li>\n<li>依赖什么东西？          ——-   依赖了IoC容器的装配功能</li>\n<li>谁注入于谁？            ——-   IoC容器注入应用程序</li>\n<li>注入什么东西？          ——-   注入应用程序需要的资源（类之间的关系）</li>\n</ul>\n<p>更能描述容器其特点的名字——“依赖注入”（Dependency Injection）<br>IoC容器应该具有依赖注入功能，因此也可以叫DI容器 </p>\n<h3 id=\"2-2-DI实现方式\"><a href=\"#2-2-DI实现方式\" class=\"headerlink\" title=\"2.2 DI实现方式\"></a>2.2 DI实现方式</h3><ol>\n<li>构造器注入</li>\n<li>setter注入</li>\n<li>接口注入</li>\n</ol>\n<h2 id=\"3-IOC和DI的关系？\"><a href=\"#3-IOC和DI的关系？\" class=\"headerlink\" title=\"3. IOC和DI的关系？\"></a>3. IOC和DI的关系？</h2><p>IOC和DI其实是同一概念的两种说法，两者站立的角度不一样。<br>IOC：从spring的角度看，资源的控制权限被反转了<br>DI：从应用程序的角度看，应用程序要依赖spring为其注入资源。</p>\n<h2 id=\"4-BeanFactory\"><a href=\"#4-BeanFactory\" class=\"headerlink\" title=\"4. BeanFactory\"></a>4. BeanFactory</h2><ol>\n<li>BeanFactory是ApplicationContext的顶层父接口，使用BeanFactory接口也可以完成获取Bean的操作.</li>\n<li>操作步骤:<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//初始化Resource对象</span></div><div class=\"line\">Resource res = <span class=\"keyword\">new</span> ClassPathResource(<span class=\"string\">\"applicationContext.xml\"</span>);</div><div class=\"line\"><span class=\"comment\">//初始化BeanFactory对象</span></div><div class=\"line\">BeanFactory bf = <span class=\"keyword\">new</span> XmlBeanFactory(res);</div><div class=\"line\"><span class=\"comment\">//根据id名称获取Bean</span></div><div class=\"line\">UserService service = (UserService) bf.getBean(<span class=\"string\">\"userService\"</span>);</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<ol>\n<li><p>AppplicationContext与BeanFactory的区别<br>A. 加载方式不同</p>\n<pre><code>AppplicationContext：立即加载，加载配置文件时即加载\nBeanFactory:延迟加载，获取Bean实例时才加载\n</code></pre><p>B. AppplicationContext具有更多的功能</p>\n<pre><code>国际化处理\n事件传递\nBean自动装配\n各种不同应用层的Context实现\n注意：实际开发中，优先选择ApplicationContext对象，避免使用BeanFactory\n</code></pre></li>\n<li><p>Schema风格离线约束配置方式</p>\n<pre><code>A.拷贝访问路径\nB.打开MyEclipse设置中的XML catalog选项\nC.创建新的映射\nD.选择对应的schema风格的约束文件\nE.将key type修改为schema location\nF.将要配置的路径复制到key中\n</code></pre></li>\n</ol>\n<h2 id=\"5-Bean配置（XML）\"><a href=\"#5-Bean配置（XML）\" class=\"headerlink\" title=\"5. Bean配置（XML）\"></a>5. Bean配置（XML）</h2><h3 id=\"5-1-Bean初始化\"><a href=\"#5-1-Bean初始化\" class=\"headerlink\" title=\"5.1 Bean初始化\"></a>5.1 Bean初始化</h3><ol>\n<li>构造器初始化（重点）<br><strong>Bean对应的类必须提供一个默认无参可访问的构造方法</strong></li>\n<li><p>静态工厂初始化</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;bean id=\"userService2\" </div><div class=\"line\">    &lt;!--配置中所配置的class配置成工厂类的类名--&gt;</div><div class=\"line\">    class=\"com.topvision.bean.UserStataicFactory\"</div><div class=\"line\">    &lt;!--配置工厂类中的创建实例的静态方法--&gt;</div><div class=\"line\">    factory-method=\"getInst\"&gt;</div><div class=\"line\">&lt;/bean&gt;</div></pre></td></tr></table></figure>\n</li>\n<li><p>实例工厂初始化<br>提供一个实例工厂类，使用其中的实例方法获取对象。由于该工厂类本身需要创建对象，因此该对象必须受Spring控制，所以必须配置该工厂类为Bean.</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">!—实例化工厂Bean</span> <span class=\"attr\">--</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"uf\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.bean.UserFactory\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!--使用实例工厂创建Bean --&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!--factory-bean: 配置实例工厂在Spring范围内对应的Bean的id名称--&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!--factory-method：配置工厂类中的创建实例的实例方法--&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"userService3\"</span>  <span class=\"attr\">factory-bean</span>=<span class=\"string\">\"uf\"</span> <span class=\"attr\">factory-method</span>=<span class=\"string\">\"getInst2\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"5-2-Bean的作用域\"><a href=\"#5-2-Bean的作用域\" class=\"headerlink\" title=\"5.2 Bean的作用域\"></a>5.2 Bean的作用域</h3><p>Spring初始化的Bean默认为单例模式，如果想修改成非单例模式需要修改Bean的作用范围。<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">”beanId”</span> <span class=\"attr\">class</span>=<span class=\"string\">”BeanClassName”</span> <span class=\"attr\">scope</span>=<span class=\"string\">”prototype”</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<pre><code>scope属性：\n    singleton：单例\n    prototype：非单例\n    request：请求对象范围request.setAttribute(&quot;beanId&quot;,obj);\n    session：会话Session范围request.getSession().setAttribute(&quot;beanId&quot;,obj);\n    globalSession：全局会话,分布式服务器\n</code></pre><h3 id=\"5-3-Bean的生命周期\"><a href=\"#5-3-Bean的生命周期\" class=\"headerlink\" title=\"5.3 Bean的生命周期\"></a>5.3 Bean的生命周期</h3><p>定义Bean初始化与销毁时的动作，属于回调方法配置<br>定义bean时指定两个回调方法，控制bean的初始化与销毁操作时执行的动作</p>\n<ul>\n<li>init-method：初始化回调方法名，配置的方法必须由bean对象提供</li>\n<li>destroy-method：销毁回调方法名，配置的方法必须由bean对象提供</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"user\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.lifecycle.User\"</span> <span class=\"attr\">init-method</span>=<span class=\"string\">\"init\"</span> <span class=\"attr\">destroy-method</span>=<span class=\"string\">\"destroy\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"prototype\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n<ul>\n<li>销毁操作只针对scope=”singletion”的对象，对于非单例对象无效</li>\n<li>单例对象的销毁是在IoC容器关闭时发生，使用ClassPathXmlApplicationContext对象close方法完成</li>\n<li>非单例Bean对象的内存回收交由JVM完成——GC</li>\n</ul>\n<h3 id=\"5-4-Bean属性注入\"><a href=\"#5-4-Bean属性注入\" class=\"headerlink\" title=\"5.4 Bean属性注入\"></a>5.4 Bean属性注入</h3><ol>\n<li><p>构造器注入（了解）<br>A.在domain中提供对象的构造方法<br>B.xml配置中设置构造方法的参数</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- constructor-arg:使用构造器传递参数  --&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!-- value:赋值 --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"bean6\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.bean.xml.Bean6\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">value</span>=<span class=\"string\">\"topvision\"</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">value</span>=<span class=\"string\">\"2017\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>注意：如果类型匹配不成功，可以为配置中指定index索引属性，对应构造器中参数的位置.</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"bean6\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.bean.xml.Bean6\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">index</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"2014\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"java.lang.Integer\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">index</span>=<span class=\"string\">\"1\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"topvision\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"java.lang.String\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>说明：构造器传参受构造器参数位置和类型的限定，因此不常使用</p>\n</li>\n<li><p>setter注入<br><strong>前提：setter注入要求Bean必须提供无参可访问构造方法</strong></p>\n<p>A.注入简单类型</p>\n<pre><code>1.提供对应要注入的属性\n2.为每个要注入的属性提供对应的标准封装setter方法\n3.在配置中为Bean指定要注入的属性，使用property元素 name=“属性名” value=”值”\n</code></pre><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"属性名\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"值\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<p>B.注入引用类型</p>\n<pre><code>1.为某个Bean注入引用类型的值，首先在Bean对应的类中声明对应的属性\n</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"keyword\">private</span> TeacherDAO dao;</div><div class=\"line\">   ``` </div><div class=\"line\"></div><div class=\"line\">\t<span class=\"number\">2</span>.为每个要注入的属性提供对应的标准封装setter方法 (访问器)</div><div class=\"line\">   ```<span class=\"function\">xml</span></div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setDao</span><span class=\"params\">(TeacherDAO dao)</span> &#123;</div><div class=\"line\">\t<span class=\"keyword\">this</span>.dao = dao;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<pre><code>3.必须保障引入的对象是Spring控制的Bean\n</code></pre><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- 声明引用类型的资源为Bean --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"teacherDao\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.di.setter.TeacherDAO\"</span>&gt;</span>\t<span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n<pre><code>4.在Bean的属性注入中，使用ref引用对应的资源 ref=”beanId/beanName”\n</code></pre><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"comment\">&lt;!-- setter注入 --&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!-- name:属性名 --&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!-- value:简单类型的值 --&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!-- ref:引用别的Bean，beanId/beanName --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"bean7\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.bean.xml.Bean7\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"topvision\"</span>/&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"8\"</span>/&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dao\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"teacherDao\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"6-Bean配置（注解）\"><a href=\"#6-Bean配置（注解）\" class=\"headerlink\" title=\"6. Bean配置（注解）\"></a>6. Bean配置（注解）</h2><p>从Spring2.5开始提供使用注解的形式配置Bean。</p>\n<h3 id=\"6-1-配置Bean使用-Component注解\"><a href=\"#6-1-配置Bean使用-Component注解\" class=\"headerlink\" title=\"6.1 配置Bean使用@Component注解\"></a>6.1 配置Bean使用@Component注解</h3><p>如需为Bean定义名称，在参数中添加Bean名称@Component(“beanName”)</p>\n<h3 id=\"6-2-设定Spring的自动扫描路径\"><a href=\"#6-2-设定Spring的自动扫描路径\" class=\"headerlink\" title=\"6.2 设定Spring的自动扫描路径\"></a>6.2 设定Spring的自动扫描路径</h3><p>用于检测对应的Bean是否配置了注解，并加载配置了注解的类</p>\n<ul>\n<li><p>开启context空间的支持</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></div><div class=\"line\">  \t<span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></div><div class=\"line\">   \t<span class=\"attr\">xmlns:context</span>=<span class=\"string\">\"http://www.springframework.org/schema/context\"</span> </div><div class=\"line\">   \t<span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"</span></div><div class=\"line\">\thttp://www.springframework.org/schema/beans </div><div class=\"line\">\thttp://www.springframework.org/schema/beans/spring-beans.xsd</div><div class=\"line\">\thttp://www.springframework.org/schema/context \t\t\t\t\t</div><div class=\"line\">\thttp://www.springframework.org/schema/context/spring-context.xsd\"&gt;</div></pre></td></tr></table></figure>\n</li>\n<li><p>开启自动扫描功能，并指定扫描的路径</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context:component-scan</span> <span class=\"attr\">base-package</span>=<span class=\"string\">\"com.topvision.annotation\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">context:component-scan</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>说明：扫描路径可以设置多个，中间使用,隔开，扫描路径包含指定包和子包内所有的类,通常使用*号通配符匹配路径</p>\n<h3 id=\"6-3-Spring提供的三个注解\"><a href=\"#6-3-Spring提供的三个注解\" class=\"headerlink\" title=\"6.3 Spring提供的三个注解\"></a>6.3 Spring提供的三个注解</h3><ol>\n<li>@Repository 用于数据层实现类标注</li>\n<li>@Service 用于业务逻辑层实现类标注</li>\n<li>@Controller 用于控制层实现类进行标注</li>\n</ol>\n<h3 id=\"6-4-注入简单类型\"><a href=\"#6-4-注入简单类型\" class=\"headerlink\" title=\"6.4 注入简单类型\"></a>6.4 注入简单类型</h3><ol>\n<li>在属性名上方声明该属性自动装配@Autowired</li>\n<li>在属性名上方声明该属性注入的值@Value(value)<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Autowired</span></div><div class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"topvision\"</span>)</div><div class=\"line\"><span class=\"keyword\">private</span> String msg;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>注意：注解自动装配属性值无需提供对应属性的setter方法</p>\n<h3 id=\"6-5-注入引用类型\"><a href=\"#6-5-注入引用类型\" class=\"headerlink\" title=\"6.5 注入引用类型\"></a>6.5 注入引用类型</h3><ul>\n<li>在属性名上方声明该属性自动装配@Autowired</li>\n<li>在属性名上方声明该属性注入的值@Qualifier(bean引用名称)<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Autowired</span></div><div class=\"line\"><span class=\"meta\">@Qualifier</span>(<span class=\"string\">\"anno2\"</span>)</div><div class=\"line\"><span class=\"keyword\">private</span> AnnotationOther other;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"6-6-Autowired\"><a href=\"#6-6-Autowired\" class=\"headerlink\" title=\"6.6 Autowired\"></a>6.6 Autowired</h3><p>Autowired的required属性用用于声明自动装配的数据是必须的。</p>\n<ol>\n<li>如果required=true，必须为其装配数据，如果没有值，抛出异常</li>\n<li>如果required=false，自动装配数据失败，则注入值为null</li>\n</ol>\n<h3 id=\"6-7-Resource\"><a href=\"#6-7-Resource\" class=\"headerlink\" title=\"6.7 Resource\"></a>6.7 Resource</h3><ol>\n<li>格式一：@Resource(name=”myImpl”)</li>\n<li>格式二：@Autowired(required=false)<br>　　　　@Qualifier(“myImpl”)<br>以上两种格式效果相同</li>\n</ol>\n<h3 id=\"6-8-Bean声明周期注解\"><a href=\"#6-8-Bean声明周期注解\" class=\"headerlink\" title=\"6.8 Bean声明周期注解\"></a>6.8 Bean声明周期注解</h3><ol>\n<li>@PostConstruct<br>功能：为当前Bean指定init-method参数<br>格式：定义在成员方法的上方，兼容静态方法</li>\n<li>@PreDestroy<br>功能：为当前Bean指定destory-method参数<br>格式：定义在成员方法的上方，兼容静态方法<br>注意：要求当前类被注册为Bean，否则无效果</li>\n</ol>\n<h3 id=\"6-9-Bean作用域注解\"><a href=\"#6-9-Bean作用域注解\" class=\"headerlink\" title=\"6.9 Bean作用域注解\"></a>6.9 Bean作用域注解</h3><p>在类的定义上方添加@Scope指定Bean的作用域<br>常用：@Scope(“prototype”)<br>默认：@Scope(“singleton”)</p>\n<h3 id=\"6-10-配置类注解\"><a href=\"#6-10-配置类注解\" class=\"headerlink\" title=\"6.10 配置类注解\"></a>6.10 配置类注解</h3><p><strong>@Configuration</strong>配置当前类为配置类，用于加载其中配置的Bean，与静态工厂初始化Bean很相似<br><strong>@Bean(name=”b1”)</strong>将配置类中的某个方法的返回值声明为Bean，该方法必须返回一个对象<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Configuration</span>\t\t\t<span class=\"comment\">//设定该类参与自动扫描</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBeanFactory</span> </span>&#123;</div><div class=\"line\">\t<span class=\"meta\">@Bean</span>(name=&#123;<span class=\"string\">\"aa\"</span>,<span class=\"string\">\"bb\"</span>,<span class=\"string\">\"cc\"</span>&#125;)<span class=\"comment\">//设定该方法的返回值是一个Bean</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> BookService <span class=\"title\">getInst</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> BookService();</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>以上操作必须基于自动扫描功能，如不开启自动扫描，Spring将无法查找到对应的注解配置</p>\n<h3 id=\"6-11-AnnotationConfigApplicationContext不使用自动扫描\"><a href=\"#6-11-AnnotationConfigApplicationContext不使用自动扫描\" class=\"headerlink\" title=\"6.11 AnnotationConfigApplicationContext不使用自动扫描\"></a>6.11 AnnotationConfigApplicationContext不使用自动扫描</h3><p>AnnotationConfigApplicationContext对象可以手工加载基于注解配置的Bean<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//用于手工添加注解开发Bean的上下文对象</span></div><div class=\"line\">AnnotationConfigApplicationContext ctx = <span class=\"keyword\">new</span> AnnotationConfigApplicationContext();</div><div class=\"line\"><span class=\"comment\">//加载配置管理类</span></div><div class=\"line\">ctx.register(MyConfiguration.class);</div><div class=\"line\"><span class=\"comment\">//刷新上下文对象</span></div><div class=\"line\">ctx.refresh();</div></pre></td></tr></table></figure></p>\n<p>注意：注册完成后一定要进行刷新，否则加载的Bean将无法被使用</p>\n<h2 id=\"博客链接\"><a href=\"#博客链接\" class=\"headerlink\" title=\"博客链接\"></a>博客链接</h2><ol>\n<li><a href=\"http://www.cnblogs.com/ITtangtang/p/3978349.html\" target=\"_blank\" rel=\"external\">源码解读Spring IOC原理</a></li>\n<li><a href=\"http://www.cnblogs.com/dazhaxie/archive/2012/06/18/2553300.html\" target=\"_blank\" rel=\"external\">Spring源代码解析</a></li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>这篇博客简单分析了IOC和DI的原理及区别，并介绍了基于xml和注解的Bean配置方式。<br>","more":"</p>\n<h2 id=\"1-什么是IOC\"><a href=\"#1-什么是IOC\" class=\"headerlink\" title=\"1. 什么是IOC?\"></a>1. 什么是IOC?</h2><h3 id=\"1-1-IoC-Inversion-of-Control-控制反转\"><a href=\"#1-1-IoC-Inversion-of-Control-控制反转\" class=\"headerlink\" title=\"1.1 IoC(Inversion of Control)控制反转\"></a>1.1 IoC(Inversion of Control)控制反转</h3><ul>\n<li>控制:控制的双方是什么？谁控制谁？<ul>\n<li>主控方：Spring</li>\n<li>被控方：应用程序所使用的资源</li>\n<li>(原始)应用程序控制自己执行操作需要使用的外部资源</li>\n<li>(Spring)Spring控制整个程序中所需要使用的外部资源</li>\n</ul>\n</li>\n<li>反转:什么是反转？反转什么？<ul>\n<li>正向：应用程序直接调用资源</li>\n<li>反向：应用程序依赖Spring为其提供资源</li>\n<li>反转的是资源的控制权</li>\n<li>应用程序由主动调用资源，变为被动的等待Spring提供资源</li>\n</ul>\n</li>\n<li>有什么好处？<ul>\n<li>正向缺点：应用程序控制的资源分布在程序的每一个地方</li>\n<li>反向的优点：所有的资源都在Spring中，便于管理</li>\n<li>总结：Spring反向控制应用程序所需要使用的外部资源。资源受Spring管理，利用率最大化。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-2-spring演进模式\"><a href=\"#1-2-spring演进模式\" class=\"headerlink\" title=\"1.2 spring演进模式\"></a>1.2 spring演进模式</h3><pre><code>A.基于分层设计\n    UserAction            使用UserService,new UserService()\n    UserService            使用UserDAO,new UserDAO()\n    UserDAO\nB.工厂模式，使用面向接口编程设计，解决层与层之间的紧耦合\n    制作接口，制作实现类，制作对象工厂\n</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">A a = AFactory.createA();  </div><div class=\"line\">B b = BFactory.createB();  </div><div class=\"line\">a.setB(b);</div></pre></td></tr></table></figure>\n<pre><code>C.工厂模式+配置\n    制作XML文件，将实现类配置到XML文件中\n    读取XML文件中的配置信息，得到实现类的类名\n    使用反射思想，获取实现类对象 class.newInstance();\n</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">A a = Factory.create(“a”);  </div><div class=\"line\">B b = Factory.create(“b”);  </div><div class=\"line\">a.setB(b);</div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!--配置xml--&gt;</span></div><div class=\"line\">a=AImpl  </div><div class=\"line\">b=BImpl</div></pre></td></tr></table></figure>\n<pre><code>D.自动的工厂+配置\n</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//返回装配好的a   </span></div><div class=\"line\">A a = Factory.create(“a”);</div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!--xml配置--&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">“a”</span> <span class=\"attr\">class</span>=<span class=\"string\">“AImpl”</span>&gt;</span>  </div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">“b”</span> <span class=\"attr\">ref</span>=<span class=\"string\">“b”/</span>&gt;</span>  </div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span>  </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">“b”</span> <span class=\"attr\">class</span>=<span class=\"string\">“BImpl”/</span>&gt;</span></div></pre></td></tr></table></figure>\n<pre><code>E.工厂由Spring提供，实现类使用XML格式配置\n    工厂由Spring提供，实现类使用XML格式配置\n</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//返回装配好的a   </span></div><div class=\"line\">A a = ApplicationContext.getBean(“a”);</div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!--xml配置--&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">“a”</span> <span class=\"attr\">class</span>=<span class=\"string\">“AImpl”</span>&gt;</span>  </div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">“b”</span> <span class=\"attr\">ref</span>=<span class=\"string\">“b”/</span>&gt;</span>  </div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span>  </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">“b”</span> <span class=\"attr\">class</span>=<span class=\"string\">“BImpl”/</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"2-什么是DI？\"><a href=\"#2-什么是DI？\" class=\"headerlink\" title=\"2. 什么是DI？\"></a>2. 什么是DI？</h2><h3 id=\"2-1-DI的概念\"><a href=\"#2-1-DI的概念\" class=\"headerlink\" title=\"2.1 DI的概念\"></a>2.1 DI的概念</h3><p>DI(Dependency Injection)依赖注入，指应用程序依赖Spring为其提供运行时所需的资源.</p>\n<ul>\n<li>谁依赖于谁？            ——-   应用程序依赖于IoC容器</li>\n<li>为什么需要依赖？        ——-   应用程序依赖于IoC容器装配类之间的关系</li>\n<li>依赖什么东西？          ——-   依赖了IoC容器的装配功能</li>\n<li>谁注入于谁？            ——-   IoC容器注入应用程序</li>\n<li>注入什么东西？          ——-   注入应用程序需要的资源（类之间的关系）</li>\n</ul>\n<p>更能描述容器其特点的名字——“依赖注入”（Dependency Injection）<br>IoC容器应该具有依赖注入功能，因此也可以叫DI容器 </p>\n<h3 id=\"2-2-DI实现方式\"><a href=\"#2-2-DI实现方式\" class=\"headerlink\" title=\"2.2 DI实现方式\"></a>2.2 DI实现方式</h3><ol>\n<li>构造器注入</li>\n<li>setter注入</li>\n<li>接口注入</li>\n</ol>\n<h2 id=\"3-IOC和DI的关系？\"><a href=\"#3-IOC和DI的关系？\" class=\"headerlink\" title=\"3. IOC和DI的关系？\"></a>3. IOC和DI的关系？</h2><p>IOC和DI其实是同一概念的两种说法，两者站立的角度不一样。<br>IOC：从spring的角度看，资源的控制权限被反转了<br>DI：从应用程序的角度看，应用程序要依赖spring为其注入资源。</p>\n<h2 id=\"4-BeanFactory\"><a href=\"#4-BeanFactory\" class=\"headerlink\" title=\"4. BeanFactory\"></a>4. BeanFactory</h2><ol>\n<li>BeanFactory是ApplicationContext的顶层父接口，使用BeanFactory接口也可以完成获取Bean的操作.</li>\n<li>操作步骤:<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//初始化Resource对象</span></div><div class=\"line\">Resource res = <span class=\"keyword\">new</span> ClassPathResource(<span class=\"string\">\"applicationContext.xml\"</span>);</div><div class=\"line\"><span class=\"comment\">//初始化BeanFactory对象</span></div><div class=\"line\">BeanFactory bf = <span class=\"keyword\">new</span> XmlBeanFactory(res);</div><div class=\"line\"><span class=\"comment\">//根据id名称获取Bean</span></div><div class=\"line\">UserService service = (UserService) bf.getBean(<span class=\"string\">\"userService\"</span>);</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<ol>\n<li><p>AppplicationContext与BeanFactory的区别<br>A. 加载方式不同</p>\n<pre><code>AppplicationContext：立即加载，加载配置文件时即加载\nBeanFactory:延迟加载，获取Bean实例时才加载\n</code></pre><p>B. AppplicationContext具有更多的功能</p>\n<pre><code>国际化处理\n事件传递\nBean自动装配\n各种不同应用层的Context实现\n注意：实际开发中，优先选择ApplicationContext对象，避免使用BeanFactory\n</code></pre></li>\n<li><p>Schema风格离线约束配置方式</p>\n<pre><code>A.拷贝访问路径\nB.打开MyEclipse设置中的XML catalog选项\nC.创建新的映射\nD.选择对应的schema风格的约束文件\nE.将key type修改为schema location\nF.将要配置的路径复制到key中\n</code></pre></li>\n</ol>\n<h2 id=\"5-Bean配置（XML）\"><a href=\"#5-Bean配置（XML）\" class=\"headerlink\" title=\"5. Bean配置（XML）\"></a>5. Bean配置（XML）</h2><h3 id=\"5-1-Bean初始化\"><a href=\"#5-1-Bean初始化\" class=\"headerlink\" title=\"5.1 Bean初始化\"></a>5.1 Bean初始化</h3><ol>\n<li>构造器初始化（重点）<br><strong>Bean对应的类必须提供一个默认无参可访问的构造方法</strong></li>\n<li><p>静态工厂初始化</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;bean id=\"userService2\" </div><div class=\"line\">    &lt;!--配置中所配置的class配置成工厂类的类名--&gt;</div><div class=\"line\">    class=\"com.topvision.bean.UserStataicFactory\"</div><div class=\"line\">    &lt;!--配置工厂类中的创建实例的静态方法--&gt;</div><div class=\"line\">    factory-method=\"getInst\"&gt;</div><div class=\"line\">&lt;/bean&gt;</div></pre></td></tr></table></figure>\n</li>\n<li><p>实例工厂初始化<br>提供一个实例工厂类，使用其中的实例方法获取对象。由于该工厂类本身需要创建对象，因此该对象必须受Spring控制，所以必须配置该工厂类为Bean.</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">!—实例化工厂Bean</span> <span class=\"attr\">--</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"uf\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.bean.UserFactory\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!--使用实例工厂创建Bean --&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!--factory-bean: 配置实例工厂在Spring范围内对应的Bean的id名称--&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!--factory-method：配置工厂类中的创建实例的实例方法--&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"userService3\"</span>  <span class=\"attr\">factory-bean</span>=<span class=\"string\">\"uf\"</span> <span class=\"attr\">factory-method</span>=<span class=\"string\">\"getInst2\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"5-2-Bean的作用域\"><a href=\"#5-2-Bean的作用域\" class=\"headerlink\" title=\"5.2 Bean的作用域\"></a>5.2 Bean的作用域</h3><p>Spring初始化的Bean默认为单例模式，如果想修改成非单例模式需要修改Bean的作用范围。<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">”beanId”</span> <span class=\"attr\">class</span>=<span class=\"string\">”BeanClassName”</span> <span class=\"attr\">scope</span>=<span class=\"string\">”prototype”</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<pre><code>scope属性：\n    singleton：单例\n    prototype：非单例\n    request：请求对象范围request.setAttribute(&quot;beanId&quot;,obj);\n    session：会话Session范围request.getSession().setAttribute(&quot;beanId&quot;,obj);\n    globalSession：全局会话,分布式服务器\n</code></pre><h3 id=\"5-3-Bean的生命周期\"><a href=\"#5-3-Bean的生命周期\" class=\"headerlink\" title=\"5.3 Bean的生命周期\"></a>5.3 Bean的生命周期</h3><p>定义Bean初始化与销毁时的动作，属于回调方法配置<br>定义bean时指定两个回调方法，控制bean的初始化与销毁操作时执行的动作</p>\n<ul>\n<li>init-method：初始化回调方法名，配置的方法必须由bean对象提供</li>\n<li>destroy-method：销毁回调方法名，配置的方法必须由bean对象提供</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"user\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.lifecycle.User\"</span> <span class=\"attr\">init-method</span>=<span class=\"string\">\"init\"</span> <span class=\"attr\">destroy-method</span>=<span class=\"string\">\"destroy\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"prototype\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n<ul>\n<li>销毁操作只针对scope=”singletion”的对象，对于非单例对象无效</li>\n<li>单例对象的销毁是在IoC容器关闭时发生，使用ClassPathXmlApplicationContext对象close方法完成</li>\n<li>非单例Bean对象的内存回收交由JVM完成——GC</li>\n</ul>\n<h3 id=\"5-4-Bean属性注入\"><a href=\"#5-4-Bean属性注入\" class=\"headerlink\" title=\"5.4 Bean属性注入\"></a>5.4 Bean属性注入</h3><ol>\n<li><p>构造器注入（了解）<br>A.在domain中提供对象的构造方法<br>B.xml配置中设置构造方法的参数</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- constructor-arg:使用构造器传递参数  --&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!-- value:赋值 --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"bean6\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.bean.xml.Bean6\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">value</span>=<span class=\"string\">\"topvision\"</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">value</span>=<span class=\"string\">\"2017\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>注意：如果类型匹配不成功，可以为配置中指定index索引属性，对应构造器中参数的位置.</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"bean6\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.bean.xml.Bean6\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">index</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"2014\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"java.lang.Integer\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">index</span>=<span class=\"string\">\"1\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"topvision\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"java.lang.String\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>说明：构造器传参受构造器参数位置和类型的限定，因此不常使用</p>\n</li>\n<li><p>setter注入<br><strong>前提：setter注入要求Bean必须提供无参可访问构造方法</strong></p>\n<p>A.注入简单类型</p>\n<pre><code>1.提供对应要注入的属性\n2.为每个要注入的属性提供对应的标准封装setter方法\n3.在配置中为Bean指定要注入的属性，使用property元素 name=“属性名” value=”值”\n</code></pre><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"属性名\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"值\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<p>B.注入引用类型</p>\n<pre><code>1.为某个Bean注入引用类型的值，首先在Bean对应的类中声明对应的属性\n</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"keyword\">private</span> TeacherDAO dao;</div><div class=\"line\">   ``` </div><div class=\"line\"></div><div class=\"line\">\t<span class=\"number\">2</span>.为每个要注入的属性提供对应的标准封装setter方法 (访问器)</div><div class=\"line\">   ```<span class=\"function\">xml</span></div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setDao</span><span class=\"params\">(TeacherDAO dao)</span> &#123;</div><div class=\"line\">\t<span class=\"keyword\">this</span>.dao = dao;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<pre><code>3.必须保障引入的对象是Spring控制的Bean\n</code></pre><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- 声明引用类型的资源为Bean --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"teacherDao\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.di.setter.TeacherDAO\"</span>&gt;</span>\t<span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n<pre><code>4.在Bean的属性注入中，使用ref引用对应的资源 ref=”beanId/beanName”\n</code></pre><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"comment\">&lt;!-- setter注入 --&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!-- name:属性名 --&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!-- value:简单类型的值 --&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!-- ref:引用别的Bean，beanId/beanName --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"bean7\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.bean.xml.Bean7\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"topvision\"</span>/&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"8\"</span>/&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dao\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"teacherDao\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"6-Bean配置（注解）\"><a href=\"#6-Bean配置（注解）\" class=\"headerlink\" title=\"6. Bean配置（注解）\"></a>6. Bean配置（注解）</h2><p>从Spring2.5开始提供使用注解的形式配置Bean。</p>\n<h3 id=\"6-1-配置Bean使用-Component注解\"><a href=\"#6-1-配置Bean使用-Component注解\" class=\"headerlink\" title=\"6.1 配置Bean使用@Component注解\"></a>6.1 配置Bean使用@Component注解</h3><p>如需为Bean定义名称，在参数中添加Bean名称@Component(“beanName”)</p>\n<h3 id=\"6-2-设定Spring的自动扫描路径\"><a href=\"#6-2-设定Spring的自动扫描路径\" class=\"headerlink\" title=\"6.2 设定Spring的自动扫描路径\"></a>6.2 设定Spring的自动扫描路径</h3><p>用于检测对应的Bean是否配置了注解，并加载配置了注解的类</p>\n<ul>\n<li><p>开启context空间的支持</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></div><div class=\"line\">  \t<span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></div><div class=\"line\">   \t<span class=\"attr\">xmlns:context</span>=<span class=\"string\">\"http://www.springframework.org/schema/context\"</span> </div><div class=\"line\">   \t<span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"</span></div><div class=\"line\">\thttp://www.springframework.org/schema/beans </div><div class=\"line\">\thttp://www.springframework.org/schema/beans/spring-beans.xsd</div><div class=\"line\">\thttp://www.springframework.org/schema/context \t\t\t\t\t</div><div class=\"line\">\thttp://www.springframework.org/schema/context/spring-context.xsd\"&gt;</div></pre></td></tr></table></figure>\n</li>\n<li><p>开启自动扫描功能，并指定扫描的路径</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context:component-scan</span> <span class=\"attr\">base-package</span>=<span class=\"string\">\"com.topvision.annotation\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">context:component-scan</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>说明：扫描路径可以设置多个，中间使用,隔开，扫描路径包含指定包和子包内所有的类,通常使用*号通配符匹配路径</p>\n<h3 id=\"6-3-Spring提供的三个注解\"><a href=\"#6-3-Spring提供的三个注解\" class=\"headerlink\" title=\"6.3 Spring提供的三个注解\"></a>6.3 Spring提供的三个注解</h3><ol>\n<li>@Repository 用于数据层实现类标注</li>\n<li>@Service 用于业务逻辑层实现类标注</li>\n<li>@Controller 用于控制层实现类进行标注</li>\n</ol>\n<h3 id=\"6-4-注入简单类型\"><a href=\"#6-4-注入简单类型\" class=\"headerlink\" title=\"6.4 注入简单类型\"></a>6.4 注入简单类型</h3><ol>\n<li>在属性名上方声明该属性自动装配@Autowired</li>\n<li>在属性名上方声明该属性注入的值@Value(value)<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Autowired</span></div><div class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"topvision\"</span>)</div><div class=\"line\"><span class=\"keyword\">private</span> String msg;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>注意：注解自动装配属性值无需提供对应属性的setter方法</p>\n<h3 id=\"6-5-注入引用类型\"><a href=\"#6-5-注入引用类型\" class=\"headerlink\" title=\"6.5 注入引用类型\"></a>6.5 注入引用类型</h3><ul>\n<li>在属性名上方声明该属性自动装配@Autowired</li>\n<li>在属性名上方声明该属性注入的值@Qualifier(bean引用名称)<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Autowired</span></div><div class=\"line\"><span class=\"meta\">@Qualifier</span>(<span class=\"string\">\"anno2\"</span>)</div><div class=\"line\"><span class=\"keyword\">private</span> AnnotationOther other;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"6-6-Autowired\"><a href=\"#6-6-Autowired\" class=\"headerlink\" title=\"6.6 Autowired\"></a>6.6 Autowired</h3><p>Autowired的required属性用用于声明自动装配的数据是必须的。</p>\n<ol>\n<li>如果required=true，必须为其装配数据，如果没有值，抛出异常</li>\n<li>如果required=false，自动装配数据失败，则注入值为null</li>\n</ol>\n<h3 id=\"6-7-Resource\"><a href=\"#6-7-Resource\" class=\"headerlink\" title=\"6.7 Resource\"></a>6.7 Resource</h3><ol>\n<li>格式一：@Resource(name=”myImpl”)</li>\n<li>格式二：@Autowired(required=false)<br>　　　　@Qualifier(“myImpl”)<br>以上两种格式效果相同</li>\n</ol>\n<h3 id=\"6-8-Bean声明周期注解\"><a href=\"#6-8-Bean声明周期注解\" class=\"headerlink\" title=\"6.8 Bean声明周期注解\"></a>6.8 Bean声明周期注解</h3><ol>\n<li>@PostConstruct<br>功能：为当前Bean指定init-method参数<br>格式：定义在成员方法的上方，兼容静态方法</li>\n<li>@PreDestroy<br>功能：为当前Bean指定destory-method参数<br>格式：定义在成员方法的上方，兼容静态方法<br>注意：要求当前类被注册为Bean，否则无效果</li>\n</ol>\n<h3 id=\"6-9-Bean作用域注解\"><a href=\"#6-9-Bean作用域注解\" class=\"headerlink\" title=\"6.9 Bean作用域注解\"></a>6.9 Bean作用域注解</h3><p>在类的定义上方添加@Scope指定Bean的作用域<br>常用：@Scope(“prototype”)<br>默认：@Scope(“singleton”)</p>\n<h3 id=\"6-10-配置类注解\"><a href=\"#6-10-配置类注解\" class=\"headerlink\" title=\"6.10 配置类注解\"></a>6.10 配置类注解</h3><p><strong>@Configuration</strong>配置当前类为配置类，用于加载其中配置的Bean，与静态工厂初始化Bean很相似<br><strong>@Bean(name=”b1”)</strong>将配置类中的某个方法的返回值声明为Bean，该方法必须返回一个对象<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Configuration</span>\t\t\t<span class=\"comment\">//设定该类参与自动扫描</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBeanFactory</span> </span>&#123;</div><div class=\"line\">\t<span class=\"meta\">@Bean</span>(name=&#123;<span class=\"string\">\"aa\"</span>,<span class=\"string\">\"bb\"</span>,<span class=\"string\">\"cc\"</span>&#125;)<span class=\"comment\">//设定该方法的返回值是一个Bean</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> BookService <span class=\"title\">getInst</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> BookService();</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>以上操作必须基于自动扫描功能，如不开启自动扫描，Spring将无法查找到对应的注解配置</p>\n<h3 id=\"6-11-AnnotationConfigApplicationContext不使用自动扫描\"><a href=\"#6-11-AnnotationConfigApplicationContext不使用自动扫描\" class=\"headerlink\" title=\"6.11 AnnotationConfigApplicationContext不使用自动扫描\"></a>6.11 AnnotationConfigApplicationContext不使用自动扫描</h3><p>AnnotationConfigApplicationContext对象可以手工加载基于注解配置的Bean<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//用于手工添加注解开发Bean的上下文对象</span></div><div class=\"line\">AnnotationConfigApplicationContext ctx = <span class=\"keyword\">new</span> AnnotationConfigApplicationContext();</div><div class=\"line\"><span class=\"comment\">//加载配置管理类</span></div><div class=\"line\">ctx.register(MyConfiguration.class);</div><div class=\"line\"><span class=\"comment\">//刷新上下文对象</span></div><div class=\"line\">ctx.refresh();</div></pre></td></tr></table></figure></p>\n<p>注意：注册完成后一定要进行刷新，否则加载的Bean将无法被使用</p>\n<h2 id=\"博客链接\"><a href=\"#博客链接\" class=\"headerlink\" title=\"博客链接\"></a>博客链接</h2><ol>\n<li><a href=\"http://www.cnblogs.com/ITtangtang/p/3978349.html\" target=\"_blank\" rel=\"external\">源码解读Spring IOC原理</a></li>\n<li><a href=\"http://www.cnblogs.com/dazhaxie/archive/2012/06/18/2553300.html\" target=\"_blank\" rel=\"external\">Spring源代码解析</a></li>\n</ol>"},{"title":"spring(1)——框架简介","date":"2017-06-12T05:19:16.000Z","_content":"\n这篇博客介绍了spring框架的组成及应用\n<!--more-->\n## 1.什么是spring框架？\nspring是一个轻量级的JAVA开发框架，由Rod Johnson创建。spring对应用对象（如javaBean）的生命周期进行管理，它是一个“粘合平台”，将很多技术粘合在一起，形成一个整体，使每个组件发挥最大功效。\n\n## 2.架构概述\n![spring架构][1]\n\n -  核心容器\n    - spring-bean是整个核心，Bean的定义、Bean 的创建以及对Bean的解析。\n    - spring-context是bean关系集合，也就是IOC容器\n    - spring-core发现、维护和管理变之间的关系\n    - spring-expression是EL遍地是语言的扩展，支持设置和获取对象属性，调用对象方法，操作数组、集合等。\n - 面向切面编程（AOP）和工具（Instruementation）\n    - Spring AOP模块提供了满足AOP Alliance规范的实现，还整合了AspectJ这种AOP语言级的框架。通过AOP能降低耦合。\n - 消息\n    - spring-messaging模块为集成messaging api和消息协议提供支持。\n - 数据访问集成\n    - 事务模块：该模块用于Spring管理事务，只要是Spring管理对象都能得到Spring管理事务的好处，无需在代码中进行事务控制了，而且支持编程和声明性的事务管理。\n    - JDBC模块：提供了一个JBDC的样例模板，使用这些模板能消除传统冗长的JDBC编码还有必须的事务控制，而且能享受到Spring管理事务的好处。\n    - ORM模块：提供与流行的“对象-关系”映射框架的无缝集成，包括hibernate、JPA、MyBatis等。而且可以使用Spring事务管理，无需额外控制事务。\n    - OXM模块：提供了一个对Object/XML映射实现，将Java对象映射成XML数据，或者将XML数据映射成java对象，Object/XML映射实现包括JAXB、Castor、XMLBeans和XStream。\n    - JMS模块：用于JMS(Java Messaging Service)，提供一套 “消息生产者、消息消费者”模板用于更加简单的使用JMS，JMS用于用于在两个应用程序之间，或分布式系统中发送消息，进行异步通信。\n - web集成\n    - 该模块建立在AoolicationContext模块之上，提供了Web应用的功能。如文件上传、FreeMarker等。\n    - Spring可以整合Struts2等MVC框架。Spring自己提供了MVC框架Spring MVC。\n - Test\n    - Spring可以用非容器依赖的编程方式进行几乎所有的测试工作，支持JUnit和TestNG等测试框架。\n\n## 3.资源包整理\n[spring资源下载链接][2]\n\n- 核心\n    - spring-beans-4.2.5.RELEASE.jar\n    - spring-context-4.2.5.RELEASE.jar\n    - spring-context-support-4.2.5.RELEASE.jar\n    - spring-core-4.2.5.RELEASE.jar\n    - spring-expression-4.2.5.RELEASE.jar\n- AOP\n    - spring-aop-4.2.5.RELEASE.jar\n    - spring-aspects-4.2.5.RELEASE.jar\n    - spring-instrument-4.2.5.RELEASE.jar\n    - spring-instrument-tomcat-4.2.5.RELEASE.jar\n    - spring-messaging-4.2.5.RELEASE.jar\n- WEB\n    - spring-web-4.2.5.RELEASE.jar\n    - spring-websocket-4.2.5.RELEASE.jar\n    - spring-webmvc-4.2.5.RELEASE.jar\n    - spring-webmvc-portlet-4.2.5.RELEASE.jar\n- DATA\n    - spring-jdbc-4.2.5.RELEASE.jar\n    - spring-jms-4.2.5.RELEASE.jar\n    - spring-orm-4.2.5.RELEASE.jar\n    - spring-oxm-4.2.5.RELEASE.jar\n    - spring-tx-4.2.5.RELEASE.jar\n- TEST\n    - spring-test-4.2.5.RELEASE.jar\n- LOG\n    - commons-logging-1.1.1.jar\n    - commons-logging\n    - log4j-1.2.15.jar\n\n  [1]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/Spring/spring.png\n  [2]: http://maven.springframework.org/release/org/springframework/spring","source":"_posts/spring-1——框架简介.md","raw":"---\ntitle: spring(1)——框架简介\ncategories:\n  - Spring\ntags:\n  - Spring\ndate: 2017-06-12 13:19:16\n---\n\n这篇博客介绍了spring框架的组成及应用\n<!--more-->\n## 1.什么是spring框架？\nspring是一个轻量级的JAVA开发框架，由Rod Johnson创建。spring对应用对象（如javaBean）的生命周期进行管理，它是一个“粘合平台”，将很多技术粘合在一起，形成一个整体，使每个组件发挥最大功效。\n\n## 2.架构概述\n![spring架构][1]\n\n -  核心容器\n    - spring-bean是整个核心，Bean的定义、Bean 的创建以及对Bean的解析。\n    - spring-context是bean关系集合，也就是IOC容器\n    - spring-core发现、维护和管理变之间的关系\n    - spring-expression是EL遍地是语言的扩展，支持设置和获取对象属性，调用对象方法，操作数组、集合等。\n - 面向切面编程（AOP）和工具（Instruementation）\n    - Spring AOP模块提供了满足AOP Alliance规范的实现，还整合了AspectJ这种AOP语言级的框架。通过AOP能降低耦合。\n - 消息\n    - spring-messaging模块为集成messaging api和消息协议提供支持。\n - 数据访问集成\n    - 事务模块：该模块用于Spring管理事务，只要是Spring管理对象都能得到Spring管理事务的好处，无需在代码中进行事务控制了，而且支持编程和声明性的事务管理。\n    - JDBC模块：提供了一个JBDC的样例模板，使用这些模板能消除传统冗长的JDBC编码还有必须的事务控制，而且能享受到Spring管理事务的好处。\n    - ORM模块：提供与流行的“对象-关系”映射框架的无缝集成，包括hibernate、JPA、MyBatis等。而且可以使用Spring事务管理，无需额外控制事务。\n    - OXM模块：提供了一个对Object/XML映射实现，将Java对象映射成XML数据，或者将XML数据映射成java对象，Object/XML映射实现包括JAXB、Castor、XMLBeans和XStream。\n    - JMS模块：用于JMS(Java Messaging Service)，提供一套 “消息生产者、消息消费者”模板用于更加简单的使用JMS，JMS用于用于在两个应用程序之间，或分布式系统中发送消息，进行异步通信。\n - web集成\n    - 该模块建立在AoolicationContext模块之上，提供了Web应用的功能。如文件上传、FreeMarker等。\n    - Spring可以整合Struts2等MVC框架。Spring自己提供了MVC框架Spring MVC。\n - Test\n    - Spring可以用非容器依赖的编程方式进行几乎所有的测试工作，支持JUnit和TestNG等测试框架。\n\n## 3.资源包整理\n[spring资源下载链接][2]\n\n- 核心\n    - spring-beans-4.2.5.RELEASE.jar\n    - spring-context-4.2.5.RELEASE.jar\n    - spring-context-support-4.2.5.RELEASE.jar\n    - spring-core-4.2.5.RELEASE.jar\n    - spring-expression-4.2.5.RELEASE.jar\n- AOP\n    - spring-aop-4.2.5.RELEASE.jar\n    - spring-aspects-4.2.5.RELEASE.jar\n    - spring-instrument-4.2.5.RELEASE.jar\n    - spring-instrument-tomcat-4.2.5.RELEASE.jar\n    - spring-messaging-4.2.5.RELEASE.jar\n- WEB\n    - spring-web-4.2.5.RELEASE.jar\n    - spring-websocket-4.2.5.RELEASE.jar\n    - spring-webmvc-4.2.5.RELEASE.jar\n    - spring-webmvc-portlet-4.2.5.RELEASE.jar\n- DATA\n    - spring-jdbc-4.2.5.RELEASE.jar\n    - spring-jms-4.2.5.RELEASE.jar\n    - spring-orm-4.2.5.RELEASE.jar\n    - spring-oxm-4.2.5.RELEASE.jar\n    - spring-tx-4.2.5.RELEASE.jar\n- TEST\n    - spring-test-4.2.5.RELEASE.jar\n- LOG\n    - commons-logging-1.1.1.jar\n    - commons-logging\n    - log4j-1.2.15.jar\n\n  [1]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/Spring/spring.png\n  [2]: http://maven.springframework.org/release/org/springframework/spring","slug":"spring-1——框架简介","published":1,"updated":"2017-06-14T02:02:15.812Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0egk000mssvfilwjdfx9","content":"<p>这篇博客介绍了spring框架的组成及应用<br><a id=\"more\"></a></p>\n<h2 id=\"1-什么是spring框架？\"><a href=\"#1-什么是spring框架？\" class=\"headerlink\" title=\"1.什么是spring框架？\"></a>1.什么是spring框架？</h2><p>spring是一个轻量级的JAVA开发框架，由Rod Johnson创建。spring对应用对象（如javaBean）的生命周期进行管理，它是一个“粘合平台”，将很多技术粘合在一起，形成一个整体，使每个组件发挥最大功效。</p>\n<h2 id=\"2-架构概述\"><a href=\"#2-架构概述\" class=\"headerlink\" title=\"2.架构概述\"></a>2.架构概述</h2><p><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/Spring/spring.png\" alt=\"spring架构\"></p>\n<ul>\n<li>核心容器<ul>\n<li>spring-bean是整个核心，Bean的定义、Bean 的创建以及对Bean的解析。</li>\n<li>spring-context是bean关系集合，也就是IOC容器</li>\n<li>spring-core发现、维护和管理变之间的关系</li>\n<li>spring-expression是EL遍地是语言的扩展，支持设置和获取对象属性，调用对象方法，操作数组、集合等。</li>\n</ul>\n</li>\n<li>面向切面编程（AOP）和工具（Instruementation）<ul>\n<li>Spring AOP模块提供了满足AOP Alliance规范的实现，还整合了AspectJ这种AOP语言级的框架。通过AOP能降低耦合。</li>\n</ul>\n</li>\n<li>消息<ul>\n<li>spring-messaging模块为集成messaging api和消息协议提供支持。</li>\n</ul>\n</li>\n<li>数据访问集成<ul>\n<li>事务模块：该模块用于Spring管理事务，只要是Spring管理对象都能得到Spring管理事务的好处，无需在代码中进行事务控制了，而且支持编程和声明性的事务管理。</li>\n<li>JDBC模块：提供了一个JBDC的样例模板，使用这些模板能消除传统冗长的JDBC编码还有必须的事务控制，而且能享受到Spring管理事务的好处。</li>\n<li>ORM模块：提供与流行的“对象-关系”映射框架的无缝集成，包括hibernate、JPA、MyBatis等。而且可以使用Spring事务管理，无需额外控制事务。</li>\n<li>OXM模块：提供了一个对Object/XML映射实现，将Java对象映射成XML数据，或者将XML数据映射成java对象，Object/XML映射实现包括JAXB、Castor、XMLBeans和XStream。</li>\n<li>JMS模块：用于JMS(Java Messaging Service)，提供一套 “消息生产者、消息消费者”模板用于更加简单的使用JMS，JMS用于用于在两个应用程序之间，或分布式系统中发送消息，进行异步通信。</li>\n</ul>\n</li>\n<li>web集成<ul>\n<li>该模块建立在AoolicationContext模块之上，提供了Web应用的功能。如文件上传、FreeMarker等。</li>\n<li>Spring可以整合Struts2等MVC框架。Spring自己提供了MVC框架Spring MVC。</li>\n</ul>\n</li>\n<li>Test<ul>\n<li>Spring可以用非容器依赖的编程方式进行几乎所有的测试工作，支持JUnit和TestNG等测试框架。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"3-资源包整理\"><a href=\"#3-资源包整理\" class=\"headerlink\" title=\"3.资源包整理\"></a>3.资源包整理</h2><p><a href=\"http://maven.springframework.org/release/org/springframework/spring\" target=\"_blank\" rel=\"external\">spring资源下载链接</a></p>\n<ul>\n<li>核心<ul>\n<li>spring-beans-4.2.5.RELEASE.jar</li>\n<li>spring-context-4.2.5.RELEASE.jar</li>\n<li>spring-context-support-4.2.5.RELEASE.jar</li>\n<li>spring-core-4.2.5.RELEASE.jar</li>\n<li>spring-expression-4.2.5.RELEASE.jar</li>\n</ul>\n</li>\n<li>AOP<ul>\n<li>spring-aop-4.2.5.RELEASE.jar</li>\n<li>spring-aspects-4.2.5.RELEASE.jar</li>\n<li>spring-instrument-4.2.5.RELEASE.jar</li>\n<li>spring-instrument-tomcat-4.2.5.RELEASE.jar</li>\n<li>spring-messaging-4.2.5.RELEASE.jar</li>\n</ul>\n</li>\n<li>WEB<ul>\n<li>spring-web-4.2.5.RELEASE.jar</li>\n<li>spring-websocket-4.2.5.RELEASE.jar</li>\n<li>spring-webmvc-4.2.5.RELEASE.jar</li>\n<li>spring-webmvc-portlet-4.2.5.RELEASE.jar</li>\n</ul>\n</li>\n<li>DATA<ul>\n<li>spring-jdbc-4.2.5.RELEASE.jar</li>\n<li>spring-jms-4.2.5.RELEASE.jar</li>\n<li>spring-orm-4.2.5.RELEASE.jar</li>\n<li>spring-oxm-4.2.5.RELEASE.jar</li>\n<li>spring-tx-4.2.5.RELEASE.jar</li>\n</ul>\n</li>\n<li>TEST<ul>\n<li>spring-test-4.2.5.RELEASE.jar</li>\n</ul>\n</li>\n<li>LOG<ul>\n<li>commons-logging-1.1.1.jar</li>\n<li>commons-logging</li>\n<li>log4j-1.2.15.jar</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>这篇博客介绍了spring框架的组成及应用<br>","more":"</p>\n<h2 id=\"1-什么是spring框架？\"><a href=\"#1-什么是spring框架？\" class=\"headerlink\" title=\"1.什么是spring框架？\"></a>1.什么是spring框架？</h2><p>spring是一个轻量级的JAVA开发框架，由Rod Johnson创建。spring对应用对象（如javaBean）的生命周期进行管理，它是一个“粘合平台”，将很多技术粘合在一起，形成一个整体，使每个组件发挥最大功效。</p>\n<h2 id=\"2-架构概述\"><a href=\"#2-架构概述\" class=\"headerlink\" title=\"2.架构概述\"></a>2.架构概述</h2><p><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/Spring/spring.png\" alt=\"spring架构\"></p>\n<ul>\n<li>核心容器<ul>\n<li>spring-bean是整个核心，Bean的定义、Bean 的创建以及对Bean的解析。</li>\n<li>spring-context是bean关系集合，也就是IOC容器</li>\n<li>spring-core发现、维护和管理变之间的关系</li>\n<li>spring-expression是EL遍地是语言的扩展，支持设置和获取对象属性，调用对象方法，操作数组、集合等。</li>\n</ul>\n</li>\n<li>面向切面编程（AOP）和工具（Instruementation）<ul>\n<li>Spring AOP模块提供了满足AOP Alliance规范的实现，还整合了AspectJ这种AOP语言级的框架。通过AOP能降低耦合。</li>\n</ul>\n</li>\n<li>消息<ul>\n<li>spring-messaging模块为集成messaging api和消息协议提供支持。</li>\n</ul>\n</li>\n<li>数据访问集成<ul>\n<li>事务模块：该模块用于Spring管理事务，只要是Spring管理对象都能得到Spring管理事务的好处，无需在代码中进行事务控制了，而且支持编程和声明性的事务管理。</li>\n<li>JDBC模块：提供了一个JBDC的样例模板，使用这些模板能消除传统冗长的JDBC编码还有必须的事务控制，而且能享受到Spring管理事务的好处。</li>\n<li>ORM模块：提供与流行的“对象-关系”映射框架的无缝集成，包括hibernate、JPA、MyBatis等。而且可以使用Spring事务管理，无需额外控制事务。</li>\n<li>OXM模块：提供了一个对Object/XML映射实现，将Java对象映射成XML数据，或者将XML数据映射成java对象，Object/XML映射实现包括JAXB、Castor、XMLBeans和XStream。</li>\n<li>JMS模块：用于JMS(Java Messaging Service)，提供一套 “消息生产者、消息消费者”模板用于更加简单的使用JMS，JMS用于用于在两个应用程序之间，或分布式系统中发送消息，进行异步通信。</li>\n</ul>\n</li>\n<li>web集成<ul>\n<li>该模块建立在AoolicationContext模块之上，提供了Web应用的功能。如文件上传、FreeMarker等。</li>\n<li>Spring可以整合Struts2等MVC框架。Spring自己提供了MVC框架Spring MVC。</li>\n</ul>\n</li>\n<li>Test<ul>\n<li>Spring可以用非容器依赖的编程方式进行几乎所有的测试工作，支持JUnit和TestNG等测试框架。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"3-资源包整理\"><a href=\"#3-资源包整理\" class=\"headerlink\" title=\"3.资源包整理\"></a>3.资源包整理</h2><p><a href=\"http://maven.springframework.org/release/org/springframework/spring\" target=\"_blank\" rel=\"external\">spring资源下载链接</a></p>\n<ul>\n<li>核心<ul>\n<li>spring-beans-4.2.5.RELEASE.jar</li>\n<li>spring-context-4.2.5.RELEASE.jar</li>\n<li>spring-context-support-4.2.5.RELEASE.jar</li>\n<li>spring-core-4.2.5.RELEASE.jar</li>\n<li>spring-expression-4.2.5.RELEASE.jar</li>\n</ul>\n</li>\n<li>AOP<ul>\n<li>spring-aop-4.2.5.RELEASE.jar</li>\n<li>spring-aspects-4.2.5.RELEASE.jar</li>\n<li>spring-instrument-4.2.5.RELEASE.jar</li>\n<li>spring-instrument-tomcat-4.2.5.RELEASE.jar</li>\n<li>spring-messaging-4.2.5.RELEASE.jar</li>\n</ul>\n</li>\n<li>WEB<ul>\n<li>spring-web-4.2.5.RELEASE.jar</li>\n<li>spring-websocket-4.2.5.RELEASE.jar</li>\n<li>spring-webmvc-4.2.5.RELEASE.jar</li>\n<li>spring-webmvc-portlet-4.2.5.RELEASE.jar</li>\n</ul>\n</li>\n<li>DATA<ul>\n<li>spring-jdbc-4.2.5.RELEASE.jar</li>\n<li>spring-jms-4.2.5.RELEASE.jar</li>\n<li>spring-orm-4.2.5.RELEASE.jar</li>\n<li>spring-oxm-4.2.5.RELEASE.jar</li>\n<li>spring-tx-4.2.5.RELEASE.jar</li>\n</ul>\n</li>\n<li>TEST<ul>\n<li>spring-test-4.2.5.RELEASE.jar</li>\n</ul>\n</li>\n<li>LOG<ul>\n<li>commons-logging-1.1.1.jar</li>\n<li>commons-logging</li>\n<li>log4j-1.2.15.jar</li>\n</ul>\n</li>\n</ul>"},{"title":"spring(3)——AOP浅析","date":"2017-06-14T09:05:36.000Z","_content":"这篇博客简要介绍了Spring AOP的执行过程及实现。\n<!--more-->\n## 1. AOP简介\nAOP（Aspect Oriented Programming），即面向切面编程，可以说是OOP（Object Oriented Programming，面向对象编程）的补充和完善。OOP引入封装、继承、多态等概念来建立一种对象层次结构，用于模拟公共行为的一个集合。不过OOP允许开发者定义纵向的关系，但并不适合定义横向的关系，例如日志功能。日志代码往往横向地散布在所有对象层次中，而与它对应的对象的核心功能毫无关系对于其他类型的代码，如安全性、异常处理和透明的持续性也都是如此，这种散布在各处的无关的代码被称为横切（cross cutting），在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。\n\nAOP技术恰恰相反，它利用一种称为\"横切\"的技术，剖解开封装的对象内部，并将那些影响了多个类的公共行为封装到一个可重用模块，并将其命名为\"Aspect\"，即切面。所谓\"切面\"，简单说就是那些与业务无关，却为业务模块所共同调用的逻辑或责任封装起来，便于减少系统的重复代码，降低模块之间的耦合度，并有利于未来的可操作性和可维护性。\n\n使用\"横切\"技术，AOP把软件系统分为两个部分：核心关注点和横切关注点。业务处理的主要流程是核心关注点，与之关系不大的部分是横切关注点。横切关注点的一个特点是，他们经常发生在核心关注点的多处，而各处基本相似，比如权限认证、日志、事物。AOP的作用在于分离系统中的各种关注点，将核心关注点和横切关注点分离开来。\n\n## 2. AOP核心概念\n\n - **连接点(Joinpoint)**:被拦截到的点，因为Spring只支持方法类型的连接点，所以在Spring中连接点指的就是被拦截到的方法，实际上连接点还可以是字段或者构造器\n - **切入点(Pointcut**):要被增强的方法，定义了切入发生的地点\n - **通知(advice)**:要执行的增强方法，定义了切入的时机和执行的动作\n - **切面(Aspect)**:切入点和通知的对应关系，也就是两者结合的称呼\n - **目标对象(Target Object)**:包含切入点的运行时对象，也就是被代理的对象\n - **AOP代理(aop proxy)**:代理对象\n - **织入(Weaving)**:是一个将通知功能加入原始字节码的动态过程，共有三种方法，Spring使用的是运行时织入。\n\n## 3. AOP运行环境\n\n - Spring核心包（4个）\n - 日志包（两个）\n - AOP包（4个）\n    - Spring进行AOP开发(1个)spring-aop-4.2.5.RELEASE.jar\n    - Spring整合AspectJ框架spring-aspects-4.2.5.RELEASE.jar\n    - AOP联盟规范(1个)com.springsource.org.aopalliance-1.0.0.jar\n    - aspectJ支持(1个)com.springsource.org.aspectj.weaver-1.7.2.RELEASE.jar\n\n## 4. XML实现\n\n### 4.1 在配置文件中开启AOP空间\n### 4.2 编写连接点类，即需要增强的业务类\n    业务类可以有上层接口(JDK代理)，也可以没有(cglib代理)\n    \n - 业务类接口\n\n    ```java\n    public interface ImSleep {\n\t    public void sleep();\n    }\n    ```\n    \n - 业务类实现\n    \n    ```java\n\tpublic class HumanSleep implements ImSleep{\n\t\n    \t@Override\n    \tpublic void sleep() {\n    \t\tSystem.out.println(\"我要睡觉了\");\n    \t}\n    }\n    ```\n### 4.3 编写通知类，即增强方法所在的类\n\n```java\npublic class TimeHandler {\n    //通知方法\n\tpublic void printTime() {\n\t\tSystem.out.println(\"CurrentTime=\" + System.currentTimeMillis());\n\t}\n}\n```\n\n### 4.4 在xml中配置切面，即关联切入点和通知\n \n```xml\n<bean id=\"humanSleep\" class=\"com.topvision.ssm.domian.HumanSleep\"/>\n<bean id=\"timeHandler\" class=\"com.topvision.ssm.domian.TimeHandler\"/>\n\t\n<aop:config>\n    //配置切面，ref关联通知类\n\t<aop:aspect id=\"time\" ref=\"timeHandler\">\n\t    //切入点，匹配要切入的业务类\n\t\t<aop:pointcut expression=\"execution(*com.topvision.ssm.domian.HumanSleep.sleep())\" id=\"addTime\"/>\n\t\t//通知类型，执行通知类中的那个方法，关联的切入点\n\t\t<aop:before method=\"printTime\" pointcut-ref=\"addTime\"/>\n\t\t<aop:after method=\"printTime\" pointcut-ref=\"addTime\"/>\n\t</aop:aspect>\n</aop:config>\n```\n\n### 4.5 测试类\n\n```java\nApplicationContext ctx = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\nImSleep human = (ImSleep) ctx.getBean(\"humanSleep\");\nhuman.sleep();\n```\n\n## 5. 注解实现\n### 5.1 开启aop注解\n核心配置文件中添加以下配置，功能等同于注解配置Bean的自动扫描路径\n```xml\n//开启bean扫描\n<context:component-scan base-package=\"com.topvision.ssm.*\"/> \n//开启aop注解扫描\n<aop:aspectj-autoproxy/>\n```\n### 5.2 配置业务类\n```java\n@Component\npublic class Bussiness {\n\t\n\t/**\n\t * 切入点\n\t */\n\tpublic String delete(String obj) {\n\t\tSystem.out.println(\"==========调用切入点：\" + obj + \"说：你敢删除我！===========\\n\");\n\t\treturn obj + \"：瞄～\";\n\t}\n\n\tpublic String add(String obj) {\n\t\tSystem.out.println(\"================这个方法不能被切。。。============== \\n\");\n\t\treturn obj + \"：瞄～ 嘿嘿！\";\n\t}\n\n\tpublic String modify(String obj) {\n\t\tSystem.out.println(\"=================这个也设置加入切吧====================\\n\");\n\t\treturn obj + \"：瞄改瞄啊！\";\n\t}\n}\n```\n### 5.3 配置通知类\n```java\n/**\n * 定义切面\n * \n * @Aspect : 标记为切面类\n * @Pointcut : 指定匹配切点\n * @Before : 指定前置通知，value中指定切入点匹配\n * @AfterReturning ：后置通知，具有可以指定返回值\n * @AfterThrowing ：异常通知\n * \n * @author yanbin\n * \n */\n@Component\n@Aspect\npublic class AspectAdvice {\n\n    /**\n     * 指定切入点匹配表达式，注意它是以方法的形式进行声明的。\n     */\n    @Pointcut(\"execution(* com.topvision.*..*.*(..))\")\n    public void anyMethod() {\n    }\n\n    /**\n     * 前置通知\n     * \n     * @param jp\n     */\n    @Before(value = \"execution(* com.topvision.ssm.domian.Bussiness.delete(..))\")\n    public void doBefore(JoinPoint jp) {\n        System.out.println(\"===========进入before advice============ \\n\");\n\n        System.out.print(\"准备在\" + jp.getTarget().getClass() + \"对象上用\");\n        System.out.print(jp.getSignature().getName() + \"方法进行对 '\");\n        System.out.print(jp.getArgs()[0] + \"'进行删除！\\n\\n\");\n\n        System.out.println(\"要进入切入点方法了 \\n\");\n    }\n\n    /**\n     * 后置通知\n     * \n     * @param jp\n     *            连接点\n     * @param result\n     *            返回值\n     */\n    @AfterReturning(value = \"anyMethod()\", returning = \"result\")\n    public void doAfter(JoinPoint jp, String result) {\n        System.out.println(\"==========进入after advice=========== \\n\");\n        System.out.println(\"切入点方法执行完了 \\n\");\n\n        System.out.print(jp.getArgs()[0] + \"在\");\n        System.out.print(jp.getTarget().getClass() + \"对象上被\");\n        System.out.print(jp.getSignature().getName() + \"方法删除了\");\n        System.out.print(\"只留下：\" + result + \"\\n\\n\");\n    }\n\n    /**\n     * 环绕通知\n     * \n     * @param pjp\n     *            连接点\n     */\n    @Around(value = \"anyMethod()\")\n    public void doAround(ProceedingJoinPoint pjp) throws Throwable {\n        System.out.println(\"===========进入around环绕方法！=========== \\n\");\n\n        // 调用目标方法之前执行的动作\n        System.out.println(\"调用方法之前: 执行！\\n\");\n\n        // 调用方法的参数\n        Object[] args = pjp.getArgs();\n        // 调用的方法名\n        String method = pjp.getSignature().getName();\n        // 获取目标对象\n        Object target = pjp.getTarget();\n        // 执行完方法的返回值：调用proceed()方法，就会触发切入点方法执行\n        Object result = pjp.proceed();\n\n        System.out.println(\"输出：\" + args[0] + \";\" + method + \";\" + target + \";\" + result + \"\\n\");\n        System.out.println(\"调用方法结束：之后执行！\\n\");\n    }\n\n    /**\n     * 异常通知\n     * \n     * @param jp\n     * @param e\n     */\n    @AfterThrowing(value = \"anyMethod())\", throwing = \"e\")\n    public void doThrow(JoinPoint jp, Throwable e) {\n        System.out.println(\"删除出错啦\");\n    }\n\n}\n```\n### 5.4 测试类（集成junit）\n\n```java\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations=\"classpath:applicationContext.xml\")\npublic class Test01{\n\t\n\t@Autowired\n\tprivate Bussiness bs;\n\t\n\t@Test\n\tpublic void BSTest() {\n\t\tbs.delete(\"qwe\");\n\t}\n}\n```\n## 6. 切入点表达式及通知\n### 6.1 切入点表达式\n格式：execution(切入点表达式)\nexecution([方法的访问控制修饰符] 方法的返回值 包名.类名/接口名.方法名(参数)) \n注意：方法的访问控制修饰符可以省略\n```xml\ncom.topvision.*.dao.UserDAO.add() com包下的topvision包下的任意包下的dao包下的...\n *..*.*()      任意包下的任意类中的任意方法\n```\n\t\t\t\t\t\t\n**方法参数**\n\n - add()\t\t无参数\n - add(*)\t\t一个参数\n - add(int)\t\t一个int型参数\n - add(*,*)\t\t两个参数\n - add(*,int)\t\t两个参数，第一个任意，第二个int\n - add(..)\t\t任意参数\n - add(*,..)\t\t至少一个参数\n\n### 6.2 通知类型\n\n 1. 类型\nbefore:在原始操作前运行\n\tafter: 在原始操作后运行，无论方法是否抛出异常\n\tafterReturning:在原始操作后运行，只有方法正常结束才运行，抛出异常则不运行\n\tafterThrowing:在原始操作中如果抛出异常，运行\n\taround: 在原始操作前后运行，通过ProceedingJoinPoint对象调用procee()方法完成对原始操作的调用\n\n 2. 格式\n    ```xml\n    <aop:before pointcut-ref=\"pt2\" method=\"before\"/> \n    <aop:after pointcut-ref=\"pt2\" method=\"after\"/> \n    <aop:after-returning pointcut-ref=\"pt2\" method=\"afterReturning\"/> \n    <aop:after-throwing pointcut-ref=\"pt2\" method=\"afterThrowing\"/> \n    <aop:around pointcut-ref=\"pt2\" method=\"around\"/>\n    ```\n\n### 6.3 获取通知参数\n为环绕通知之外的通知方法定义形参**JoinPoint**，该参数必须是通知方法的第一个参数。\n获取参数：Obejct[] args = jp.getArgs();\t\n范例：\n\n```java\npublic void before(JoinPoint jp){\t\n\tObject[] objs = jp.getArgs();\n\tSystem.out.println(\"before......\"+objs[0]+\",\"+objs[1]);\n}\n```\n为环绕通知方法定义形参**ProceedingJoinPoint**对象\n获取参数：Obejct[] args = pjp.getArgs();\n\n \n\n### 6.4 获取通知返回值\nafterReturning 与 around可以获取方法的返回值\n    \n- around通知获取返回值\n**ProceedingJoinPoint**对象执行调用原始操作的返回值就是原始方法的运行返回值。\n\n```java\nObject res = pt.proceed(args);\n```\n注意：如果原始方法返回值为void类型，则around方法返回值设置为Object。如果原始方法返回值为非void类型，则around方法内必须将原始方法调用的结果返回。\n原始方法返回值为void类型的，通知内获取的返回值统一为null。\n\n```java\npublic Object around(ProceedingJoinPoint pjp) throws Throwable{\n\tObject res = pjp.proceed(args);\n\treturn res;\n}\n```\n\n- afterReturning通知获取返回值\n在通知方法的参数中，声明一个Object类型的参数，用于保存方法的返回值\n\n```java\npublic void afterReturning(JoinPoint jp,Object abc){\n    System.out.println(\"afterReturning......\"+ abc);\n}\n```\n在配置文件中，为afterReturning声明保存返回值的变量名\n\n### 6.5 获取异常值\n异常对象的获取方式与返回值很相似，声明变量，在配置中声明保存异常对象的变量名。\n```xml\n<aop:after-throwing pointcut-ref=\"pt\" method=\"afterThrowing\" throwing=\"e\"/>\n```\n```java\npublic void afterThrowing (Throwable e){\n\tSystem.out.println(\"afterThrowing.......\"+ e);\n}\n```\n\n \n## 7. JDK代理与cglib代理\n\n\n\n\n\n","source":"_posts/spring-3——AOP浅析.md","raw":"---\ntitle: spring(3)——AOP浅析\ncategories:\n  - Spring\ntags:\n  - Spring\n  - AOP\ndate: 2017-06-14 17:05:36\n---\n这篇博客简要介绍了Spring AOP的执行过程及实现。\n<!--more-->\n## 1. AOP简介\nAOP（Aspect Oriented Programming），即面向切面编程，可以说是OOP（Object Oriented Programming，面向对象编程）的补充和完善。OOP引入封装、继承、多态等概念来建立一种对象层次结构，用于模拟公共行为的一个集合。不过OOP允许开发者定义纵向的关系，但并不适合定义横向的关系，例如日志功能。日志代码往往横向地散布在所有对象层次中，而与它对应的对象的核心功能毫无关系对于其他类型的代码，如安全性、异常处理和透明的持续性也都是如此，这种散布在各处的无关的代码被称为横切（cross cutting），在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。\n\nAOP技术恰恰相反，它利用一种称为\"横切\"的技术，剖解开封装的对象内部，并将那些影响了多个类的公共行为封装到一个可重用模块，并将其命名为\"Aspect\"，即切面。所谓\"切面\"，简单说就是那些与业务无关，却为业务模块所共同调用的逻辑或责任封装起来，便于减少系统的重复代码，降低模块之间的耦合度，并有利于未来的可操作性和可维护性。\n\n使用\"横切\"技术，AOP把软件系统分为两个部分：核心关注点和横切关注点。业务处理的主要流程是核心关注点，与之关系不大的部分是横切关注点。横切关注点的一个特点是，他们经常发生在核心关注点的多处，而各处基本相似，比如权限认证、日志、事物。AOP的作用在于分离系统中的各种关注点，将核心关注点和横切关注点分离开来。\n\n## 2. AOP核心概念\n\n - **连接点(Joinpoint)**:被拦截到的点，因为Spring只支持方法类型的连接点，所以在Spring中连接点指的就是被拦截到的方法，实际上连接点还可以是字段或者构造器\n - **切入点(Pointcut**):要被增强的方法，定义了切入发生的地点\n - **通知(advice)**:要执行的增强方法，定义了切入的时机和执行的动作\n - **切面(Aspect)**:切入点和通知的对应关系，也就是两者结合的称呼\n - **目标对象(Target Object)**:包含切入点的运行时对象，也就是被代理的对象\n - **AOP代理(aop proxy)**:代理对象\n - **织入(Weaving)**:是一个将通知功能加入原始字节码的动态过程，共有三种方法，Spring使用的是运行时织入。\n\n## 3. AOP运行环境\n\n - Spring核心包（4个）\n - 日志包（两个）\n - AOP包（4个）\n    - Spring进行AOP开发(1个)spring-aop-4.2.5.RELEASE.jar\n    - Spring整合AspectJ框架spring-aspects-4.2.5.RELEASE.jar\n    - AOP联盟规范(1个)com.springsource.org.aopalliance-1.0.0.jar\n    - aspectJ支持(1个)com.springsource.org.aspectj.weaver-1.7.2.RELEASE.jar\n\n## 4. XML实现\n\n### 4.1 在配置文件中开启AOP空间\n### 4.2 编写连接点类，即需要增强的业务类\n    业务类可以有上层接口(JDK代理)，也可以没有(cglib代理)\n    \n - 业务类接口\n\n    ```java\n    public interface ImSleep {\n\t    public void sleep();\n    }\n    ```\n    \n - 业务类实现\n    \n    ```java\n\tpublic class HumanSleep implements ImSleep{\n\t\n    \t@Override\n    \tpublic void sleep() {\n    \t\tSystem.out.println(\"我要睡觉了\");\n    \t}\n    }\n    ```\n### 4.3 编写通知类，即增强方法所在的类\n\n```java\npublic class TimeHandler {\n    //通知方法\n\tpublic void printTime() {\n\t\tSystem.out.println(\"CurrentTime=\" + System.currentTimeMillis());\n\t}\n}\n```\n\n### 4.4 在xml中配置切面，即关联切入点和通知\n \n```xml\n<bean id=\"humanSleep\" class=\"com.topvision.ssm.domian.HumanSleep\"/>\n<bean id=\"timeHandler\" class=\"com.topvision.ssm.domian.TimeHandler\"/>\n\t\n<aop:config>\n    //配置切面，ref关联通知类\n\t<aop:aspect id=\"time\" ref=\"timeHandler\">\n\t    //切入点，匹配要切入的业务类\n\t\t<aop:pointcut expression=\"execution(*com.topvision.ssm.domian.HumanSleep.sleep())\" id=\"addTime\"/>\n\t\t//通知类型，执行通知类中的那个方法，关联的切入点\n\t\t<aop:before method=\"printTime\" pointcut-ref=\"addTime\"/>\n\t\t<aop:after method=\"printTime\" pointcut-ref=\"addTime\"/>\n\t</aop:aspect>\n</aop:config>\n```\n\n### 4.5 测试类\n\n```java\nApplicationContext ctx = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\nImSleep human = (ImSleep) ctx.getBean(\"humanSleep\");\nhuman.sleep();\n```\n\n## 5. 注解实现\n### 5.1 开启aop注解\n核心配置文件中添加以下配置，功能等同于注解配置Bean的自动扫描路径\n```xml\n//开启bean扫描\n<context:component-scan base-package=\"com.topvision.ssm.*\"/> \n//开启aop注解扫描\n<aop:aspectj-autoproxy/>\n```\n### 5.2 配置业务类\n```java\n@Component\npublic class Bussiness {\n\t\n\t/**\n\t * 切入点\n\t */\n\tpublic String delete(String obj) {\n\t\tSystem.out.println(\"==========调用切入点：\" + obj + \"说：你敢删除我！===========\\n\");\n\t\treturn obj + \"：瞄～\";\n\t}\n\n\tpublic String add(String obj) {\n\t\tSystem.out.println(\"================这个方法不能被切。。。============== \\n\");\n\t\treturn obj + \"：瞄～ 嘿嘿！\";\n\t}\n\n\tpublic String modify(String obj) {\n\t\tSystem.out.println(\"=================这个也设置加入切吧====================\\n\");\n\t\treturn obj + \"：瞄改瞄啊！\";\n\t}\n}\n```\n### 5.3 配置通知类\n```java\n/**\n * 定义切面\n * \n * @Aspect : 标记为切面类\n * @Pointcut : 指定匹配切点\n * @Before : 指定前置通知，value中指定切入点匹配\n * @AfterReturning ：后置通知，具有可以指定返回值\n * @AfterThrowing ：异常通知\n * \n * @author yanbin\n * \n */\n@Component\n@Aspect\npublic class AspectAdvice {\n\n    /**\n     * 指定切入点匹配表达式，注意它是以方法的形式进行声明的。\n     */\n    @Pointcut(\"execution(* com.topvision.*..*.*(..))\")\n    public void anyMethod() {\n    }\n\n    /**\n     * 前置通知\n     * \n     * @param jp\n     */\n    @Before(value = \"execution(* com.topvision.ssm.domian.Bussiness.delete(..))\")\n    public void doBefore(JoinPoint jp) {\n        System.out.println(\"===========进入before advice============ \\n\");\n\n        System.out.print(\"准备在\" + jp.getTarget().getClass() + \"对象上用\");\n        System.out.print(jp.getSignature().getName() + \"方法进行对 '\");\n        System.out.print(jp.getArgs()[0] + \"'进行删除！\\n\\n\");\n\n        System.out.println(\"要进入切入点方法了 \\n\");\n    }\n\n    /**\n     * 后置通知\n     * \n     * @param jp\n     *            连接点\n     * @param result\n     *            返回值\n     */\n    @AfterReturning(value = \"anyMethod()\", returning = \"result\")\n    public void doAfter(JoinPoint jp, String result) {\n        System.out.println(\"==========进入after advice=========== \\n\");\n        System.out.println(\"切入点方法执行完了 \\n\");\n\n        System.out.print(jp.getArgs()[0] + \"在\");\n        System.out.print(jp.getTarget().getClass() + \"对象上被\");\n        System.out.print(jp.getSignature().getName() + \"方法删除了\");\n        System.out.print(\"只留下：\" + result + \"\\n\\n\");\n    }\n\n    /**\n     * 环绕通知\n     * \n     * @param pjp\n     *            连接点\n     */\n    @Around(value = \"anyMethod()\")\n    public void doAround(ProceedingJoinPoint pjp) throws Throwable {\n        System.out.println(\"===========进入around环绕方法！=========== \\n\");\n\n        // 调用目标方法之前执行的动作\n        System.out.println(\"调用方法之前: 执行！\\n\");\n\n        // 调用方法的参数\n        Object[] args = pjp.getArgs();\n        // 调用的方法名\n        String method = pjp.getSignature().getName();\n        // 获取目标对象\n        Object target = pjp.getTarget();\n        // 执行完方法的返回值：调用proceed()方法，就会触发切入点方法执行\n        Object result = pjp.proceed();\n\n        System.out.println(\"输出：\" + args[0] + \";\" + method + \";\" + target + \";\" + result + \"\\n\");\n        System.out.println(\"调用方法结束：之后执行！\\n\");\n    }\n\n    /**\n     * 异常通知\n     * \n     * @param jp\n     * @param e\n     */\n    @AfterThrowing(value = \"anyMethod())\", throwing = \"e\")\n    public void doThrow(JoinPoint jp, Throwable e) {\n        System.out.println(\"删除出错啦\");\n    }\n\n}\n```\n### 5.4 测试类（集成junit）\n\n```java\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations=\"classpath:applicationContext.xml\")\npublic class Test01{\n\t\n\t@Autowired\n\tprivate Bussiness bs;\n\t\n\t@Test\n\tpublic void BSTest() {\n\t\tbs.delete(\"qwe\");\n\t}\n}\n```\n## 6. 切入点表达式及通知\n### 6.1 切入点表达式\n格式：execution(切入点表达式)\nexecution([方法的访问控制修饰符] 方法的返回值 包名.类名/接口名.方法名(参数)) \n注意：方法的访问控制修饰符可以省略\n```xml\ncom.topvision.*.dao.UserDAO.add() com包下的topvision包下的任意包下的dao包下的...\n *..*.*()      任意包下的任意类中的任意方法\n```\n\t\t\t\t\t\t\n**方法参数**\n\n - add()\t\t无参数\n - add(*)\t\t一个参数\n - add(int)\t\t一个int型参数\n - add(*,*)\t\t两个参数\n - add(*,int)\t\t两个参数，第一个任意，第二个int\n - add(..)\t\t任意参数\n - add(*,..)\t\t至少一个参数\n\n### 6.2 通知类型\n\n 1. 类型\nbefore:在原始操作前运行\n\tafter: 在原始操作后运行，无论方法是否抛出异常\n\tafterReturning:在原始操作后运行，只有方法正常结束才运行，抛出异常则不运行\n\tafterThrowing:在原始操作中如果抛出异常，运行\n\taround: 在原始操作前后运行，通过ProceedingJoinPoint对象调用procee()方法完成对原始操作的调用\n\n 2. 格式\n    ```xml\n    <aop:before pointcut-ref=\"pt2\" method=\"before\"/> \n    <aop:after pointcut-ref=\"pt2\" method=\"after\"/> \n    <aop:after-returning pointcut-ref=\"pt2\" method=\"afterReturning\"/> \n    <aop:after-throwing pointcut-ref=\"pt2\" method=\"afterThrowing\"/> \n    <aop:around pointcut-ref=\"pt2\" method=\"around\"/>\n    ```\n\n### 6.3 获取通知参数\n为环绕通知之外的通知方法定义形参**JoinPoint**，该参数必须是通知方法的第一个参数。\n获取参数：Obejct[] args = jp.getArgs();\t\n范例：\n\n```java\npublic void before(JoinPoint jp){\t\n\tObject[] objs = jp.getArgs();\n\tSystem.out.println(\"before......\"+objs[0]+\",\"+objs[1]);\n}\n```\n为环绕通知方法定义形参**ProceedingJoinPoint**对象\n获取参数：Obejct[] args = pjp.getArgs();\n\n \n\n### 6.4 获取通知返回值\nafterReturning 与 around可以获取方法的返回值\n    \n- around通知获取返回值\n**ProceedingJoinPoint**对象执行调用原始操作的返回值就是原始方法的运行返回值。\n\n```java\nObject res = pt.proceed(args);\n```\n注意：如果原始方法返回值为void类型，则around方法返回值设置为Object。如果原始方法返回值为非void类型，则around方法内必须将原始方法调用的结果返回。\n原始方法返回值为void类型的，通知内获取的返回值统一为null。\n\n```java\npublic Object around(ProceedingJoinPoint pjp) throws Throwable{\n\tObject res = pjp.proceed(args);\n\treturn res;\n}\n```\n\n- afterReturning通知获取返回值\n在通知方法的参数中，声明一个Object类型的参数，用于保存方法的返回值\n\n```java\npublic void afterReturning(JoinPoint jp,Object abc){\n    System.out.println(\"afterReturning......\"+ abc);\n}\n```\n在配置文件中，为afterReturning声明保存返回值的变量名\n\n### 6.5 获取异常值\n异常对象的获取方式与返回值很相似，声明变量，在配置中声明保存异常对象的变量名。\n```xml\n<aop:after-throwing pointcut-ref=\"pt\" method=\"afterThrowing\" throwing=\"e\"/>\n```\n```java\npublic void afterThrowing (Throwable e){\n\tSystem.out.println(\"afterThrowing.......\"+ e);\n}\n```\n\n \n## 7. JDK代理与cglib代理\n\n\n\n\n\n","slug":"spring-3——AOP浅析","published":1,"updated":"2017-06-14T09:08:37.825Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0egp000rssvfnkyt749k","content":"<p>这篇博客简要介绍了Spring AOP的执行过程及实现。<br><a id=\"more\"></a></p>\n<h2 id=\"1-AOP简介\"><a href=\"#1-AOP简介\" class=\"headerlink\" title=\"1. AOP简介\"></a>1. AOP简介</h2><p>AOP（Aspect Oriented Programming），即面向切面编程，可以说是OOP（Object Oriented Programming，面向对象编程）的补充和完善。OOP引入封装、继承、多态等概念来建立一种对象层次结构，用于模拟公共行为的一个集合。不过OOP允许开发者定义纵向的关系，但并不适合定义横向的关系，例如日志功能。日志代码往往横向地散布在所有对象层次中，而与它对应的对象的核心功能毫无关系对于其他类型的代码，如安全性、异常处理和透明的持续性也都是如此，这种散布在各处的无关的代码被称为横切（cross cutting），在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。</p>\n<p>AOP技术恰恰相反，它利用一种称为”横切”的技术，剖解开封装的对象内部，并将那些影响了多个类的公共行为封装到一个可重用模块，并将其命名为”Aspect”，即切面。所谓”切面”，简单说就是那些与业务无关，却为业务模块所共同调用的逻辑或责任封装起来，便于减少系统的重复代码，降低模块之间的耦合度，并有利于未来的可操作性和可维护性。</p>\n<p>使用”横切”技术，AOP把软件系统分为两个部分：核心关注点和横切关注点。业务处理的主要流程是核心关注点，与之关系不大的部分是横切关注点。横切关注点的一个特点是，他们经常发生在核心关注点的多处，而各处基本相似，比如权限认证、日志、事物。AOP的作用在于分离系统中的各种关注点，将核心关注点和横切关注点分离开来。</p>\n<h2 id=\"2-AOP核心概念\"><a href=\"#2-AOP核心概念\" class=\"headerlink\" title=\"2. AOP核心概念\"></a>2. AOP核心概念</h2><ul>\n<li><strong>连接点(Joinpoint)</strong>:被拦截到的点，因为Spring只支持方法类型的连接点，所以在Spring中连接点指的就是被拦截到的方法，实际上连接点还可以是字段或者构造器</li>\n<li><strong>切入点(Pointcut</strong>):要被增强的方法，定义了切入发生的地点</li>\n<li><strong>通知(advice)</strong>:要执行的增强方法，定义了切入的时机和执行的动作</li>\n<li><strong>切面(Aspect)</strong>:切入点和通知的对应关系，也就是两者结合的称呼</li>\n<li><strong>目标对象(Target Object)</strong>:包含切入点的运行时对象，也就是被代理的对象</li>\n<li><strong>AOP代理(aop proxy)</strong>:代理对象</li>\n<li><strong>织入(Weaving)</strong>:是一个将通知功能加入原始字节码的动态过程，共有三种方法，Spring使用的是运行时织入。</li>\n</ul>\n<h2 id=\"3-AOP运行环境\"><a href=\"#3-AOP运行环境\" class=\"headerlink\" title=\"3. AOP运行环境\"></a>3. AOP运行环境</h2><ul>\n<li>Spring核心包（4个）</li>\n<li>日志包（两个）</li>\n<li>AOP包（4个）<ul>\n<li>Spring进行AOP开发(1个)spring-aop-4.2.5.RELEASE.jar</li>\n<li>Spring整合AspectJ框架spring-aspects-4.2.5.RELEASE.jar</li>\n<li>AOP联盟规范(1个)com.springsource.org.aopalliance-1.0.0.jar</li>\n<li>aspectJ支持(1个)com.springsource.org.aspectj.weaver-1.7.2.RELEASE.jar</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"4-XML实现\"><a href=\"#4-XML实现\" class=\"headerlink\" title=\"4. XML实现\"></a>4. XML实现</h2><h3 id=\"4-1-在配置文件中开启AOP空间\"><a href=\"#4-1-在配置文件中开启AOP空间\" class=\"headerlink\" title=\"4.1 在配置文件中开启AOP空间\"></a>4.1 在配置文件中开启AOP空间</h3><h3 id=\"4-2-编写连接点类，即需要增强的业务类\"><a href=\"#4-2-编写连接点类，即需要增强的业务类\" class=\"headerlink\" title=\"4.2 编写连接点类，即需要增强的业务类\"></a>4.2 编写连接点类，即需要增强的业务类</h3><pre><code>业务类可以有上层接口(JDK代理)，也可以没有(cglib代理)\n</code></pre><ul>\n<li><p>业务类接口</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ImSleep</span> </span>&#123;</div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sleep</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li><p>业务类实现</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HumanSleep</span> <span class=\"keyword\">implements</span> <span class=\"title\">ImSleep</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">   \t<span class=\"meta\">@Override</span></div><div class=\"line\">   \t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sleep</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">   \t\tSystem.out.println(<span class=\"string\">\"我要睡觉了\"</span>);</div><div class=\"line\">   \t&#125;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"4-3-编写通知类，即增强方法所在的类\"><a href=\"#4-3-编写通知类，即增强方法所在的类\" class=\"headerlink\" title=\"4.3 编写通知类，即增强方法所在的类\"></a>4.3 编写通知类，即增强方法所在的类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TimeHandler</span> </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//通知方法</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printTime</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"CurrentTime=\"</span> + System.currentTimeMillis());</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"4-4-在xml中配置切面，即关联切入点和通知\"><a href=\"#4-4-在xml中配置切面，即关联切入点和通知\" class=\"headerlink\" title=\"4.4 在xml中配置切面，即关联切入点和通知\"></a>4.4 在xml中配置切面，即关联切入点和通知</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"humanSleep\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.ssm.domian.HumanSleep\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"timeHandler\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.ssm.domian.TimeHandler\"</span>/&gt;</span></div><div class=\"line\">\t</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:config</span>&gt;</span></div><div class=\"line\">    //配置切面，ref关联通知类</div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">aop:aspect</span> <span class=\"attr\">id</span>=<span class=\"string\">\"time\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"timeHandler\"</span>&gt;</span></div><div class=\"line\">\t    //切入点，匹配要切入的业务类</div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">expression</span>=<span class=\"string\">\"execution(*com.topvision.ssm.domian.HumanSleep.sleep())\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"addTime\"</span>/&gt;</span></div><div class=\"line\">\t\t//通知类型，执行通知类中的那个方法，关联的切入点</div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">aop:before</span> <span class=\"attr\">method</span>=<span class=\"string\">\"printTime\"</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"addTime\"</span>/&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">aop:after</span> <span class=\"attr\">method</span>=<span class=\"string\">\"printTime\"</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"addTime\"</span>/&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">aop:aspect</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">aop:config</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"4-5-测试类\"><a href=\"#4-5-测试类\" class=\"headerlink\" title=\"4.5 测试类\"></a>4.5 测试类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ApplicationContext ctx = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"applicationContext.xml\"</span>);</div><div class=\"line\">ImSleep human = (ImSleep) ctx.getBean(<span class=\"string\">\"humanSleep\"</span>);</div><div class=\"line\">human.sleep();</div></pre></td></tr></table></figure>\n<h2 id=\"5-注解实现\"><a href=\"#5-注解实现\" class=\"headerlink\" title=\"5. 注解实现\"></a>5. 注解实现</h2><h3 id=\"5-1-开启aop注解\"><a href=\"#5-1-开启aop注解\" class=\"headerlink\" title=\"5.1 开启aop注解\"></a>5.1 开启aop注解</h3><p>核心配置文件中添加以下配置，功能等同于注解配置Bean的自动扫描路径<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">//开启bean扫描</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context:component-scan</span> <span class=\"attr\">base-package</span>=<span class=\"string\">\"com.topvision.ssm.*\"</span>/&gt;</span> </div><div class=\"line\">//开启aop注解扫描</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:aspectj-autoproxy</span>/&gt;</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"5-2-配置业务类\"><a href=\"#5-2-配置业务类\" class=\"headerlink\" title=\"5.2 配置业务类\"></a>5.2 配置业务类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Component</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bussiness</span> </span>&#123;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"comment\">/**</span></div><div class=\"line\">\t * 切入点</div><div class=\"line\">\t */</div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">delete</span><span class=\"params\">(String obj)</span> </span>&#123;</div><div class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"==========调用切入点：\"</span> + obj + <span class=\"string\">\"说：你敢删除我！===========\\n\"</span>);</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> obj + <span class=\"string\">\"：瞄～\"</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">add</span><span class=\"params\">(String obj)</span> </span>&#123;</div><div class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"================这个方法不能被切。。。============== \\n\"</span>);</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> obj + <span class=\"string\">\"：瞄～ 嘿嘿！\"</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">modify</span><span class=\"params\">(String obj)</span> </span>&#123;</div><div class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"=================这个也设置加入切吧====================\\n\"</span>);</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> obj + <span class=\"string\">\"：瞄改瞄啊！\"</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"5-3-配置通知类\"><a href=\"#5-3-配置通知类\" class=\"headerlink\" title=\"5.3 配置通知类\"></a>5.3 配置通知类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 定义切面</div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@Aspect</span> : 标记为切面类</div><div class=\"line\"> * <span class=\"doctag\">@Pointcut</span> : 指定匹配切点</div><div class=\"line\"> * <span class=\"doctag\">@Before</span> : 指定前置通知，value中指定切入点匹配</div><div class=\"line\"> * <span class=\"doctag\">@AfterReturning</span> ：后置通知，具有可以指定返回值</div><div class=\"line\"> * <span class=\"doctag\">@AfterThrowing</span> ：异常通知</div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@author</span> yanbin</div><div class=\"line\"> * </div><div class=\"line\"> */</div><div class=\"line\"><span class=\"meta\">@Component</span></div><div class=\"line\"><span class=\"meta\">@Aspect</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AspectAdvice</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 指定切入点匹配表达式，注意它是以方法的形式进行声明的。</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Pointcut</span>(<span class=\"string\">\"execution(* com.topvision.*..*.*(..))\"</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">anyMethod</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 前置通知</div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> jp</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Before</span>(value = <span class=\"string\">\"execution(* com.topvision.ssm.domian.Bussiness.delete(..))\"</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doBefore</span><span class=\"params\">(JoinPoint jp)</span> </span>&#123;</div><div class=\"line\">        System.out.println(<span class=\"string\">\"===========进入before advice============ \\n\"</span>);</div><div class=\"line\"></div><div class=\"line\">        System.out.print(<span class=\"string\">\"准备在\"</span> + jp.getTarget().getClass() + <span class=\"string\">\"对象上用\"</span>);</div><div class=\"line\">        System.out.print(jp.getSignature().getName() + <span class=\"string\">\"方法进行对 '\"</span>);</div><div class=\"line\">        System.out.print(jp.getArgs()[<span class=\"number\">0</span>] + <span class=\"string\">\"'进行删除！\\n\\n\"</span>);</div><div class=\"line\"></div><div class=\"line\">        System.out.println(<span class=\"string\">\"要进入切入点方法了 \\n\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 后置通知</div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> jp</div><div class=\"line\">     *            连接点</div><div class=\"line\">     * <span class=\"doctag\">@param</span> result</div><div class=\"line\">     *            返回值</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@AfterReturning</span>(value = <span class=\"string\">\"anyMethod()\"</span>, returning = <span class=\"string\">\"result\"</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doAfter</span><span class=\"params\">(JoinPoint jp, String result)</span> </span>&#123;</div><div class=\"line\">        System.out.println(<span class=\"string\">\"==========进入after advice=========== \\n\"</span>);</div><div class=\"line\">        System.out.println(<span class=\"string\">\"切入点方法执行完了 \\n\"</span>);</div><div class=\"line\"></div><div class=\"line\">        System.out.print(jp.getArgs()[<span class=\"number\">0</span>] + <span class=\"string\">\"在\"</span>);</div><div class=\"line\">        System.out.print(jp.getTarget().getClass() + <span class=\"string\">\"对象上被\"</span>);</div><div class=\"line\">        System.out.print(jp.getSignature().getName() + <span class=\"string\">\"方法删除了\"</span>);</div><div class=\"line\">        System.out.print(<span class=\"string\">\"只留下：\"</span> + result + <span class=\"string\">\"\\n\\n\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 环绕通知</div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> pjp</div><div class=\"line\">     *            连接点</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Around</span>(value = <span class=\"string\">\"anyMethod()\"</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doAround</span><span class=\"params\">(ProceedingJoinPoint pjp)</span> <span class=\"keyword\">throws</span> Throwable </span>&#123;</div><div class=\"line\">        System.out.println(<span class=\"string\">\"===========进入around环绕方法！=========== \\n\"</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 调用目标方法之前执行的动作</span></div><div class=\"line\">        System.out.println(<span class=\"string\">\"调用方法之前: 执行！\\n\"</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 调用方法的参数</span></div><div class=\"line\">        Object[] args = pjp.getArgs();</div><div class=\"line\">        <span class=\"comment\">// 调用的方法名</span></div><div class=\"line\">        String method = pjp.getSignature().getName();</div><div class=\"line\">        <span class=\"comment\">// 获取目标对象</span></div><div class=\"line\">        Object target = pjp.getTarget();</div><div class=\"line\">        <span class=\"comment\">// 执行完方法的返回值：调用proceed()方法，就会触发切入点方法执行</span></div><div class=\"line\">        Object result = pjp.proceed();</div><div class=\"line\"></div><div class=\"line\">        System.out.println(<span class=\"string\">\"输出：\"</span> + args[<span class=\"number\">0</span>] + <span class=\"string\">\";\"</span> + method + <span class=\"string\">\";\"</span> + target + <span class=\"string\">\";\"</span> + result + <span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">        System.out.println(<span class=\"string\">\"调用方法结束：之后执行！\\n\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 异常通知</div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> jp</div><div class=\"line\">     * <span class=\"doctag\">@param</span> e</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@AfterThrowing</span>(value = <span class=\"string\">\"anyMethod())\"</span>, throwing = <span class=\"string\">\"e\"</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doThrow</span><span class=\"params\">(JoinPoint jp, Throwable e)</span> </span>&#123;</div><div class=\"line\">        System.out.println(<span class=\"string\">\"删除出错啦\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"5-4-测试类（集成junit）\"><a href=\"#5-4-测试类（集成junit）\" class=\"headerlink\" title=\"5.4 测试类（集成junit）\"></a>5.4 测试类（集成junit）</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@RunWith</span>(SpringJUnit4ClassRunner.class)</div><div class=\"line\"><span class=\"meta\">@ContextConfiguration</span>(locations=<span class=\"string\">\"classpath:applicationContext.xml\"</span>)</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test01</span></span>&#123;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"meta\">@Autowired</span></div><div class=\"line\">\t<span class=\"keyword\">private</span> Bussiness bs;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"meta\">@Test</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">BSTest</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tbs.delete(<span class=\"string\">\"qwe\"</span>);</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"6-切入点表达式及通知\"><a href=\"#6-切入点表达式及通知\" class=\"headerlink\" title=\"6. 切入点表达式及通知\"></a>6. 切入点表达式及通知</h2><h3 id=\"6-1-切入点表达式\"><a href=\"#6-1-切入点表达式\" class=\"headerlink\" title=\"6.1 切入点表达式\"></a>6.1 切入点表达式</h3><p>格式：execution(切入点表达式)<br>execution([方法的访问控制修饰符] 方法的返回值 包名.类名/接口名.方法名(参数))<br>注意：方法的访问控制修饰符可以省略<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">com.topvision.*.dao.UserDAO.add() com包下的topvision包下的任意包下的dao包下的...</div><div class=\"line\"> *..*.*()      任意包下的任意类中的任意方法</div></pre></td></tr></table></figure></p>\n<p><strong>方法参数</strong></p>\n<ul>\n<li>add()        无参数</li>\n<li>add(*)        一个参数</li>\n<li>add(int)        一个int型参数</li>\n<li>add(<em>,</em>)        两个参数</li>\n<li>add(*,int)        两个参数，第一个任意，第二个int</li>\n<li>add(..)        任意参数</li>\n<li>add(*,..)        至少一个参数</li>\n</ul>\n<h3 id=\"6-2-通知类型\"><a href=\"#6-2-通知类型\" class=\"headerlink\" title=\"6.2 通知类型\"></a>6.2 通知类型</h3><ol>\n<li><p>类型<br>before:在原始操作前运行<br>after: 在原始操作后运行，无论方法是否抛出异常<br>afterReturning:在原始操作后运行，只有方法正常结束才运行，抛出异常则不运行<br>afterThrowing:在原始操作中如果抛出异常，运行<br>around: 在原始操作前后运行，通过ProceedingJoinPoint对象调用procee()方法完成对原始操作的调用</p>\n</li>\n<li><p>格式</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:before</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt2\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"before\"</span>/&gt;</span> </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:after</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt2\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"after\"</span>/&gt;</span> </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:after-returning</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt2\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"afterReturning\"</span>/&gt;</span> </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:after-throwing</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt2\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"afterThrowing\"</span>/&gt;</span> </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:around</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt2\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"around\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"6-3-获取通知参数\"><a href=\"#6-3-获取通知参数\" class=\"headerlink\" title=\"6.3 获取通知参数\"></a>6.3 获取通知参数</h3><p>为环绕通知之外的通知方法定义形参<strong>JoinPoint</strong>，该参数必须是通知方法的第一个参数。<br>获取参数：Obejct[] args = jp.getArgs();<br>范例：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">before</span><span class=\"params\">(JoinPoint jp)</span></span>&#123;\t</div><div class=\"line\">\tObject[] objs = jp.getArgs();</div><div class=\"line\">\tSystem.out.println(<span class=\"string\">\"before......\"</span>+objs[<span class=\"number\">0</span>]+<span class=\"string\">\",\"</span>+objs[<span class=\"number\">1</span>]);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>为环绕通知方法定义形参<strong>ProceedingJoinPoint</strong>对象<br>获取参数：Obejct[] args = pjp.getArgs();</p>\n<h3 id=\"6-4-获取通知返回值\"><a href=\"#6-4-获取通知返回值\" class=\"headerlink\" title=\"6.4 获取通知返回值\"></a>6.4 获取通知返回值</h3><p>afterReturning 与 around可以获取方法的返回值</p>\n<ul>\n<li>around通知获取返回值<br><strong>ProceedingJoinPoint</strong>对象执行调用原始操作的返回值就是原始方法的运行返回值。</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Object res = pt.proceed(args);</div></pre></td></tr></table></figure>\n<p>注意：如果原始方法返回值为void类型，则around方法返回值设置为Object。如果原始方法返回值为非void类型，则around方法内必须将原始方法调用的结果返回。<br>原始方法返回值为void类型的，通知内获取的返回值统一为null。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">around</span><span class=\"params\">(ProceedingJoinPoint pjp)</span> <span class=\"keyword\">throws</span> Throwable</span>&#123;</div><div class=\"line\">\tObject res = pjp.proceed(args);</div><div class=\"line\">\t<span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li>afterReturning通知获取返回值<br>在通知方法的参数中，声明一个Object类型的参数，用于保存方法的返回值</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">afterReturning</span><span class=\"params\">(JoinPoint jp,Object abc)</span></span>&#123;</div><div class=\"line\">    System.out.println(<span class=\"string\">\"afterReturning......\"</span>+ abc);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在配置文件中，为afterReturning声明保存返回值的变量名</p>\n<h3 id=\"6-5-获取异常值\"><a href=\"#6-5-获取异常值\" class=\"headerlink\" title=\"6.5 获取异常值\"></a>6.5 获取异常值</h3><p>异常对象的获取方式与返回值很相似，声明变量，在配置中声明保存异常对象的变量名。<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:after-throwing</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"afterThrowing\"</span> <span class=\"attr\">throwing</span>=<span class=\"string\">\"e\"</span>/&gt;</span></div></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">afterThrowing</span> <span class=\"params\">(Throwable e)</span></span>&#123;</div><div class=\"line\">\tSystem.out.println(<span class=\"string\">\"afterThrowing.......\"</span>+ e);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"7-JDK代理与cglib代理\"><a href=\"#7-JDK代理与cglib代理\" class=\"headerlink\" title=\"7. JDK代理与cglib代理\"></a>7. JDK代理与cglib代理</h2>","site":{"data":{}},"excerpt":"<p>这篇博客简要介绍了Spring AOP的执行过程及实现。<br>","more":"</p>\n<h2 id=\"1-AOP简介\"><a href=\"#1-AOP简介\" class=\"headerlink\" title=\"1. AOP简介\"></a>1. AOP简介</h2><p>AOP（Aspect Oriented Programming），即面向切面编程，可以说是OOP（Object Oriented Programming，面向对象编程）的补充和完善。OOP引入封装、继承、多态等概念来建立一种对象层次结构，用于模拟公共行为的一个集合。不过OOP允许开发者定义纵向的关系，但并不适合定义横向的关系，例如日志功能。日志代码往往横向地散布在所有对象层次中，而与它对应的对象的核心功能毫无关系对于其他类型的代码，如安全性、异常处理和透明的持续性也都是如此，这种散布在各处的无关的代码被称为横切（cross cutting），在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。</p>\n<p>AOP技术恰恰相反，它利用一种称为”横切”的技术，剖解开封装的对象内部，并将那些影响了多个类的公共行为封装到一个可重用模块，并将其命名为”Aspect”，即切面。所谓”切面”，简单说就是那些与业务无关，却为业务模块所共同调用的逻辑或责任封装起来，便于减少系统的重复代码，降低模块之间的耦合度，并有利于未来的可操作性和可维护性。</p>\n<p>使用”横切”技术，AOP把软件系统分为两个部分：核心关注点和横切关注点。业务处理的主要流程是核心关注点，与之关系不大的部分是横切关注点。横切关注点的一个特点是，他们经常发生在核心关注点的多处，而各处基本相似，比如权限认证、日志、事物。AOP的作用在于分离系统中的各种关注点，将核心关注点和横切关注点分离开来。</p>\n<h2 id=\"2-AOP核心概念\"><a href=\"#2-AOP核心概念\" class=\"headerlink\" title=\"2. AOP核心概念\"></a>2. AOP核心概念</h2><ul>\n<li><strong>连接点(Joinpoint)</strong>:被拦截到的点，因为Spring只支持方法类型的连接点，所以在Spring中连接点指的就是被拦截到的方法，实际上连接点还可以是字段或者构造器</li>\n<li><strong>切入点(Pointcut</strong>):要被增强的方法，定义了切入发生的地点</li>\n<li><strong>通知(advice)</strong>:要执行的增强方法，定义了切入的时机和执行的动作</li>\n<li><strong>切面(Aspect)</strong>:切入点和通知的对应关系，也就是两者结合的称呼</li>\n<li><strong>目标对象(Target Object)</strong>:包含切入点的运行时对象，也就是被代理的对象</li>\n<li><strong>AOP代理(aop proxy)</strong>:代理对象</li>\n<li><strong>织入(Weaving)</strong>:是一个将通知功能加入原始字节码的动态过程，共有三种方法，Spring使用的是运行时织入。</li>\n</ul>\n<h2 id=\"3-AOP运行环境\"><a href=\"#3-AOP运行环境\" class=\"headerlink\" title=\"3. AOP运行环境\"></a>3. AOP运行环境</h2><ul>\n<li>Spring核心包（4个）</li>\n<li>日志包（两个）</li>\n<li>AOP包（4个）<ul>\n<li>Spring进行AOP开发(1个)spring-aop-4.2.5.RELEASE.jar</li>\n<li>Spring整合AspectJ框架spring-aspects-4.2.5.RELEASE.jar</li>\n<li>AOP联盟规范(1个)com.springsource.org.aopalliance-1.0.0.jar</li>\n<li>aspectJ支持(1个)com.springsource.org.aspectj.weaver-1.7.2.RELEASE.jar</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"4-XML实现\"><a href=\"#4-XML实现\" class=\"headerlink\" title=\"4. XML实现\"></a>4. XML实现</h2><h3 id=\"4-1-在配置文件中开启AOP空间\"><a href=\"#4-1-在配置文件中开启AOP空间\" class=\"headerlink\" title=\"4.1 在配置文件中开启AOP空间\"></a>4.1 在配置文件中开启AOP空间</h3><h3 id=\"4-2-编写连接点类，即需要增强的业务类\"><a href=\"#4-2-编写连接点类，即需要增强的业务类\" class=\"headerlink\" title=\"4.2 编写连接点类，即需要增强的业务类\"></a>4.2 编写连接点类，即需要增强的业务类</h3><pre><code>业务类可以有上层接口(JDK代理)，也可以没有(cglib代理)\n</code></pre><ul>\n<li><p>业务类接口</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ImSleep</span> </span>&#123;</div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sleep</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li><p>业务类实现</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HumanSleep</span> <span class=\"keyword\">implements</span> <span class=\"title\">ImSleep</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">   \t<span class=\"meta\">@Override</span></div><div class=\"line\">   \t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sleep</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">   \t\tSystem.out.println(<span class=\"string\">\"我要睡觉了\"</span>);</div><div class=\"line\">   \t&#125;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"4-3-编写通知类，即增强方法所在的类\"><a href=\"#4-3-编写通知类，即增强方法所在的类\" class=\"headerlink\" title=\"4.3 编写通知类，即增强方法所在的类\"></a>4.3 编写通知类，即增强方法所在的类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TimeHandler</span> </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//通知方法</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printTime</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"CurrentTime=\"</span> + System.currentTimeMillis());</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"4-4-在xml中配置切面，即关联切入点和通知\"><a href=\"#4-4-在xml中配置切面，即关联切入点和通知\" class=\"headerlink\" title=\"4.4 在xml中配置切面，即关联切入点和通知\"></a>4.4 在xml中配置切面，即关联切入点和通知</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"humanSleep\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.ssm.domian.HumanSleep\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"timeHandler\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.ssm.domian.TimeHandler\"</span>/&gt;</span></div><div class=\"line\">\t</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:config</span>&gt;</span></div><div class=\"line\">    //配置切面，ref关联通知类</div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">aop:aspect</span> <span class=\"attr\">id</span>=<span class=\"string\">\"time\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"timeHandler\"</span>&gt;</span></div><div class=\"line\">\t    //切入点，匹配要切入的业务类</div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">expression</span>=<span class=\"string\">\"execution(*com.topvision.ssm.domian.HumanSleep.sleep())\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"addTime\"</span>/&gt;</span></div><div class=\"line\">\t\t//通知类型，执行通知类中的那个方法，关联的切入点</div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">aop:before</span> <span class=\"attr\">method</span>=<span class=\"string\">\"printTime\"</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"addTime\"</span>/&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">aop:after</span> <span class=\"attr\">method</span>=<span class=\"string\">\"printTime\"</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"addTime\"</span>/&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">aop:aspect</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">aop:config</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"4-5-测试类\"><a href=\"#4-5-测试类\" class=\"headerlink\" title=\"4.5 测试类\"></a>4.5 测试类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ApplicationContext ctx = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"applicationContext.xml\"</span>);</div><div class=\"line\">ImSleep human = (ImSleep) ctx.getBean(<span class=\"string\">\"humanSleep\"</span>);</div><div class=\"line\">human.sleep();</div></pre></td></tr></table></figure>\n<h2 id=\"5-注解实现\"><a href=\"#5-注解实现\" class=\"headerlink\" title=\"5. 注解实现\"></a>5. 注解实现</h2><h3 id=\"5-1-开启aop注解\"><a href=\"#5-1-开启aop注解\" class=\"headerlink\" title=\"5.1 开启aop注解\"></a>5.1 开启aop注解</h3><p>核心配置文件中添加以下配置，功能等同于注解配置Bean的自动扫描路径<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">//开启bean扫描</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context:component-scan</span> <span class=\"attr\">base-package</span>=<span class=\"string\">\"com.topvision.ssm.*\"</span>/&gt;</span> </div><div class=\"line\">//开启aop注解扫描</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:aspectj-autoproxy</span>/&gt;</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"5-2-配置业务类\"><a href=\"#5-2-配置业务类\" class=\"headerlink\" title=\"5.2 配置业务类\"></a>5.2 配置业务类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Component</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bussiness</span> </span>&#123;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"comment\">/**</span></div><div class=\"line\">\t * 切入点</div><div class=\"line\">\t */</div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">delete</span><span class=\"params\">(String obj)</span> </span>&#123;</div><div class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"==========调用切入点：\"</span> + obj + <span class=\"string\">\"说：你敢删除我！===========\\n\"</span>);</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> obj + <span class=\"string\">\"：瞄～\"</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">add</span><span class=\"params\">(String obj)</span> </span>&#123;</div><div class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"================这个方法不能被切。。。============== \\n\"</span>);</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> obj + <span class=\"string\">\"：瞄～ 嘿嘿！\"</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">modify</span><span class=\"params\">(String obj)</span> </span>&#123;</div><div class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"=================这个也设置加入切吧====================\\n\"</span>);</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> obj + <span class=\"string\">\"：瞄改瞄啊！\"</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"5-3-配置通知类\"><a href=\"#5-3-配置通知类\" class=\"headerlink\" title=\"5.3 配置通知类\"></a>5.3 配置通知类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 定义切面</div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@Aspect</span> : 标记为切面类</div><div class=\"line\"> * <span class=\"doctag\">@Pointcut</span> : 指定匹配切点</div><div class=\"line\"> * <span class=\"doctag\">@Before</span> : 指定前置通知，value中指定切入点匹配</div><div class=\"line\"> * <span class=\"doctag\">@AfterReturning</span> ：后置通知，具有可以指定返回值</div><div class=\"line\"> * <span class=\"doctag\">@AfterThrowing</span> ：异常通知</div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@author</span> yanbin</div><div class=\"line\"> * </div><div class=\"line\"> */</div><div class=\"line\"><span class=\"meta\">@Component</span></div><div class=\"line\"><span class=\"meta\">@Aspect</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AspectAdvice</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 指定切入点匹配表达式，注意它是以方法的形式进行声明的。</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Pointcut</span>(<span class=\"string\">\"execution(* com.topvision.*..*.*(..))\"</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">anyMethod</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 前置通知</div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> jp</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Before</span>(value = <span class=\"string\">\"execution(* com.topvision.ssm.domian.Bussiness.delete(..))\"</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doBefore</span><span class=\"params\">(JoinPoint jp)</span> </span>&#123;</div><div class=\"line\">        System.out.println(<span class=\"string\">\"===========进入before advice============ \\n\"</span>);</div><div class=\"line\"></div><div class=\"line\">        System.out.print(<span class=\"string\">\"准备在\"</span> + jp.getTarget().getClass() + <span class=\"string\">\"对象上用\"</span>);</div><div class=\"line\">        System.out.print(jp.getSignature().getName() + <span class=\"string\">\"方法进行对 '\"</span>);</div><div class=\"line\">        System.out.print(jp.getArgs()[<span class=\"number\">0</span>] + <span class=\"string\">\"'进行删除！\\n\\n\"</span>);</div><div class=\"line\"></div><div class=\"line\">        System.out.println(<span class=\"string\">\"要进入切入点方法了 \\n\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 后置通知</div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> jp</div><div class=\"line\">     *            连接点</div><div class=\"line\">     * <span class=\"doctag\">@param</span> result</div><div class=\"line\">     *            返回值</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@AfterReturning</span>(value = <span class=\"string\">\"anyMethod()\"</span>, returning = <span class=\"string\">\"result\"</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doAfter</span><span class=\"params\">(JoinPoint jp, String result)</span> </span>&#123;</div><div class=\"line\">        System.out.println(<span class=\"string\">\"==========进入after advice=========== \\n\"</span>);</div><div class=\"line\">        System.out.println(<span class=\"string\">\"切入点方法执行完了 \\n\"</span>);</div><div class=\"line\"></div><div class=\"line\">        System.out.print(jp.getArgs()[<span class=\"number\">0</span>] + <span class=\"string\">\"在\"</span>);</div><div class=\"line\">        System.out.print(jp.getTarget().getClass() + <span class=\"string\">\"对象上被\"</span>);</div><div class=\"line\">        System.out.print(jp.getSignature().getName() + <span class=\"string\">\"方法删除了\"</span>);</div><div class=\"line\">        System.out.print(<span class=\"string\">\"只留下：\"</span> + result + <span class=\"string\">\"\\n\\n\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 环绕通知</div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> pjp</div><div class=\"line\">     *            连接点</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Around</span>(value = <span class=\"string\">\"anyMethod()\"</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doAround</span><span class=\"params\">(ProceedingJoinPoint pjp)</span> <span class=\"keyword\">throws</span> Throwable </span>&#123;</div><div class=\"line\">        System.out.println(<span class=\"string\">\"===========进入around环绕方法！=========== \\n\"</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 调用目标方法之前执行的动作</span></div><div class=\"line\">        System.out.println(<span class=\"string\">\"调用方法之前: 执行！\\n\"</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 调用方法的参数</span></div><div class=\"line\">        Object[] args = pjp.getArgs();</div><div class=\"line\">        <span class=\"comment\">// 调用的方法名</span></div><div class=\"line\">        String method = pjp.getSignature().getName();</div><div class=\"line\">        <span class=\"comment\">// 获取目标对象</span></div><div class=\"line\">        Object target = pjp.getTarget();</div><div class=\"line\">        <span class=\"comment\">// 执行完方法的返回值：调用proceed()方法，就会触发切入点方法执行</span></div><div class=\"line\">        Object result = pjp.proceed();</div><div class=\"line\"></div><div class=\"line\">        System.out.println(<span class=\"string\">\"输出：\"</span> + args[<span class=\"number\">0</span>] + <span class=\"string\">\";\"</span> + method + <span class=\"string\">\";\"</span> + target + <span class=\"string\">\";\"</span> + result + <span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">        System.out.println(<span class=\"string\">\"调用方法结束：之后执行！\\n\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 异常通知</div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> jp</div><div class=\"line\">     * <span class=\"doctag\">@param</span> e</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@AfterThrowing</span>(value = <span class=\"string\">\"anyMethod())\"</span>, throwing = <span class=\"string\">\"e\"</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doThrow</span><span class=\"params\">(JoinPoint jp, Throwable e)</span> </span>&#123;</div><div class=\"line\">        System.out.println(<span class=\"string\">\"删除出错啦\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"5-4-测试类（集成junit）\"><a href=\"#5-4-测试类（集成junit）\" class=\"headerlink\" title=\"5.4 测试类（集成junit）\"></a>5.4 测试类（集成junit）</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@RunWith</span>(SpringJUnit4ClassRunner.class)</div><div class=\"line\"><span class=\"meta\">@ContextConfiguration</span>(locations=<span class=\"string\">\"classpath:applicationContext.xml\"</span>)</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test01</span></span>&#123;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"meta\">@Autowired</span></div><div class=\"line\">\t<span class=\"keyword\">private</span> Bussiness bs;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"meta\">@Test</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">BSTest</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tbs.delete(<span class=\"string\">\"qwe\"</span>);</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"6-切入点表达式及通知\"><a href=\"#6-切入点表达式及通知\" class=\"headerlink\" title=\"6. 切入点表达式及通知\"></a>6. 切入点表达式及通知</h2><h3 id=\"6-1-切入点表达式\"><a href=\"#6-1-切入点表达式\" class=\"headerlink\" title=\"6.1 切入点表达式\"></a>6.1 切入点表达式</h3><p>格式：execution(切入点表达式)<br>execution([方法的访问控制修饰符] 方法的返回值 包名.类名/接口名.方法名(参数))<br>注意：方法的访问控制修饰符可以省略<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">com.topvision.*.dao.UserDAO.add() com包下的topvision包下的任意包下的dao包下的...</div><div class=\"line\"> *..*.*()      任意包下的任意类中的任意方法</div></pre></td></tr></table></figure></p>\n<p><strong>方法参数</strong></p>\n<ul>\n<li>add()        无参数</li>\n<li>add(*)        一个参数</li>\n<li>add(int)        一个int型参数</li>\n<li>add(<em>,</em>)        两个参数</li>\n<li>add(*,int)        两个参数，第一个任意，第二个int</li>\n<li>add(..)        任意参数</li>\n<li>add(*,..)        至少一个参数</li>\n</ul>\n<h3 id=\"6-2-通知类型\"><a href=\"#6-2-通知类型\" class=\"headerlink\" title=\"6.2 通知类型\"></a>6.2 通知类型</h3><ol>\n<li><p>类型<br>before:在原始操作前运行<br>after: 在原始操作后运行，无论方法是否抛出异常<br>afterReturning:在原始操作后运行，只有方法正常结束才运行，抛出异常则不运行<br>afterThrowing:在原始操作中如果抛出异常，运行<br>around: 在原始操作前后运行，通过ProceedingJoinPoint对象调用procee()方法完成对原始操作的调用</p>\n</li>\n<li><p>格式</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:before</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt2\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"before\"</span>/&gt;</span> </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:after</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt2\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"after\"</span>/&gt;</span> </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:after-returning</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt2\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"afterReturning\"</span>/&gt;</span> </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:after-throwing</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt2\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"afterThrowing\"</span>/&gt;</span> </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:around</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt2\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"around\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"6-3-获取通知参数\"><a href=\"#6-3-获取通知参数\" class=\"headerlink\" title=\"6.3 获取通知参数\"></a>6.3 获取通知参数</h3><p>为环绕通知之外的通知方法定义形参<strong>JoinPoint</strong>，该参数必须是通知方法的第一个参数。<br>获取参数：Obejct[] args = jp.getArgs();<br>范例：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">before</span><span class=\"params\">(JoinPoint jp)</span></span>&#123;\t</div><div class=\"line\">\tObject[] objs = jp.getArgs();</div><div class=\"line\">\tSystem.out.println(<span class=\"string\">\"before......\"</span>+objs[<span class=\"number\">0</span>]+<span class=\"string\">\",\"</span>+objs[<span class=\"number\">1</span>]);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>为环绕通知方法定义形参<strong>ProceedingJoinPoint</strong>对象<br>获取参数：Obejct[] args = pjp.getArgs();</p>\n<h3 id=\"6-4-获取通知返回值\"><a href=\"#6-4-获取通知返回值\" class=\"headerlink\" title=\"6.4 获取通知返回值\"></a>6.4 获取通知返回值</h3><p>afterReturning 与 around可以获取方法的返回值</p>\n<ul>\n<li>around通知获取返回值<br><strong>ProceedingJoinPoint</strong>对象执行调用原始操作的返回值就是原始方法的运行返回值。</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Object res = pt.proceed(args);</div></pre></td></tr></table></figure>\n<p>注意：如果原始方法返回值为void类型，则around方法返回值设置为Object。如果原始方法返回值为非void类型，则around方法内必须将原始方法调用的结果返回。<br>原始方法返回值为void类型的，通知内获取的返回值统一为null。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">around</span><span class=\"params\">(ProceedingJoinPoint pjp)</span> <span class=\"keyword\">throws</span> Throwable</span>&#123;</div><div class=\"line\">\tObject res = pjp.proceed(args);</div><div class=\"line\">\t<span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li>afterReturning通知获取返回值<br>在通知方法的参数中，声明一个Object类型的参数，用于保存方法的返回值</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">afterReturning</span><span class=\"params\">(JoinPoint jp,Object abc)</span></span>&#123;</div><div class=\"line\">    System.out.println(<span class=\"string\">\"afterReturning......\"</span>+ abc);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在配置文件中，为afterReturning声明保存返回值的变量名</p>\n<h3 id=\"6-5-获取异常值\"><a href=\"#6-5-获取异常值\" class=\"headerlink\" title=\"6.5 获取异常值\"></a>6.5 获取异常值</h3><p>异常对象的获取方式与返回值很相似，声明变量，在配置中声明保存异常对象的变量名。<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:after-throwing</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"pt\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"afterThrowing\"</span> <span class=\"attr\">throwing</span>=<span class=\"string\">\"e\"</span>/&gt;</span></div></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">afterThrowing</span> <span class=\"params\">(Throwable e)</span></span>&#123;</div><div class=\"line\">\tSystem.out.println(<span class=\"string\">\"afterThrowing.......\"</span>+ e);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"7-JDK代理与cglib代理\"><a href=\"#7-JDK代理与cglib代理\" class=\"headerlink\" title=\"7. JDK代理与cglib代理\"></a>7. JDK代理与cglib代理</h2>"},{"title":"spring(4)——持久层封装","date":"2017-06-16T09:42:52.000Z","_content":"\n这边博客介绍了持久层的集中封装方式。\n<!--more-->\n\n## 1. 持久层访问方式\n![数据访问方式][1]\n\n## 2. JDBC\n\n\n## 3. JDBCTemplete\n### 3.1 原始jdbcTemplete\n```java\nDriverManagerDataSource dataSource = new DriverManagerDataSource();\ndataSource.setDriverClassName(\"com.mysql.jdbc.Driver\");\ndataSource.setUrl(\"jdbc:mysql://localhost:3306/springdb\");\ndataSource.setUsername(\"root\");\ndataSource.setPassword(\"***********\");\n\nJdbcTemplate template = new JdbcTemplate(dataSource);\ntemplate.execute(\"insert into student values(1,'张三',23)\");\n```\n\n### 3.2 Spring开发jdbcTemplete\n\n 1. 设置Bean\n    ```xml\n    <bean id=\"dao\" class=\"com.topvision.daotest.Dao\">\n    \t<property name=\"jdbcTemplate\" ref=\"jdbcTemplate\" />\n    </bean>\n    \n    <bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\">\n    \t<property name=\"dataSource\" ref=\"dataSource\" />\n    </bean>\n    \n    <bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n    \t<property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" />\n    \t<property name=\"url\" value=\"jdbc:mysql://localhost:3306/springdb\" />\n    \t<property name=\"username\" value=\"root\" />\n    \t<property name=\"password\" value=\"xiaoyue*AZ2V65\" />\n    </bean>\n    ```\n 2. 编写dao层测试类\n\n    ```java\n    @Test\n    public void Demo1() {\n        ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext(\"jdbcTemplete.xml\");\n        JdbcTemplate jdbcTemplate = (JdbcTemplate) ctx.getBean(\"jdbcTemplate\");\n        jdbcTemplate.execute(\"insert into student values(5,'23423',24)\");\n    }\n    ```\n    或者注解式\n    \n    开启注解扫描\n    ```xml\n    <context:component-scan base-package=\"com.topvision.daotest\"/>\n    ```\n    去掉dao层的bean,即如下配置\n    ```xml\n    <bean id=\"dao\" class=\"com.topvision.daotest.Dao\">\n    \t<property name=\"jdbcTemplate\" ref=\"jdbcTemplate\" />\n    </bean>\n    ```\n    \n    编写测试类\n    ```java\n    @RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations=\"classpath:jdbcTemplete.xml\")\npublic class Dao {\n\t\n    \t@Autowired\n    \tprivate JdbcTemplate jdbcTemplate;\n    \n    \tpublic void setJdbcTemplate(JdbcTemplate jdbcTemplate) {\n    \t\tthis.jdbcTemplate = jdbcTemplate;\n    \t}\n    \t@Test\n    \tpublic void Demo2() {\n    \t\tjdbcTemplate.execute(\"insert into student values(8,'王五',25)\");\n    \t}\n\t}\n    ```\n\n\n## 3. jdbcDaoSupport\nJdbcDaoSupport是JDBC数据访问对象的超类，其实它使用的还是jdbcTemplete，不过需要DI依赖注入dataSource或者jdbcTemplete.\n\n### 3.1 xml方式\n\n 1. xml配置文件\n \n ```xml\n<bean id=\"jdbcDaoSupportTest\" class=\"com.topvision.daotest.JDBCDaoSupportTest\">\n\t\t<bean id=\"jdbcDaoSupportTest\" class=\"com.topvision.daotest.JDBCDaoSupportTest\">\n\t\t<!-- 必须为继承JdbcDaoSupport的类注入JdbcTemplate，变量名为jdbcTemplate -->\n\t\t<!-- <property name=\"jdbcTemplate\" ref=\"jdbcTemplate\"/> -->\n\t\t<!-- 还可以注入DataSource对象，由JdbcDaoSupport自动创建JdbcTemplate对象 -->\n\t\t<property name=\"dataSource\" ref=\"dataSource\" />\n\t</bean>\n\t\n    <bean id=\"dataSource\"\n    \tclass=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n    \t<property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" />\n    \t<property name=\"url\" value=\"jdbc:mysql://localhost:3306/springdb\" />\n    \t<property name=\"username\" value=\"root\" />\n    \t<property name=\"password\" value=\"*****\" />\n    </bean>\n ```\n 2. 测试类\n \n ```java\n public class JDBCDaoSupportTest extends JdbcDaoSupport{\n\t\n\tprivate static ClassPathXmlApplicationContext ctx;\n\n\t@Test\n\tpublic void Demo2() {\n\t\tctx = new ClassPathXmlApplicationContext(\"jdbcDaoSupport.xml\");\n\t\tJDBCDaoSupportTest bean = (JDBCDaoSupportTest) ctx.getBean(\"jdbcDaoSupportTest\");\n\t\tJdbcTemplate template = bean.getJdbcTemplate();\n\t\tString sql = \"select name from student where id = ?\";\n\t\tString name = template.queryForObject(sql, String.class,1);\n\t\tSystem.out.println(name);\n\t}\n}\n ```\n\n### 3.2 注解方式\n\n 1. xml配置\n \n ```xml\n <bean id=\"dataSource\"\n\tclass=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n\t<property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" />\n\t<property name=\"url\" value=\"jdbc:mysql://localhost:3306/springdb\" />\n\t<property name=\"username\" value=\"root\" />\n\t<property name=\"password\" value=\"*****\" />\n</bean>\n ```\n \n 2. 测试类\n ```java\n public class JDBCDaoSupportTest extends JdbcDaoSupport{\n\n    \t@Autowired\n    \tprivate DataSource dataSource;\n    \t\n    \t@PostConstruct\n    \tprivate void init() {\n    \t\tsetDataSource(dataSource);\n    \t}\n    \n    \t@Test\n    \tpublic void Demo1() {\n    \t\tJdbcTemplate template = this.getJdbcTemplate();\n    \t\tString sql = \"select name from student where id = ?\";\n    \t\tString name = template.queryForObject(sql, String.class,1);\n    \t\tSystem.out.println(name);\n    \t}\n}\n ```\n \n\n 3. 注入dataSource注意事项\n 查看jdbcDaoSupport源码，可以注入dataSource或者注入jdbcTemplete\n 注入方法有两种：\n \n 构造方法中注入：\n\n    ```java\n    @Autowired\n    UserVODaoImpl(DataSource dataSource) {\n        setDataSource(dataSource);\n    }\n    ```\n 实例化前注入\n \n ```java\n    @Autowired\n    private DataSource dataSource;\n    \n    @PostConstruct\n    private void init() {\n    \tsetDataSource(dataSource);\n    }\n ```\n \n## 4. Hibernate\n## 5. Mybatis\n\n## 6. DataSource\n\n### 6.1 Spring内置DriverManagerDataSource\n\n 1. 资源包\n\n    ```xml\n    <dependency>\n    \t<groupId>org.springframework</groupId>\n    \t<artifactId>spring-jdbc</artifactId>\n    </dependency>\n    ```  \n    \n 2. 配置项\n \n    ```xml\n    <bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n        <property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" />\n        <property name=\"url\" value=\"jdbc:mysql://localhost:3306/springdb\"/>\n        <property name=\"username\" value=\"root\" />\n        <property name=\"password\" value=\"****\" />\n    </bean>\n    ```\n    \n    \n### 6.2 DBCP\n\n 3. 资源包\n     \n    ```xml\n    <dependency>\n        <groupId>org.apache.commons</groupId>\n        <artifactId>com.springsource.org.apache.commons.dbcp</artifactId>\n        <version>1.2.2.osgi</version>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.commons</groupId>\n        <artifactId>com.springsource.org.apache.commons.pool</artifactId>\n        <version>1.5.3</version>\n    </dependency>\n    ```  \n    \n\n 4. 配置项\n    \n    ```xml\n\t<bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\">\n\t\t<property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" />\n\t\t<property name=\"url\" value=\"jdbc:mysql://localhost:3306/springdb\" />\n\t\t<property name=\"username\" value=\"root\" />\n\t\t<property name=\"password\" value=\"*****\" />\n\t</bean>\n    ```\n### 6.3 C3P0\n\n 5. 资源包\n     \n    ```xml\n    <dependency>\n\t\t<groupId>com.mchange.c3p0</groupId>\n\t\t<artifactId>com.springsource.com.mchange.v2.c3p0</artifactId>\n\t\t<version>0.9.1.2</version>\n\t</dependency>\n    ```  \n    \n\n 6. 配置项\n    \n    ```xml\n\t<bean id=\"dataSource3\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\">\n\t\t<property name=\"driverClass\" value=\"${driverClass}\" />\n\t\t<property name=\"jdbcUrl\" value=\"${url}\" />\n\t\t<property name=\"user\" value=\"${jdbc_username}\" />\n\t\t<property name=\"password\" value=\"${password}\" />\n\t</bean>\n    ```\n    \n### 6.4 外部properties输入参数\n\n 1. 编写properties文件(jdbc.properties)\n \n ```properties\ndriverClass=com.mysql.jdbc.Driver\nurl=jdbc:mysql://localhost:3306/springdb\njdbc_username=root\npassword=*****\n ```\n\n 2. 在spring配置文件中扫描properties\n \n 方式一：可用*匹配加载多个\n ```xml\n <context:property-placeholder location=\"classpath:jdbc.properties\"/>\n ```\n 方式二：一个property对应一个文件\n ```xml\n <bean class=\"org.springframework.beans.factory.config.PropertyPlaceholdeConfigurer\">\n\t\t<property name=\"location\" value=\"classpath:jdbc.properties\" />\n\t\t<property name=\"location\" value=\"classpath:dsafgusd\" />\n\t</bean>\n ```\n 3. 用&{key}的方式引入\n \n```xml\n<bean id=\"dataSource3\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\">\n\t<property name=\"driverClass\" value=\"${driverClass}\" />\n\t<property name=\"jdbcUrl\" value=\"${url}\" />\n\t<property name=\"user\" value=\"${jdbc_username}\" />\n\t<property name=\"password\" value=\"${password}\" />\n</bean>\n```\n\n  [1]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/Spring/DataAccess.png","source":"_posts/spring-4-——持久层封装.md","raw":"---\ntitle: spring(4)——持久层封装\ndate: 2017-06-16 17:42:52\ncategories:\n  - Spring\ntags:\n  - Spring\n---\n\n这边博客介绍了持久层的集中封装方式。\n<!--more-->\n\n## 1. 持久层访问方式\n![数据访问方式][1]\n\n## 2. JDBC\n\n\n## 3. JDBCTemplete\n### 3.1 原始jdbcTemplete\n```java\nDriverManagerDataSource dataSource = new DriverManagerDataSource();\ndataSource.setDriverClassName(\"com.mysql.jdbc.Driver\");\ndataSource.setUrl(\"jdbc:mysql://localhost:3306/springdb\");\ndataSource.setUsername(\"root\");\ndataSource.setPassword(\"***********\");\n\nJdbcTemplate template = new JdbcTemplate(dataSource);\ntemplate.execute(\"insert into student values(1,'张三',23)\");\n```\n\n### 3.2 Spring开发jdbcTemplete\n\n 1. 设置Bean\n    ```xml\n    <bean id=\"dao\" class=\"com.topvision.daotest.Dao\">\n    \t<property name=\"jdbcTemplate\" ref=\"jdbcTemplate\" />\n    </bean>\n    \n    <bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\">\n    \t<property name=\"dataSource\" ref=\"dataSource\" />\n    </bean>\n    \n    <bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n    \t<property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" />\n    \t<property name=\"url\" value=\"jdbc:mysql://localhost:3306/springdb\" />\n    \t<property name=\"username\" value=\"root\" />\n    \t<property name=\"password\" value=\"xiaoyue*AZ2V65\" />\n    </bean>\n    ```\n 2. 编写dao层测试类\n\n    ```java\n    @Test\n    public void Demo1() {\n        ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext(\"jdbcTemplete.xml\");\n        JdbcTemplate jdbcTemplate = (JdbcTemplate) ctx.getBean(\"jdbcTemplate\");\n        jdbcTemplate.execute(\"insert into student values(5,'23423',24)\");\n    }\n    ```\n    或者注解式\n    \n    开启注解扫描\n    ```xml\n    <context:component-scan base-package=\"com.topvision.daotest\"/>\n    ```\n    去掉dao层的bean,即如下配置\n    ```xml\n    <bean id=\"dao\" class=\"com.topvision.daotest.Dao\">\n    \t<property name=\"jdbcTemplate\" ref=\"jdbcTemplate\" />\n    </bean>\n    ```\n    \n    编写测试类\n    ```java\n    @RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations=\"classpath:jdbcTemplete.xml\")\npublic class Dao {\n\t\n    \t@Autowired\n    \tprivate JdbcTemplate jdbcTemplate;\n    \n    \tpublic void setJdbcTemplate(JdbcTemplate jdbcTemplate) {\n    \t\tthis.jdbcTemplate = jdbcTemplate;\n    \t}\n    \t@Test\n    \tpublic void Demo2() {\n    \t\tjdbcTemplate.execute(\"insert into student values(8,'王五',25)\");\n    \t}\n\t}\n    ```\n\n\n## 3. jdbcDaoSupport\nJdbcDaoSupport是JDBC数据访问对象的超类，其实它使用的还是jdbcTemplete，不过需要DI依赖注入dataSource或者jdbcTemplete.\n\n### 3.1 xml方式\n\n 1. xml配置文件\n \n ```xml\n<bean id=\"jdbcDaoSupportTest\" class=\"com.topvision.daotest.JDBCDaoSupportTest\">\n\t\t<bean id=\"jdbcDaoSupportTest\" class=\"com.topvision.daotest.JDBCDaoSupportTest\">\n\t\t<!-- 必须为继承JdbcDaoSupport的类注入JdbcTemplate，变量名为jdbcTemplate -->\n\t\t<!-- <property name=\"jdbcTemplate\" ref=\"jdbcTemplate\"/> -->\n\t\t<!-- 还可以注入DataSource对象，由JdbcDaoSupport自动创建JdbcTemplate对象 -->\n\t\t<property name=\"dataSource\" ref=\"dataSource\" />\n\t</bean>\n\t\n    <bean id=\"dataSource\"\n    \tclass=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n    \t<property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" />\n    \t<property name=\"url\" value=\"jdbc:mysql://localhost:3306/springdb\" />\n    \t<property name=\"username\" value=\"root\" />\n    \t<property name=\"password\" value=\"*****\" />\n    </bean>\n ```\n 2. 测试类\n \n ```java\n public class JDBCDaoSupportTest extends JdbcDaoSupport{\n\t\n\tprivate static ClassPathXmlApplicationContext ctx;\n\n\t@Test\n\tpublic void Demo2() {\n\t\tctx = new ClassPathXmlApplicationContext(\"jdbcDaoSupport.xml\");\n\t\tJDBCDaoSupportTest bean = (JDBCDaoSupportTest) ctx.getBean(\"jdbcDaoSupportTest\");\n\t\tJdbcTemplate template = bean.getJdbcTemplate();\n\t\tString sql = \"select name from student where id = ?\";\n\t\tString name = template.queryForObject(sql, String.class,1);\n\t\tSystem.out.println(name);\n\t}\n}\n ```\n\n### 3.2 注解方式\n\n 1. xml配置\n \n ```xml\n <bean id=\"dataSource\"\n\tclass=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n\t<property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" />\n\t<property name=\"url\" value=\"jdbc:mysql://localhost:3306/springdb\" />\n\t<property name=\"username\" value=\"root\" />\n\t<property name=\"password\" value=\"*****\" />\n</bean>\n ```\n \n 2. 测试类\n ```java\n public class JDBCDaoSupportTest extends JdbcDaoSupport{\n\n    \t@Autowired\n    \tprivate DataSource dataSource;\n    \t\n    \t@PostConstruct\n    \tprivate void init() {\n    \t\tsetDataSource(dataSource);\n    \t}\n    \n    \t@Test\n    \tpublic void Demo1() {\n    \t\tJdbcTemplate template = this.getJdbcTemplate();\n    \t\tString sql = \"select name from student where id = ?\";\n    \t\tString name = template.queryForObject(sql, String.class,1);\n    \t\tSystem.out.println(name);\n    \t}\n}\n ```\n \n\n 3. 注入dataSource注意事项\n 查看jdbcDaoSupport源码，可以注入dataSource或者注入jdbcTemplete\n 注入方法有两种：\n \n 构造方法中注入：\n\n    ```java\n    @Autowired\n    UserVODaoImpl(DataSource dataSource) {\n        setDataSource(dataSource);\n    }\n    ```\n 实例化前注入\n \n ```java\n    @Autowired\n    private DataSource dataSource;\n    \n    @PostConstruct\n    private void init() {\n    \tsetDataSource(dataSource);\n    }\n ```\n \n## 4. Hibernate\n## 5. Mybatis\n\n## 6. DataSource\n\n### 6.1 Spring内置DriverManagerDataSource\n\n 1. 资源包\n\n    ```xml\n    <dependency>\n    \t<groupId>org.springframework</groupId>\n    \t<artifactId>spring-jdbc</artifactId>\n    </dependency>\n    ```  \n    \n 2. 配置项\n \n    ```xml\n    <bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n        <property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" />\n        <property name=\"url\" value=\"jdbc:mysql://localhost:3306/springdb\"/>\n        <property name=\"username\" value=\"root\" />\n        <property name=\"password\" value=\"****\" />\n    </bean>\n    ```\n    \n    \n### 6.2 DBCP\n\n 3. 资源包\n     \n    ```xml\n    <dependency>\n        <groupId>org.apache.commons</groupId>\n        <artifactId>com.springsource.org.apache.commons.dbcp</artifactId>\n        <version>1.2.2.osgi</version>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.commons</groupId>\n        <artifactId>com.springsource.org.apache.commons.pool</artifactId>\n        <version>1.5.3</version>\n    </dependency>\n    ```  \n    \n\n 4. 配置项\n    \n    ```xml\n\t<bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\">\n\t\t<property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" />\n\t\t<property name=\"url\" value=\"jdbc:mysql://localhost:3306/springdb\" />\n\t\t<property name=\"username\" value=\"root\" />\n\t\t<property name=\"password\" value=\"*****\" />\n\t</bean>\n    ```\n### 6.3 C3P0\n\n 5. 资源包\n     \n    ```xml\n    <dependency>\n\t\t<groupId>com.mchange.c3p0</groupId>\n\t\t<artifactId>com.springsource.com.mchange.v2.c3p0</artifactId>\n\t\t<version>0.9.1.2</version>\n\t</dependency>\n    ```  \n    \n\n 6. 配置项\n    \n    ```xml\n\t<bean id=\"dataSource3\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\">\n\t\t<property name=\"driverClass\" value=\"${driverClass}\" />\n\t\t<property name=\"jdbcUrl\" value=\"${url}\" />\n\t\t<property name=\"user\" value=\"${jdbc_username}\" />\n\t\t<property name=\"password\" value=\"${password}\" />\n\t</bean>\n    ```\n    \n### 6.4 外部properties输入参数\n\n 1. 编写properties文件(jdbc.properties)\n \n ```properties\ndriverClass=com.mysql.jdbc.Driver\nurl=jdbc:mysql://localhost:3306/springdb\njdbc_username=root\npassword=*****\n ```\n\n 2. 在spring配置文件中扫描properties\n \n 方式一：可用*匹配加载多个\n ```xml\n <context:property-placeholder location=\"classpath:jdbc.properties\"/>\n ```\n 方式二：一个property对应一个文件\n ```xml\n <bean class=\"org.springframework.beans.factory.config.PropertyPlaceholdeConfigurer\">\n\t\t<property name=\"location\" value=\"classpath:jdbc.properties\" />\n\t\t<property name=\"location\" value=\"classpath:dsafgusd\" />\n\t</bean>\n ```\n 3. 用&{key}的方式引入\n \n```xml\n<bean id=\"dataSource3\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\">\n\t<property name=\"driverClass\" value=\"${driverClass}\" />\n\t<property name=\"jdbcUrl\" value=\"${url}\" />\n\t<property name=\"user\" value=\"${jdbc_username}\" />\n\t<property name=\"password\" value=\"${password}\" />\n</bean>\n```\n\n  [1]: https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/Spring/DataAccess.png","slug":"spring-4-——持久层封装","published":1,"updated":"2017-06-17T03:47:28.703Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0egs000tssvfo506bcss","content":"<p>这边博客介绍了持久层的集中封装方式。<br><a id=\"more\"></a></p>\n<h2 id=\"1-持久层访问方式\"><a href=\"#1-持久层访问方式\" class=\"headerlink\" title=\"1. 持久层访问方式\"></a>1. 持久层访问方式</h2><p><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/Spring/DataAccess.png\" alt=\"数据访问方式\"></p>\n<h2 id=\"2-JDBC\"><a href=\"#2-JDBC\" class=\"headerlink\" title=\"2. JDBC\"></a>2. JDBC</h2><h2 id=\"3-JDBCTemplete\"><a href=\"#3-JDBCTemplete\" class=\"headerlink\" title=\"3. JDBCTemplete\"></a>3. JDBCTemplete</h2><h3 id=\"3-1-原始jdbcTemplete\"><a href=\"#3-1-原始jdbcTemplete\" class=\"headerlink\" title=\"3.1 原始jdbcTemplete\"></a>3.1 原始jdbcTemplete</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">DriverManagerDataSource dataSource = <span class=\"keyword\">new</span> DriverManagerDataSource();</div><div class=\"line\">dataSource.setDriverClassName(<span class=\"string\">\"com.mysql.jdbc.Driver\"</span>);</div><div class=\"line\">dataSource.setUrl(<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span>);</div><div class=\"line\">dataSource.setUsername(<span class=\"string\">\"root\"</span>);</div><div class=\"line\">dataSource.setPassword(<span class=\"string\">\"***********\"</span>);</div><div class=\"line\"></div><div class=\"line\">JdbcTemplate template = <span class=\"keyword\">new</span> JdbcTemplate(dataSource);</div><div class=\"line\">template.execute(<span class=\"string\">\"insert into student values(1,'张三',23)\"</span>);</div></pre></td></tr></table></figure>\n<h3 id=\"3-2-Spring开发jdbcTemplete\"><a href=\"#3-2-Spring开发jdbcTemplete\" class=\"headerlink\" title=\"3.2 Spring开发jdbcTemplete\"></a>3.2 Spring开发jdbcTemplete</h3><ol>\n<li><p>设置Bean</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dao\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.daotest.Dao\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"jdbcTemplate\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"jdbcTemplate\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"jdbcTemplate\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.core.JdbcTemplate\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"dataSource\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DriverManagerDataSource\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"root\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"xiaoyue*AZ2V65\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>编写dao层测试类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Test</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Demo1</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    ClassPathXmlApplicationContext ctx = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"jdbcTemplete.xml\"</span>);</div><div class=\"line\">    JdbcTemplate jdbcTemplate = (JdbcTemplate) ctx.getBean(<span class=\"string\">\"jdbcTemplate\"</span>);</div><div class=\"line\">    jdbcTemplate.execute(<span class=\"string\">\"insert into student values(5,'23423',24)\"</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>或者注解式</p>\n<p>开启注解扫描</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context:component-scan</span> <span class=\"attr\">base-package</span>=<span class=\"string\">\"com.topvision.daotest\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<p>去掉dao层的bean,即如下配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dao\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.daotest.Dao\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"jdbcTemplate\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"jdbcTemplate\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<pre><code>编写测试类\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">    <span class=\"meta\">@RunWith</span>(SpringJUnit4ClassRunner.class)</div><div class=\"line\"><span class=\"meta\">@ContextConfiguration</span>(locations=<span class=\"string\">\"classpath:jdbcTemplete.xml\"</span>)</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dao</span> </span>&#123;</div><div class=\"line\">\t</div><div class=\"line\">    \t<span class=\"meta\">@Autowired</span></div><div class=\"line\">    \t<span class=\"keyword\">private</span> JdbcTemplate jdbcTemplate;</div><div class=\"line\">    </div><div class=\"line\">    \t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setJdbcTemplate</span><span class=\"params\">(JdbcTemplate jdbcTemplate)</span> </span>&#123;</div><div class=\"line\">    \t\t<span class=\"keyword\">this</span>.jdbcTemplate = jdbcTemplate;</div><div class=\"line\">    \t&#125;</div><div class=\"line\">    \t<span class=\"meta\">@Test</span></div><div class=\"line\">    \t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Demo2</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    \t\tjdbcTemplate.execute(<span class=\"string\">\"insert into student values(8,'王五',25)\"</span>);</div><div class=\"line\">    \t&#125;</div><div class=\"line\">\t&#125;</div></pre></td></tr></table></figure>\n</code></pre><h2 id=\"3-jdbcDaoSupport\"><a href=\"#3-jdbcDaoSupport\" class=\"headerlink\" title=\"3. jdbcDaoSupport\"></a>3. jdbcDaoSupport</h2><p>JdbcDaoSupport是JDBC数据访问对象的超类，其实它使用的还是jdbcTemplete，不过需要DI依赖注入dataSource或者jdbcTemplete.</p>\n<h3 id=\"3-1-xml方式\"><a href=\"#3-1-xml方式\" class=\"headerlink\" title=\"3.1 xml方式\"></a>3.1 xml方式</h3><ol>\n<li><p>xml配置文件</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"jdbcDaoSupportTest\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.daotest.JDBCDaoSupportTest\"</span>&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"jdbcDaoSupportTest\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.daotest.JDBCDaoSupportTest\"</span>&gt;</span></div><div class=\"line\">\t\t<span class=\"comment\">&lt;!-- 必须为继承JdbcDaoSupport的类注入JdbcTemplate，变量名为jdbcTemplate --&gt;</span></div><div class=\"line\">\t\t<span class=\"comment\">&lt;!-- &lt;property name=\"jdbcTemplate\" ref=\"jdbcTemplate\"/&gt; --&gt;</span></div><div class=\"line\">\t\t<span class=\"comment\">&lt;!-- 还可以注入DataSource对象，由JdbcDaoSupport自动创建JdbcTemplate对象 --&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"dataSource\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div><div class=\"line\">\t</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span></span></div><div class=\"line\">    \t<span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DriverManagerDataSource\"</span>&gt;</div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span></div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span> /&gt;</span></div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"root\"</span> /&gt;</span></div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"*****\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>测试类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JDBCDaoSupportTest</span> <span class=\"keyword\">extends</span> <span class=\"title\">JdbcDaoSupport</span></span>&#123;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ClassPathXmlApplicationContext ctx;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"meta\">@Test</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Demo2</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tctx = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"jdbcDaoSupport.xml\"</span>);</div><div class=\"line\">\t\tJDBCDaoSupportTest bean = (JDBCDaoSupportTest) ctx.getBean(<span class=\"string\">\"jdbcDaoSupportTest\"</span>);</div><div class=\"line\">\t\tJdbcTemplate template = bean.getJdbcTemplate();</div><div class=\"line\">\t\tString sql = <span class=\"string\">\"select name from student where id = ?\"</span>;</div><div class=\"line\">\t\tString name = template.queryForObject(sql, String.class,<span class=\"number\">1</span>);</div><div class=\"line\">\t\tSystem.out.println(name);</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"3-2-注解方式\"><a href=\"#3-2-注解方式\" class=\"headerlink\" title=\"3.2 注解方式\"></a>3.2 注解方式</h3><ol>\n<li><p>xml配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span></span></div><div class=\"line\">\t<span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DriverManagerDataSource\"</span>&gt;</div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"root\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"*****\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<ol>\n<li>测试类<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JDBCDaoSupportTest</span> <span class=\"keyword\">extends</span> <span class=\"title\">JdbcDaoSupport</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    \t<span class=\"meta\">@Autowired</span></div><div class=\"line\">    \t<span class=\"keyword\">private</span> DataSource dataSource;</div><div class=\"line\">    \t</div><div class=\"line\">    \t<span class=\"meta\">@PostConstruct</span></div><div class=\"line\">    \t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    \t\tsetDataSource(dataSource);</div><div class=\"line\">    \t&#125;</div><div class=\"line\">    </div><div class=\"line\">    \t<span class=\"meta\">@Test</span></div><div class=\"line\">    \t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Demo1</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    \t\tJdbcTemplate template = <span class=\"keyword\">this</span>.getJdbcTemplate();</div><div class=\"line\">    \t\tString sql = <span class=\"string\">\"select name from student where id = ?\"</span>;</div><div class=\"line\">    \t\tString name = template.queryForObject(sql, String.class,<span class=\"number\">1</span>);</div><div class=\"line\">    \t\tSystem.out.println(name);</div><div class=\"line\">    \t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<ol>\n<li><p>注入dataSource注意事项<br>查看jdbcDaoSupport源码，可以注入dataSource或者注入jdbcTemplete<br>注入方法有两种：</p>\n<p>构造方法中注入：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Autowired</span></div><div class=\"line\">UserVODaoImpl(DataSource dataSource) &#123;</div><div class=\"line\">    setDataSource(dataSource);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>实例化前注入</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Autowired</span></div><div class=\"line\"><span class=\"keyword\">private</span> DataSource dataSource;</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@PostConstruct</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\tsetDataSource(dataSource);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"4-Hibernate\"><a href=\"#4-Hibernate\" class=\"headerlink\" title=\"4. Hibernate\"></a>4. Hibernate</h2><h2 id=\"5-Mybatis\"><a href=\"#5-Mybatis\" class=\"headerlink\" title=\"5. Mybatis\"></a>5. Mybatis</h2><h2 id=\"6-DataSource\"><a href=\"#6-DataSource\" class=\"headerlink\" title=\"6. DataSource\"></a>6. DataSource</h2><h3 id=\"6-1-Spring内置DriverManagerDataSource\"><a href=\"#6-1-Spring内置DriverManagerDataSource\" class=\"headerlink\" title=\"6.1 Spring内置DriverManagerDataSource\"></a>6.1 Spring内置DriverManagerDataSource</h3><ol>\n<li><p>资源包</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">   \t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">   \t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-jdbc<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">   ```  </div><div class=\"line\">   </div><div class=\"line\">2. 配置项</div><div class=\"line\"></div><div class=\"line\">   ```xml</div><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DriverManagerDataSource\"</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span>/&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"root\"</span> /&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"****\"</span> /&gt;</span></div><div class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"6-2-DBCP\"><a href=\"#6-2-DBCP\" class=\"headerlink\" title=\"6.2 DBCP\"></a>6.2 DBCP</h3><ol>\n<li><p>资源包</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.commons<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>com.springsource.org.apache.commons.dbcp<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.2.osgi<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.commons<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>com.springsource.org.apache.commons.pool<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.5.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">   ```  </div><div class=\"line\">   </div><div class=\"line\"></div><div class=\"line\">4. 配置项</div><div class=\"line\">   </div><div class=\"line\">   ```xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.apache.commons.dbcp.BasicDataSource\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"root\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"*****\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"6-3-C3P0\"><a href=\"#6-3-C3P0\" class=\"headerlink\" title=\"6.3 C3P0\"></a>6.3 C3P0</h3><ol>\n<li><p>资源包</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.mchange.c3p0<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>com.springsource.com.mchange.v2.c3p0<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.9.1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">   ```  </div><div class=\"line\">   </div><div class=\"line\"></div><div class=\"line\">6. 配置项</div><div class=\"line\">   </div><div class=\"line\">   ```xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource3\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.mchange.v2.c3p0.ComboPooledDataSource\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClass\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;driverClass&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"jdbcUrl\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;url&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"user\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc_username&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;password&#125;\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"6-4-外部properties输入参数\"><a href=\"#6-4-外部properties输入参数\" class=\"headerlink\" title=\"6.4 外部properties输入参数\"></a>6.4 外部properties输入参数</h3><ol>\n<li><p>编写properties文件(jdbc.properties)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">driverClass=com.mysql.jdbc.Driver</div><div class=\"line\">url=jdbc:mysql://localhost:3306/springdb</div><div class=\"line\">jdbc_username=root</div><div class=\"line\">password=*****</div></pre></td></tr></table></figure>\n</li>\n<li><p>在spring配置文件中扫描properties</p>\n<p>方式一：可用*匹配加载多个</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context:property-placeholder</span> <span class=\"attr\">location</span>=<span class=\"string\">\"classpath:jdbc.properties\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<p>方式二：一个property对应一个文件</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.beans.factory.config.PropertyPlaceholdeConfigurer\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"location\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"classpath:jdbc.properties\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"location\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"classpath:dsafgusd\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>用&amp;{key}的方式引入</p>\n</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource3\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.mchange.v2.c3p0.ComboPooledDataSource\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClass\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;driverClass&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"jdbcUrl\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;url&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"user\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc_username&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;password&#125;\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>这边博客介绍了持久层的集中封装方式。<br>","more":"</p>\n<h2 id=\"1-持久层访问方式\"><a href=\"#1-持久层访问方式\" class=\"headerlink\" title=\"1. 持久层访问方式\"></a>1. 持久层访问方式</h2><p><img src=\"https://raw.githubusercontent.com/kevinXiao2016/kevinXiao2016.github.io/hexo/imageStorage/Spring/DataAccess.png\" alt=\"数据访问方式\"></p>\n<h2 id=\"2-JDBC\"><a href=\"#2-JDBC\" class=\"headerlink\" title=\"2. JDBC\"></a>2. JDBC</h2><h2 id=\"3-JDBCTemplete\"><a href=\"#3-JDBCTemplete\" class=\"headerlink\" title=\"3. JDBCTemplete\"></a>3. JDBCTemplete</h2><h3 id=\"3-1-原始jdbcTemplete\"><a href=\"#3-1-原始jdbcTemplete\" class=\"headerlink\" title=\"3.1 原始jdbcTemplete\"></a>3.1 原始jdbcTemplete</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">DriverManagerDataSource dataSource = <span class=\"keyword\">new</span> DriverManagerDataSource();</div><div class=\"line\">dataSource.setDriverClassName(<span class=\"string\">\"com.mysql.jdbc.Driver\"</span>);</div><div class=\"line\">dataSource.setUrl(<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span>);</div><div class=\"line\">dataSource.setUsername(<span class=\"string\">\"root\"</span>);</div><div class=\"line\">dataSource.setPassword(<span class=\"string\">\"***********\"</span>);</div><div class=\"line\"></div><div class=\"line\">JdbcTemplate template = <span class=\"keyword\">new</span> JdbcTemplate(dataSource);</div><div class=\"line\">template.execute(<span class=\"string\">\"insert into student values(1,'张三',23)\"</span>);</div></pre></td></tr></table></figure>\n<h3 id=\"3-2-Spring开发jdbcTemplete\"><a href=\"#3-2-Spring开发jdbcTemplete\" class=\"headerlink\" title=\"3.2 Spring开发jdbcTemplete\"></a>3.2 Spring开发jdbcTemplete</h3><ol>\n<li><p>设置Bean</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dao\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.daotest.Dao\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"jdbcTemplate\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"jdbcTemplate\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"jdbcTemplate\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.core.JdbcTemplate\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"dataSource\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DriverManagerDataSource\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"root\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"xiaoyue*AZ2V65\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>编写dao层测试类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Test</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Demo1</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    ClassPathXmlApplicationContext ctx = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"jdbcTemplete.xml\"</span>);</div><div class=\"line\">    JdbcTemplate jdbcTemplate = (JdbcTemplate) ctx.getBean(<span class=\"string\">\"jdbcTemplate\"</span>);</div><div class=\"line\">    jdbcTemplate.execute(<span class=\"string\">\"insert into student values(5,'23423',24)\"</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>或者注解式</p>\n<p>开启注解扫描</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context:component-scan</span> <span class=\"attr\">base-package</span>=<span class=\"string\">\"com.topvision.daotest\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<p>去掉dao层的bean,即如下配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dao\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.daotest.Dao\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"jdbcTemplate\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"jdbcTemplate\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<pre><code>编写测试类\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">    <span class=\"meta\">@RunWith</span>(SpringJUnit4ClassRunner.class)</div><div class=\"line\"><span class=\"meta\">@ContextConfiguration</span>(locations=<span class=\"string\">\"classpath:jdbcTemplete.xml\"</span>)</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dao</span> </span>&#123;</div><div class=\"line\">\t</div><div class=\"line\">    \t<span class=\"meta\">@Autowired</span></div><div class=\"line\">    \t<span class=\"keyword\">private</span> JdbcTemplate jdbcTemplate;</div><div class=\"line\">    </div><div class=\"line\">    \t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setJdbcTemplate</span><span class=\"params\">(JdbcTemplate jdbcTemplate)</span> </span>&#123;</div><div class=\"line\">    \t\t<span class=\"keyword\">this</span>.jdbcTemplate = jdbcTemplate;</div><div class=\"line\">    \t&#125;</div><div class=\"line\">    \t<span class=\"meta\">@Test</span></div><div class=\"line\">    \t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Demo2</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    \t\tjdbcTemplate.execute(<span class=\"string\">\"insert into student values(8,'王五',25)\"</span>);</div><div class=\"line\">    \t&#125;</div><div class=\"line\">\t&#125;</div></pre></td></tr></table></figure>\n</code></pre><h2 id=\"3-jdbcDaoSupport\"><a href=\"#3-jdbcDaoSupport\" class=\"headerlink\" title=\"3. jdbcDaoSupport\"></a>3. jdbcDaoSupport</h2><p>JdbcDaoSupport是JDBC数据访问对象的超类，其实它使用的还是jdbcTemplete，不过需要DI依赖注入dataSource或者jdbcTemplete.</p>\n<h3 id=\"3-1-xml方式\"><a href=\"#3-1-xml方式\" class=\"headerlink\" title=\"3.1 xml方式\"></a>3.1 xml方式</h3><ol>\n<li><p>xml配置文件</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"jdbcDaoSupportTest\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.daotest.JDBCDaoSupportTest\"</span>&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"jdbcDaoSupportTest\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.topvision.daotest.JDBCDaoSupportTest\"</span>&gt;</span></div><div class=\"line\">\t\t<span class=\"comment\">&lt;!-- 必须为继承JdbcDaoSupport的类注入JdbcTemplate，变量名为jdbcTemplate --&gt;</span></div><div class=\"line\">\t\t<span class=\"comment\">&lt;!-- &lt;property name=\"jdbcTemplate\" ref=\"jdbcTemplate\"/&gt; --&gt;</span></div><div class=\"line\">\t\t<span class=\"comment\">&lt;!-- 还可以注入DataSource对象，由JdbcDaoSupport自动创建JdbcTemplate对象 --&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"dataSource\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div><div class=\"line\">\t</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span></span></div><div class=\"line\">    \t<span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DriverManagerDataSource\"</span>&gt;</div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span></div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span> /&gt;</span></div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"root\"</span> /&gt;</span></div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"*****\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>测试类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JDBCDaoSupportTest</span> <span class=\"keyword\">extends</span> <span class=\"title\">JdbcDaoSupport</span></span>&#123;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ClassPathXmlApplicationContext ctx;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"meta\">@Test</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Demo2</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tctx = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"jdbcDaoSupport.xml\"</span>);</div><div class=\"line\">\t\tJDBCDaoSupportTest bean = (JDBCDaoSupportTest) ctx.getBean(<span class=\"string\">\"jdbcDaoSupportTest\"</span>);</div><div class=\"line\">\t\tJdbcTemplate template = bean.getJdbcTemplate();</div><div class=\"line\">\t\tString sql = <span class=\"string\">\"select name from student where id = ?\"</span>;</div><div class=\"line\">\t\tString name = template.queryForObject(sql, String.class,<span class=\"number\">1</span>);</div><div class=\"line\">\t\tSystem.out.println(name);</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"3-2-注解方式\"><a href=\"#3-2-注解方式\" class=\"headerlink\" title=\"3.2 注解方式\"></a>3.2 注解方式</h3><ol>\n<li><p>xml配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span></span></div><div class=\"line\">\t<span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DriverManagerDataSource\"</span>&gt;</div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"root\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"*****\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<ol>\n<li>测试类<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JDBCDaoSupportTest</span> <span class=\"keyword\">extends</span> <span class=\"title\">JdbcDaoSupport</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    \t<span class=\"meta\">@Autowired</span></div><div class=\"line\">    \t<span class=\"keyword\">private</span> DataSource dataSource;</div><div class=\"line\">    \t</div><div class=\"line\">    \t<span class=\"meta\">@PostConstruct</span></div><div class=\"line\">    \t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    \t\tsetDataSource(dataSource);</div><div class=\"line\">    \t&#125;</div><div class=\"line\">    </div><div class=\"line\">    \t<span class=\"meta\">@Test</span></div><div class=\"line\">    \t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Demo1</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    \t\tJdbcTemplate template = <span class=\"keyword\">this</span>.getJdbcTemplate();</div><div class=\"line\">    \t\tString sql = <span class=\"string\">\"select name from student where id = ?\"</span>;</div><div class=\"line\">    \t\tString name = template.queryForObject(sql, String.class,<span class=\"number\">1</span>);</div><div class=\"line\">    \t\tSystem.out.println(name);</div><div class=\"line\">    \t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<ol>\n<li><p>注入dataSource注意事项<br>查看jdbcDaoSupport源码，可以注入dataSource或者注入jdbcTemplete<br>注入方法有两种：</p>\n<p>构造方法中注入：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Autowired</span></div><div class=\"line\">UserVODaoImpl(DataSource dataSource) &#123;</div><div class=\"line\">    setDataSource(dataSource);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>实例化前注入</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Autowired</span></div><div class=\"line\"><span class=\"keyword\">private</span> DataSource dataSource;</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@PostConstruct</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\tsetDataSource(dataSource);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"4-Hibernate\"><a href=\"#4-Hibernate\" class=\"headerlink\" title=\"4. Hibernate\"></a>4. Hibernate</h2><h2 id=\"5-Mybatis\"><a href=\"#5-Mybatis\" class=\"headerlink\" title=\"5. Mybatis\"></a>5. Mybatis</h2><h2 id=\"6-DataSource\"><a href=\"#6-DataSource\" class=\"headerlink\" title=\"6. DataSource\"></a>6. DataSource</h2><h3 id=\"6-1-Spring内置DriverManagerDataSource\"><a href=\"#6-1-Spring内置DriverManagerDataSource\" class=\"headerlink\" title=\"6.1 Spring内置DriverManagerDataSource\"></a>6.1 Spring内置DriverManagerDataSource</h3><ol>\n<li><p>资源包</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">   \t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">   \t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-jdbc<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">   ```  </div><div class=\"line\">   </div><div class=\"line\">2. 配置项</div><div class=\"line\"></div><div class=\"line\">   ```xml</div><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DriverManagerDataSource\"</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span>/&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"root\"</span> /&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"****\"</span> /&gt;</span></div><div class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"6-2-DBCP\"><a href=\"#6-2-DBCP\" class=\"headerlink\" title=\"6.2 DBCP\"></a>6.2 DBCP</h3><ol>\n<li><p>资源包</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.commons<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>com.springsource.org.apache.commons.dbcp<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.2.osgi<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.commons<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>com.springsource.org.apache.commons.pool<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.5.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">   ```  </div><div class=\"line\">   </div><div class=\"line\"></div><div class=\"line\">4. 配置项</div><div class=\"line\">   </div><div class=\"line\">   ```xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.apache.commons.dbcp.BasicDataSource\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"jdbc:mysql://localhost:3306/springdb\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"root\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"*****\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"6-3-C3P0\"><a href=\"#6-3-C3P0\" class=\"headerlink\" title=\"6.3 C3P0\"></a>6.3 C3P0</h3><ol>\n<li><p>资源包</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.mchange.c3p0<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>com.springsource.com.mchange.v2.c3p0<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.9.1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">   ```  </div><div class=\"line\">   </div><div class=\"line\"></div><div class=\"line\">6. 配置项</div><div class=\"line\">   </div><div class=\"line\">   ```xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource3\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.mchange.v2.c3p0.ComboPooledDataSource\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClass\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;driverClass&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"jdbcUrl\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;url&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"user\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc_username&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;password&#125;\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"6-4-外部properties输入参数\"><a href=\"#6-4-外部properties输入参数\" class=\"headerlink\" title=\"6.4 外部properties输入参数\"></a>6.4 外部properties输入参数</h3><ol>\n<li><p>编写properties文件(jdbc.properties)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">driverClass=com.mysql.jdbc.Driver</div><div class=\"line\">url=jdbc:mysql://localhost:3306/springdb</div><div class=\"line\">jdbc_username=root</div><div class=\"line\">password=*****</div></pre></td></tr></table></figure>\n</li>\n<li><p>在spring配置文件中扫描properties</p>\n<p>方式一：可用*匹配加载多个</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context:property-placeholder</span> <span class=\"attr\">location</span>=<span class=\"string\">\"classpath:jdbc.properties\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<p>方式二：一个property对应一个文件</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.beans.factory.config.PropertyPlaceholdeConfigurer\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"location\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"classpath:jdbc.properties\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"location\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"classpath:dsafgusd\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>用&amp;{key}的方式引入</p>\n</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource3\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.mchange.v2.c3p0.ComboPooledDataSource\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClass\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;driverClass&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"jdbcUrl\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;url&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"user\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc_username&#125;\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;password&#125;\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></div></pre></td></tr></table></figure>"},{"title":"基于MUI及Html5+开发app","date":"2017-04-28T09:07:22.000Z","_content":"这边博客简要介绍了使用MUI和5+开发APP的流程\n<!-- more -->\n## MUI简介\n[MUI官网](http://dev.dcloud.net.cn/mui/)&nbsp&nbspMUI是最接近原生APP体验的高性能前端框架，不依赖任何第三方JS库，以iOS平台UI为基础，补充部分Android平台特有的UI控件。\n\n## 工具\n- [HBilder](http://www.dcloud.io/)\n- [5+ SDK](http://ask.dcloud.net.cn/article/103)\n- Android Studio + Android SDK\n\n## html5+简介\n[HTML5+规范](http://www.html5plus.org/doc/h5p.html)\n\n## 开发步骤\n\n    1.在Hbuilder中创建移动app项目\n    2.在manifest.json文件中按照提示配置app相关信息，包括权限选择，这个地方和下面将要提到的androidManifest.xml文件是相互独立的\n    3.新建View文件夹编写html，新建js、css文件夹放置对应文件\n    4.若使用5+相关的东西,如下操作： \n      - 在5+ SDK中，对应Feature-Android.xls文件，使用哪个模块，就在xls文件中找到对应模块\n      - 将文件中提到的相关文件从5+ SDK中的HBuilder-Integrate工程中找到，并移入android工程中\n    5.参照[5+ API](http://www.html5plus.org/doc/h5p.html),编写相关代码\n    \n## 调试\n调试可使用真机调试和模拟调试，建议真机调试，涉及到5+的代码只能在真机上运行。\n","source":"_posts/基于MUI及Html5-开发app.md","raw":"---\ntitle: 基于MUI及Html5+开发app\ndate: 2017-04-28 17:07:22\ncategories:\n    - course\ntags:\n    - MUI\n    - html5+\n---\n这边博客简要介绍了使用MUI和5+开发APP的流程\n<!-- more -->\n## MUI简介\n[MUI官网](http://dev.dcloud.net.cn/mui/)&nbsp&nbspMUI是最接近原生APP体验的高性能前端框架，不依赖任何第三方JS库，以iOS平台UI为基础，补充部分Android平台特有的UI控件。\n\n## 工具\n- [HBilder](http://www.dcloud.io/)\n- [5+ SDK](http://ask.dcloud.net.cn/article/103)\n- Android Studio + Android SDK\n\n## html5+简介\n[HTML5+规范](http://www.html5plus.org/doc/h5p.html)\n\n## 开发步骤\n\n    1.在Hbuilder中创建移动app项目\n    2.在manifest.json文件中按照提示配置app相关信息，包括权限选择，这个地方和下面将要提到的androidManifest.xml文件是相互独立的\n    3.新建View文件夹编写html，新建js、css文件夹放置对应文件\n    4.若使用5+相关的东西,如下操作： \n      - 在5+ SDK中，对应Feature-Android.xls文件，使用哪个模块，就在xls文件中找到对应模块\n      - 将文件中提到的相关文件从5+ SDK中的HBuilder-Integrate工程中找到，并移入android工程中\n    5.参照[5+ API](http://www.html5plus.org/doc/h5p.html),编写相关代码\n    \n## 调试\n调试可使用真机调试和模拟调试，建议真机调试，涉及到5+的代码只能在真机上运行。\n","slug":"基于MUI及Html5-开发app","published":1,"updated":"2017-05-19T10:17:22.971Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj49f0egw000xssvfagz0gp3j","content":"<p>这边博客简要介绍了使用MUI和5+开发APP的流程<br><a id=\"more\"></a></p>\n<h2 id=\"MUI简介\"><a href=\"#MUI简介\" class=\"headerlink\" title=\"MUI简介\"></a>MUI简介</h2><p><a href=\"http://dev.dcloud.net.cn/mui/\" target=\"_blank\" rel=\"external\">MUI官网</a>&amp;nbsp&amp;nbspMUI是最接近原生APP体验的高性能前端框架，不依赖任何第三方JS库，以iOS平台UI为基础，补充部分Android平台特有的UI控件。</p>\n<h2 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h2><ul>\n<li><a href=\"http://www.dcloud.io/\" target=\"_blank\" rel=\"external\">HBilder</a></li>\n<li><a href=\"http://ask.dcloud.net.cn/article/103\" target=\"_blank\" rel=\"external\">5+ SDK</a></li>\n<li>Android Studio + Android SDK</li>\n</ul>\n<h2 id=\"html5-简介\"><a href=\"#html5-简介\" class=\"headerlink\" title=\"html5+简介\"></a>html5+简介</h2><p><a href=\"http://www.html5plus.org/doc/h5p.html\" target=\"_blank\" rel=\"external\">HTML5+规范</a></p>\n<h2 id=\"开发步骤\"><a href=\"#开发步骤\" class=\"headerlink\" title=\"开发步骤\"></a>开发步骤</h2><pre><code>1.在Hbuilder中创建移动app项目\n2.在manifest.json文件中按照提示配置app相关信息，包括权限选择，这个地方和下面将要提到的androidManifest.xml文件是相互独立的\n3.新建View文件夹编写html，新建js、css文件夹放置对应文件\n4.若使用5+相关的东西,如下操作： \n  - 在5+ SDK中，对应Feature-Android.xls文件，使用哪个模块，就在xls文件中找到对应模块\n  - 将文件中提到的相关文件从5+ SDK中的HBuilder-Integrate工程中找到，并移入android工程中\n5.参照[5+ API](http://www.html5plus.org/doc/h5p.html),编写相关代码\n</code></pre><h2 id=\"调试\"><a href=\"#调试\" class=\"headerlink\" title=\"调试\"></a>调试</h2><p>调试可使用真机调试和模拟调试，建议真机调试，涉及到5+的代码只能在真机上运行。</p>\n","site":{"data":{}},"excerpt":"<p>这边博客简要介绍了使用MUI和5+开发APP的流程<br>","more":"</p>\n<h2 id=\"MUI简介\"><a href=\"#MUI简介\" class=\"headerlink\" title=\"MUI简介\"></a>MUI简介</h2><p><a href=\"http://dev.dcloud.net.cn/mui/\" target=\"_blank\" rel=\"external\">MUI官网</a>&amp;nbsp&amp;nbspMUI是最接近原生APP体验的高性能前端框架，不依赖任何第三方JS库，以iOS平台UI为基础，补充部分Android平台特有的UI控件。</p>\n<h2 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h2><ul>\n<li><a href=\"http://www.dcloud.io/\" target=\"_blank\" rel=\"external\">HBilder</a></li>\n<li><a href=\"http://ask.dcloud.net.cn/article/103\" target=\"_blank\" rel=\"external\">5+ SDK</a></li>\n<li>Android Studio + Android SDK</li>\n</ul>\n<h2 id=\"html5-简介\"><a href=\"#html5-简介\" class=\"headerlink\" title=\"html5+简介\"></a>html5+简介</h2><p><a href=\"http://www.html5plus.org/doc/h5p.html\" target=\"_blank\" rel=\"external\">HTML5+规范</a></p>\n<h2 id=\"开发步骤\"><a href=\"#开发步骤\" class=\"headerlink\" title=\"开发步骤\"></a>开发步骤</h2><pre><code>1.在Hbuilder中创建移动app项目\n2.在manifest.json文件中按照提示配置app相关信息，包括权限选择，这个地方和下面将要提到的androidManifest.xml文件是相互独立的\n3.新建View文件夹编写html，新建js、css文件夹放置对应文件\n4.若使用5+相关的东西,如下操作： \n  - 在5+ SDK中，对应Feature-Android.xls文件，使用哪个模块，就在xls文件中找到对应模块\n  - 将文件中提到的相关文件从5+ SDK中的HBuilder-Integrate工程中找到，并移入android工程中\n5.参照[5+ API](http://www.html5plus.org/doc/h5p.html),编写相关代码\n</code></pre><h2 id=\"调试\"><a href=\"#调试\" class=\"headerlink\" title=\"调试\"></a>调试</h2><p>调试可使用真机调试和模拟调试，建议真机调试，涉及到5+的代码只能在真机上运行。</p>"}],"PostAsset":[],"PostCategory":[{"post_id":"cj49f0efy0008ssvf9bdysl2x","category_id":"cj49f0efl0004ssvf5s5gn4eu","_id":"cj49f0egb000fssvfbj8nk3ub"},{"post_id":"cj49f0ef70000ssvf2tk1qcyj","category_id":"cj49f0efl0004ssvf5s5gn4eu","_id":"cj49f0egh000jssvfgcaxjnx9"},{"post_id":"cj49f0efi0002ssvf18fw6lqw","category_id":"cj49f0eg4000bssvfbgq1lv86","_id":"cj49f0egm000nssvfrc993ghv"},{"post_id":"cj49f0egc000gssvfcocapni5","category_id":"cj49f0efl0004ssvf5s5gn4eu","_id":"cj49f0egr000sssvfn29l4pqh"},{"post_id":"cj49f0eft0006ssvfltmx7von","category_id":"cj49f0eg4000bssvfbgq1lv86","_id":"cj49f0egu000ussvfrhdvsal7"},{"post_id":"cj49f0eg3000assvfhd54nr2x","category_id":"cj49f0eg4000bssvfbgq1lv86","_id":"cj49f0egx000yssvfcjaxwdnw"},{"post_id":"cj49f0egw000xssvfagz0gp3j","category_id":"cj49f0efl0004ssvf5s5gn4eu","_id":"cj49f0egz0011ssvfwatz9mag"},{"post_id":"cj49f0egi000kssvfo0hk63go","category_id":"cj49f0egv000vssvfufrn11dj","_id":"cj49f0eh00014ssvfjbc6hr7z"},{"post_id":"cj49f0egk000mssvfilwjdfx9","category_id":"cj49f0egv000vssvfufrn11dj","_id":"cj49f0eh10018ssvfqlge7sl3"},{"post_id":"cj49f0egp000rssvfnkyt749k","category_id":"cj49f0egv000vssvfufrn11dj","_id":"cj49f0eh4001bssvfsjms5gy5"},{"post_id":"cj49f0egs000tssvfo506bcss","category_id":"cj49f0egv000vssvfufrn11dj","_id":"cj49f0eh7001essvfl0n4q6g4"}],"PostTag":[{"post_id":"cj49f0ef70000ssvf2tk1qcyj","tag_id":"cj49f0efp0005ssvfjfltnx90","_id":"cj49f0egj000lssvftn4xufm8"},{"post_id":"cj49f0ef70000ssvf2tk1qcyj","tag_id":"cj49f0eg5000cssvfmo1eyblw","_id":"cj49f0egm000ossvf8pdjv855"},{"post_id":"cj49f0efi0002ssvf18fw6lqw","tag_id":"cj49f0egf000issvfpymtzacr","_id":"cj49f0egz0012ssvfjl2z41r4"},{"post_id":"cj49f0efi0002ssvf18fw6lqw","tag_id":"cj49f0ego000qssvf1d7opzby","_id":"cj49f0eh00015ssvfpoc8cbab"},{"post_id":"cj49f0efi0002ssvf18fw6lqw","tag_id":"cj49f0egv000wssvf3vrrriq4","_id":"cj49f0eh10017ssvfru4dztiy"},{"post_id":"cj49f0eft0006ssvfltmx7von","tag_id":"cj49f0egf000issvfpymtzacr","_id":"cj49f0eh6001dssvf7xnqpn30"},{"post_id":"cj49f0eft0006ssvfltmx7von","tag_id":"cj49f0ego000qssvf1d7opzby","_id":"cj49f0eh7001fssvfvate4k5b"},{"post_id":"cj49f0eft0006ssvfltmx7von","tag_id":"cj49f0egv000wssvf3vrrriq4","_id":"cj49f0eha001hssvf2htjba61"},{"post_id":"cj49f0efy0008ssvf9bdysl2x","tag_id":"cj49f0eh4001cssvf6u1dv3d2","_id":"cj49f0ehb001kssvfv1y36v89"},{"post_id":"cj49f0efy0008ssvf9bdysl2x","tag_id":"cj49f0eh7001gssvf9uqz2nx2","_id":"cj49f0ehb001lssvfy8hwrki4"},{"post_id":"cj49f0efy0008ssvf9bdysl2x","tag_id":"cj49f0eha001issvfyhq21bxt","_id":"cj49f0ehc001nssvfwt0tcchh"},{"post_id":"cj49f0eg3000assvfhd54nr2x","tag_id":"cj49f0egf000issvfpymtzacr","_id":"cj49f0ehf001qssvfe3trm0ih"},{"post_id":"cj49f0eg3000assvfhd54nr2x","tag_id":"cj49f0ego000qssvf1d7opzby","_id":"cj49f0ehg001rssvfc19fopq5"},{"post_id":"cj49f0eg3000assvfhd54nr2x","tag_id":"cj49f0egv000wssvf3vrrriq4","_id":"cj49f0ehj001tssvfzf9wmh4p"},{"post_id":"cj49f0egc000gssvfcocapni5","tag_id":"cj49f0ehd001pssvfu9uall6p","_id":"cj49f0ehj001vssvfe9rsd4jn"},{"post_id":"cj49f0egc000gssvfcocapni5","tag_id":"cj49f0ehi001sssvfj8ctr7be","_id":"cj49f0ehk001wssvfhsdpvyv3"},{"post_id":"cj49f0egi000kssvfo0hk63go","tag_id":"cj49f0ehj001ussvf16ivsk8t","_id":"cj49f0ehl001zssvfx1tz8533"},{"post_id":"cj49f0egi000kssvfo0hk63go","tag_id":"cj49f0ehk001xssvfz4h1svn1","_id":"cj49f0ehl0020ssvfny1rcy4g"},{"post_id":"cj49f0egk000mssvfilwjdfx9","tag_id":"cj49f0ehj001ussvf16ivsk8t","_id":"cj49f0ehp0022ssvfnr78i7km"},{"post_id":"cj49f0egp000rssvfnkyt749k","tag_id":"cj49f0ehj001ussvf16ivsk8t","_id":"cj49f0eht0025ssvf6bp8p1i5"},{"post_id":"cj49f0egp000rssvfnkyt749k","tag_id":"cj49f0ehq0023ssvfo1t4j1o1","_id":"cj49f0eht0026ssvfag8yez77"},{"post_id":"cj49f0egs000tssvfo506bcss","tag_id":"cj49f0ehj001ussvf16ivsk8t","_id":"cj49f0ehu0028ssvfn0vwk56d"},{"post_id":"cj49f0egw000xssvfagz0gp3j","tag_id":"cj49f0eht0027ssvfoa1e1drt","_id":"cj49f0ehu002assvf9rt5w2n5"},{"post_id":"cj49f0egw000xssvfagz0gp3j","tag_id":"cj49f0ehd001pssvfu9uall6p","_id":"cj49f0ehv002bssvfjpwk40vj"}],"Tag":[{"name":"android","_id":"cj49f0efp0005ssvfjfltnx90"},{"name":"apk打包","_id":"cj49f0eg5000cssvfmo1eyblw"},{"name":"snmp","_id":"cj49f0egf000issvfpymtzacr"},{"name":"network","_id":"cj49f0ego000qssvf1d7opzby"},{"name":"snmp4j","_id":"cj49f0egv000wssvf3vrrriq4"},{"name":"github","_id":"cj49f0eh4001cssvf6u1dv3d2"},{"name":"hexo","_id":"cj49f0eh7001gssvf9uqz2nx2"},{"name":"next","_id":"cj49f0eha001issvfyhq21bxt"},{"name":"html5+","_id":"cj49f0ehd001pssvfu9uall6p"},{"name":"native.js","_id":"cj49f0ehi001sssvfj8ctr7be"},{"name":"Spring","_id":"cj49f0ehj001ussvf16ivsk8t"},{"name":"IOC","_id":"cj49f0ehk001xssvfz4h1svn1"},{"name":"AOP","_id":"cj49f0ehq0023ssvfo1t4j1o1"},{"name":"MUI","_id":"cj49f0eht0027ssvfoa1e1drt"}]}}